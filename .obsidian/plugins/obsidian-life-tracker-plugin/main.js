/*
THIS IS A GENERATED/BUNDLED FILE BY BUN.
If you want to view the source, please visit the github repository of this plugin.
*/
var s2=Object.create;var{getPrototypeOf:o2,defineProperty:f5,getOwnPropertyNames:E$,getOwnPropertyDescriptor:n2}=Object,D$=Object.prototype.hasOwnProperty;var i2=($,Q,J)=>{J=$!=null?s2(o2($)):{};let Z=Q||!$||!$.__esModule?f5(J,"default",{value:$,enumerable:!0}):J;for(let q of E$($))if(!D$.call(Z,q))f5(Z,q,{get:()=>$[q],enumerable:!0});return Z},w$=new WeakMap,a2=($)=>{var Q=w$.get($),J;if(Q)return Q;if(Q=f5({},"__esModule",{value:!0}),$&&typeof $==="object"||typeof $==="function")E$($).map((Z)=>!D$.call(Q,Z)&&f5(Q,Z,{get:()=>$[Z],enumerable:!(J=n2($,Z))||J.enumerable}));return w$.set($,Q),Q},t2=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports);var P$=($,Q)=>{for(var J in Q)f5($,J,{get:Q[J],enumerable:!0,configurable:!0,set:(Z)=>Q[J]=()=>Z})};var Z6=($,Q)=>()=>($&&(Q=$($=0)),Q);function Q9($){return $+0.5|0}function $9($){return C1(Q9($*2.55),0,255)}function O1($){return C1(Q9($*255),0,255)}function W1($){return C1(Q9($/2.55)/100,0,1)}function dQ($){return C1(Q9($*100),0,100)}function lG($){var Q=$.length,J;if($[0]==="#"){if(Q===4||Q===5)J={r:255&f0[$[1]]*17,g:255&f0[$[2]]*17,b:255&f0[$[3]]*17,a:Q===5?f0[$[4]]*17:255};else if(Q===7||Q===9)J={r:f0[$[1]]<<4|f0[$[2]],g:f0[$[3]]<<4|f0[$[4]],b:f0[$[5]]<<4|f0[$[6]],a:Q===9?f0[$[7]]<<4|f0[$[8]]:255}}return J}function sG($){var Q=cG($)?pG:dG;return $?"#"+Q($.r)+Q($.g)+Q($.b)+rG($.a,Q):void 0}function sQ($,Q,J){let Z=Q*Math.min(J,1-J),q=(G,X=(G+$/30)%12)=>J-Z*Math.max(Math.min(X-3,9-X,1),-1);return[q(0),q(8),q(4)]}function nG($,Q,J){let Z=(q,G=(q+$/60)%6)=>J-J*Q*Math.max(Math.min(G,4-G,1),0);return[Z(5),Z(3),Z(1)]}function iG($,Q,J){let Z=sQ($,1,0.5),q;if(Q+J>1)q=1/(Q+J),Q*=q,J*=q;for(q=0;q<3;q++)Z[q]*=1-Q-J,Z[q]+=Q;return Z}function aG($,Q,J,Z,q){if($===q)return(Q-J)/Z+(Q<J?6:0);if(Q===q)return(J-$)/Z+2;return($-Q)/Z+4}function b4($){let J=$.r/255,Z=$.g/255,q=$.b/255,G=Math.max(J,Z,q),X=Math.min(J,Z,q),K=(G+X)/2,Y,U,N;if(G!==X)N=G-X,U=K>0.5?N/(2-G-X):N/(G+X),Y=aG(J,Z,q,N,G),Y=Y*60+0.5;return[Y|0,U||0,K]}function y4($,Q,J,Z){return(Array.isArray(Q)?$(Q[0],Q[1],Q[2]):$(Q,J,Z)).map(O1)}function v4($,Q,J){return y4(sQ,$,Q,J)}function tG($,Q,J){return y4(iG,$,Q,J)}function eG($,Q,J){return y4(nG,$,Q,J)}function oQ($){return($%360+360)%360}function $X($){let Q=oG.exec($),J=255,Z;if(!Q)return;if(Q[5]!==Z)J=Q[6]?$9(+Q[5]):O1(+Q[5]);let q=oQ(+Q[2]),G=+Q[3]/100,X=+Q[4]/100;if(Q[1]==="hwb")Z=tG(q,G,X);else if(Q[1]==="hsv")Z=eG(q,G,X);else Z=v4(q,G,X);return{r:Z[0],g:Z[1],b:Z[2],a:J}}function QX($,Q){var J=b4($);J[0]=oQ(J[0]+Q),J=v4(J),$.r=J[0],$.g=J[1],$.b=J[2]}function JX($){if(!$)return;let Q=b4($),J=Q[0],Z=dQ(Q[1]),q=dQ(Q[2]);return $.a<255?`hsla(${J}, ${Z}%, ${q}%, ${W1($.a)})`:`hsl(${J}, ${Z}%, ${q}%)`}function ZX(){let $={},Q=Object.keys(lQ),J=Object.keys(cQ),Z,q,G,X,K;for(Z=0;Z<Q.length;Z++){X=K=Q[Z];for(q=0;q<J.length;q++)G=J[q],K=K.replace(G,cQ[G]);G=parseInt(lQ[X],16),$[K]=[G>>16&255,G>>8&255,G&255]}return $}function qX($){if(!L8)L8=ZX(),L8.transparent=[0,0,0,0];let Q=L8[$.toLowerCase()];return Q&&{r:Q[0],g:Q[1],b:Q[2],a:Q.length===4?Q[3]:255}}function XX($){let Q=GX.exec($),J=255,Z,q,G;if(!Q)return;if(Q[7]!==Z){let X=+Q[7];J=Q[8]?$9(X):C1(X*255,0,255)}return Z=+Q[1],q=+Q[3],G=+Q[5],Z=255&(Q[2]?$9(Z):C1(Z,0,255)),q=255&(Q[4]?$9(q):C1(q,0,255)),G=255&(Q[6]?$9(G):C1(G,0,255)),{r:Z,g:q,b:G,a:J}}function KX($){return $&&($.a<255?`rgba(${$.r}, ${$.g}, ${$.b}, ${W1($.a)})`:`rgb(${$.r}, ${$.g}, ${$.b})`)}function YX($,Q,J){let Z=w5(W1($.r)),q=w5(W1($.g)),G=w5(W1($.b));return{r:O1(S4(Z+J*(w5(W1(Q.r))-Z))),g:O1(S4(q+J*(w5(W1(Q.g))-q))),b:O1(S4(G+J*(w5(W1(Q.b))-G))),a:$.a+J*(Q.a-$.a)}}function F8($,Q,J){if($){let Z=b4($);Z[Q]=Math.max(0,Math.min(Z[Q]+Z[Q]*J,Q===0?360:1)),Z=v4(Z),$.r=Z[0],$.g=Z[1],$.b=Z[2]}}function nQ($,Q){return $?Object.assign(Q||{},$):$}function rQ($){var Q={r:0,g:0,b:0,a:255};if(Array.isArray($)){if($.length>=3){if(Q={r:$[0],g:$[1],b:$[2],a:255},$.length>3)Q.a=O1($[3])}}else Q=nQ($,{r:0,g:0,b:0,a:1}),Q.a=O1(Q.a);return Q}function UX($){if($.charAt(0)==="r")return XX($);return $X($)}class E5{constructor($){if($ instanceof E5)return $;let Q=typeof $,J;if(Q==="object")J=rQ($);else if(Q==="string")J=lG($)||qX($)||UX($);this._rgb=J,this._valid=!!J}get valid(){return this._valid}get rgb(){var $=nQ(this._rgb);if($)$.a=W1($.a);return $}set rgb($){this._rgb=rQ($)}rgbString(){return this._valid?KX(this._rgb):void 0}hexString(){return this._valid?sG(this._rgb):void 0}hslString(){return this._valid?JX(this._rgb):void 0}mix($,Q){if($){let J=this.rgb,Z=$.rgb,q,G=Q===q?0.5:Q,X=2*G-1,K=J.a-Z.a,Y=((X*K===-1?X:(X+K)/(1+X*K))+1)/2;q=1-Y,J.r=255&Y*J.r+q*Z.r+0.5,J.g=255&Y*J.g+q*Z.g+0.5,J.b=255&Y*J.b+q*Z.b+0.5,J.a=G*J.a+(1-G)*Z.a,this.rgb=J}return this}interpolate($,Q){if($)this._rgb=YX(this._rgb,$._rgb,Q);return this}clone(){return new E5(this.rgb)}alpha($){return this._rgb.a=O1($),this}clearer($){let Q=this._rgb;return Q.a*=1-$,this}greyscale(){let $=this._rgb,Q=Q9($.r*0.3+$.g*0.59+$.b*0.11);return $.r=$.g=$.b=Q,this}opaquer($){let Q=this._rgb;return Q.a*=1+$,this}negate(){let $=this._rgb;return $.r=255-$.r,$.g=255-$.g,$.b=255-$.b,this}lighten($){return F8(this._rgb,2,$),this}darken($){return F8(this._rgb,2,-$),this}saturate($){return F8(this._rgb,1,$),this}desaturate($){return F8(this._rgb,1,-$),this}rotate($){return QX(this._rgb,$),this}}var C1=($,Q,J)=>Math.max(Math.min($,J),Q),f0,k4,pG=($)=>k4[$&15],dG=($)=>k4[($&240)>>4]+k4[$&15],j8=($)=>($&240)>>4===($&15),cG=($)=>j8($.r)&&j8($.g)&&j8($.b)&&j8($.a),rG=($,Q)=>$<255?Q($):"",oG,cQ,lQ,L8,GX,S4=($)=>$<=0.0031308?$*12.92:Math.pow($,0.4166666666666667)*1.055-0.055,w5=($)=>$<=0.04045?$/12.92:Math.pow(($+0.055)/1.055,2.4);var iQ=Z6(()=>{/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */f0={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},k4=[..."0123456789ABCDEF"];oG=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;cQ={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lQ={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};GX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/});function e0(){}function u($){return $===null||$===void 0}function J0($){if(Array.isArray&&Array.isArray($))return!0;let Q=Object.prototype.toString.call($);if(Q.slice(0,7)==="[object"&&Q.slice(-6)==="Array]")return!0;return!1}function p($){return $!==null&&Object.prototype.toString.call($)==="[object Object]"}function Y0($){return(typeof $==="number"||$ instanceof Number)&&isFinite(+$)}function O0($,Q){return Y0($)?$:Q}function h($,Q){return typeof $>"u"?Q:$}function $0($,Q,J){if($&&typeof $.call==="function")return $.apply(J,Q)}function i($,Q,J,Z){let q,G,X;if(J0($))if(G=$.length,Z)for(q=G-1;q>=0;q--)Q.call(J,$[q],q);else for(q=0;q<G;q++)Q.call(J,$[q],q);else if(p($)){X=Object.keys($),G=X.length;for(q=0;q<G;q++)Q.call(J,$[X[q]],X[q])}}function q9($,Q){let J,Z,q,G;if(!$||!Q||$.length!==Q.length)return!1;for(J=0,Z=$.length;J<Z;++J)if(q=$[J],G=Q[J],q.datasetIndex!==G.datasetIndex||q.index!==G.index)return!1;return!0}function w8($){if(J0($))return $.map(w8);if(p($)){let Q=Object.create(null),J=Object.keys($),Z=J.length,q=0;for(;q<Z;++q)Q[J[q]]=w8($[J[q]]);return Q}return $}function UJ($){return["__proto__","prototype","constructor"].indexOf($)===-1}function NX($,Q,J,Z){if(!UJ($))return;let q=Q[$],G=J[$];if(p(q)&&p(G))P5(q,G,Z);else Q[$]=w8(G)}function P5($,Q,J){let Z=J0(Q)?Q:[Q],q=Z.length;if(!p($))return $;J=J||{};let G=J.merger||NX,X;for(let K=0;K<q;++K){if(X=Z[K],!p(X))continue;let Y=Object.keys(X);for(let U=0,N=Y.length;U<N;++U)G(Y[U],$,X,J)}return $}function C5($,Q){return P5($,Q,{merger:HX})}function HX($,Q,J){if(!UJ($))return;let Z=Q[$],q=J[$];if(p(Z)&&p(q))C5(Z,q);else if(!Object.prototype.hasOwnProperty.call(Q,$))Q[$]=w8(q)}function MX($){let Q=$.split("."),J=[],Z="";for(let q of Q)if(Z+=q,Z.endsWith("\\"))Z=Z.slice(0,-1)+".";else J.push(Z),Z="";return J}function BX($){let Q=MX($);return(J)=>{for(let Z of Q){if(Z==="")break;J=J&&J[Z]}return J}}function F1($,Q){return(aQ[Q]||(aQ[Q]=BX(Q)))($)}function T8($){return $.charAt(0).toUpperCase()+$.slice(1)}function NJ($){return $.type==="mouseup"||$.type==="click"||$.type==="contextmenu"}function z5($,Q,J){return Math.abs($-Q)<J}function m4($){let Q=Math.round($);$=z5($,Q,$/1000)?Q:$;let J=Math.pow(10,Math.floor(L1($))),Z=$/J;return(Z<=1?1:Z<=2?2:Z<=5?5:10)*J}function HJ($){let Q=[],J=Math.sqrt($),Z;for(Z=1;Z<J;Z++)if($%Z===0)Q.push(Z),Q.push($/Z);if(J===(J|0))Q.push(J);return Q.sort((q,G)=>q-G).pop(),Q}function LX($){return typeof $==="symbol"||typeof $==="object"&&$!==null&&!((Symbol.toPrimitive in $)||("toString"in $)||("valueOf"in $))}function $5($){return!LX($)&&!isNaN(parseFloat($))&&isFinite($)}function MJ($,Q){let J=Math.round($);return J-Q<=$&&J+Q>=$}function u4($,Q,J){let Z,q,G;for(Z=0,q=$.length;Z<q;Z++)if(G=$[Z][J],!isNaN(G))Q.min=Math.min(Q.min,G),Q.max=Math.max(Q.max,G)}function x0($){return $*(o/180)}function C8($){return $*(180/o)}function p4($){if(!Y0($))return;let Q=1,J=0;while(Math.round($*Q)/Q!==$)Q*=10,J++;return J}function d4($,Q){let J=Q.x-$.x,Z=Q.y-$.y,q=Math.sqrt(J*J+Z*Z),G=Math.atan2(Z,J);if(G<-0.5*o)G+=Z0;return{angle:G,distance:q}}function D8($,Q){return Math.sqrt(Math.pow(Q.x-$.x,2)+Math.pow(Q.y-$.y,2))}function FX($,Q){return($-Q+WX)%Z0-o}function _0($){return($%Z0+Z0)%Z0}function I5($,Q,J,Z){let q=_0($),G=_0(Q),X=_0(J),K=_0(G-q),Y=_0(X-q),U=_0(q-G),N=_0(q-X);return q===G||q===X||Z&&G===X||K>Y&&U<N}function L0($,Q,J){return Math.max(Q,Math.min(J,$))}function BJ($){return L0($,-32768,32767)}function $1($,Q,J,Z=0.000001){return $>=Math.min(Q,J)-Z&&$<=Math.max(Q,J)+Z}function O8($,Q,J){J=J||((X)=>$[X]<Q);let Z=$.length-1,q=0,G;while(Z-q>1)if(G=q+Z>>1,J(G))q=G;else Z=G;return{lo:q,hi:Z}}function jJ($,Q,J){let Z=0,q=$.length;while(Z<q&&$[Z]<Q)Z++;while(q>Z&&$[q-1]>J)q--;return Z>0||q<$.length?$.slice(Z,q):$}function FJ($,Q){if($._chartjs){$._chartjs.listeners.push(Q);return}Object.defineProperty($,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[Q]}}),LJ.forEach((J)=>{let Z="_onData"+T8(J),q=$[J];Object.defineProperty($,J,{configurable:!0,enumerable:!1,value(...G){let X=q.apply(this,G);return $._chartjs.listeners.forEach((K)=>{if(typeof K[Z]==="function")K[Z](...G)}),X}})})}function c4($,Q){let J=$._chartjs;if(!J)return;let Z=J.listeners,q=Z.indexOf(Q);if(q!==-1)Z.splice(q,1);if(Z.length>0)return;LJ.forEach((G)=>{delete $[G]}),delete $._chartjs}function l4($){let Q=new Set($);if(Q.size===$.length)return $;return Array.from(Q)}function s4($,Q){let J=[],Z=!1;return function(...q){if(J=q,!Z)Z=!0,r4.call(window,()=>{Z=!1,$.apply(Q,J)})}}function VJ($,Q){let J;return function(...Z){if(Q)clearTimeout(J),J=setTimeout($,Q,Z);else $.apply(this,Z);return Q}}function o4($,Q,J){let Z=Q.length,q=0,G=Z;if($._sorted){let{iScale:X,vScale:K,_parsed:Y}=$,U=$.dataset?$.dataset.options?$.dataset.options.spanGaps:null:null,N=X.axis,{min:H,max:M,minDefined:B,maxDefined:j}=X.getUserBounds();if(B){if(q=Math.min(a0(Y,N,H).lo,J?Z:a0(Q,N,X.getPixelForValue(H)).lo),U){let L=Y.slice(0,q+1).reverse().findIndex((W)=>!u(W[K.axis]));q-=Math.max(0,L)}q=L0(q,0,Z-1)}if(j){let L=Math.max(a0(Y,X.axis,M,!0).hi+1,J?0:a0(Q,N,X.getPixelForValue(M),!0).hi+1);if(U){let W=Y.slice(L-1).findIndex((V)=>!u(V[K.axis]));L+=Math.max(0,W)}G=L0(L,q,Z)-q}else G=Z-q}return{start:q,count:G}}function n4($){let{xScale:Q,yScale:J,_scaleRanges:Z}=$,q={xmin:Q.min,xmax:Q.max,ymin:J.min,ymax:J.max};if(!Z)return $._scaleRanges=q,!0;let G=Z.xmin!==Q.min||Z.xmax!==Q.max||Z.ymin!==J.min||Z.ymax!==J.max;return Object.assign(Z,q),G}function i4($){if($&&typeof $==="object"){let Q=$.toString();return Q==="[object CanvasPattern]"||Q==="[object CanvasGradient]"}return!1}function a4($){return i4($)?$:new E5($)}function h4($){return i4($)?$:new E5($).saturate(0.5).darken(0.1).hexString()}function RX($){$.set("animation",{delay:void 0,duration:1000,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),$.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:(Q)=>Q!=="onProgress"&&Q!=="onComplete"&&Q!=="fn"}),$.set("animations",{colors:{type:"color",properties:_X},numbers:{type:"number",properties:VX}}),$.describe("animations",{_fallback:"animation"}),$.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:(Q)=>Q|0}}}})}function wX($){$.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}function EX($,Q){Q=Q||{};let J=$+JSON.stringify(Q),Z=QJ.get(J);if(!Z)Z=new Intl.NumberFormat($,Q),QJ.set(J,Z);return Z}function A5($,Q,J){return EX(Q,J).format($)}function DX($,Q){let J=Q.length>3?Q[2].value-Q[1].value:Q[1].value-Q[0].value;if(Math.abs(J)>=1&&$!==Math.floor($))J=$-Math.floor($);return J}function PX($){$.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(Q,J)=>J.lineWidth,tickColor:(Q,J)=>J.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:S5.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),$.route("scale.ticks","color","","color"),$.route("scale.grid","color","","borderColor"),$.route("scale.border","color","","borderColor"),$.route("scale.title","color","","color"),$.describe("scale",{_fallback:!1,_scriptable:(Q)=>!Q.startsWith("before")&&!Q.startsWith("after")&&Q!=="callback"&&Q!=="parser",_indexable:(Q)=>Q!=="borderDash"&&Q!=="tickBorderDash"&&Q!=="dash"}),$.describe("scales",{_fallback:"scale"}),$.describe("scale.ticks",{_scriptable:(Q)=>Q!=="backdropPadding"&&Q!=="callback",_indexable:(Q)=>Q!=="backdropPadding"})}function J9($,Q){if(!Q)return $;let J=Q.split(".");for(let Z=0,q=J.length;Z<q;++Z){let G=J[Z];$=$[G]||($[G]=Object.create(null))}return $}function f4($,Q,J){if(typeof Q==="string")return P5(J9($,Q),J);return P5(J9($,""),Q)}class wJ{constructor($,Q){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=(J)=>J.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(J,Z)=>h4(Z.backgroundColor),this.hoverBorderColor=(J,Z)=>h4(Z.borderColor),this.hoverColor=(J,Z)=>h4(Z.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe($),this.apply(Q)}set($,Q){return f4(this,$,Q)}get($){return J9(this,$)}describe($,Q){return f4(I8,$,Q)}override($,Q){return f4(A1,$,Q)}route($,Q,J,Z){let q=J9(this,$),G=J9(this,J),X="_"+Q;Object.defineProperties(q,{[X]:{value:q[Q],writable:!0},[Q]:{enumerable:!0,get(){let K=this[X],Y=G[Z];if(p(K))return Object.assign({},Y,K);return h(K,Y)},set(K){this[X]=K}}})}apply($){$.forEach((Q)=>Q(this))}}function TX($){if(!$||u($.size)||u($.family))return null;return($.style?$.style+" ":"")+($.weight?$.weight+" ":"")+$.size+"px "+$.family}function Z9($,Q,J,Z,q){let G=Q[q];if(!G)G=Q[q]=$.measureText(q).width,J.push(q);if(G>Z)Z=G;return Z}function EJ($,Q,J,Z){Z=Z||{};let q=Z.data=Z.data||{},G=Z.garbageCollect=Z.garbageCollect||[];if(Z.font!==Q)q=Z.data={},G=Z.garbageCollect=[],Z.font=Q;$.save(),$.font=Q;let X=0,K=J.length,Y,U,N,H,M;for(Y=0;Y<K;Y++)if(H=J[Y],H!==void 0&&H!==null&&!J0(H))X=Z9($,q,G,X,H);else if(J0(H)){for(U=0,N=H.length;U<N;U++)if(M=H[U],M!==void 0&&M!==null&&!J0(M))X=Z9($,q,G,X,M)}$.restore();let B=G.length/2;if(B>J.length){for(Y=0;Y<B;Y++)delete q[G[Y]];G.splice(0,B)}return X}function S1($,Q,J){let Z=$.currentDevicePixelRatio,q=J!==0?Math.max(J/2,0.5):0;return Math.round((Q-q)*Z)/Z+q}function t4($,Q){if(!Q&&!$)return;Q=Q||$.getContext("2d"),Q.save(),Q.resetTransform(),Q.clearRect(0,0,$.width,$.height),Q.restore()}function A8($,Q,J,Z){e4($,Q,J,Z,null)}function e4($,Q,J,Z,q){let G,X,K,Y,U,N,H,M,B=Q.pointStyle,j=Q.rotation,L=Q.radius,W=(j||0)*jX;if(B&&typeof B==="object"){if(G=B.toString(),G==="[object HTMLImageElement]"||G==="[object HTMLCanvasElement]"){$.save(),$.translate(J,Z),$.rotate(W),$.drawImage(B,-B.width/2,-B.height/2,B.width,B.height),$.restore();return}}if(isNaN(L)||L<=0)return;switch($.beginPath(),B){default:if(q)$.ellipse(J,Z,q/2,L,0,0,Z0);else $.arc(J,Z,L,0,Z0);$.closePath();break;case"triangle":N=q?q/2:L,$.moveTo(J+Math.sin(W)*N,Z-Math.cos(W)*L),W+=tQ,$.lineTo(J+Math.sin(W)*N,Z-Math.cos(W)*L),W+=tQ,$.lineTo(J+Math.sin(W)*N,Z-Math.cos(W)*L),$.closePath();break;case"rectRounded":U=L*0.516,Y=L-U,X=Math.cos(W+a1)*Y,H=Math.cos(W+a1)*(q?q/2-U:Y),K=Math.sin(W+a1)*Y,M=Math.sin(W+a1)*(q?q/2-U:Y),$.arc(J-H,Z-K,U,W-o,W-B0),$.arc(J+M,Z-X,U,W-B0,W),$.arc(J+H,Z+K,U,W,W+B0),$.arc(J-M,Z+X,U,W+B0,W+o),$.closePath();break;case"rect":if(!j){Y=Math.SQRT1_2*L,N=q?q/2:Y,$.rect(J-N,Z-Y,2*N,2*Y);break}W+=a1;case"rectRot":H=Math.cos(W)*(q?q/2:L),X=Math.cos(W)*L,K=Math.sin(W)*L,M=Math.sin(W)*(q?q/2:L),$.moveTo(J-H,Z-K),$.lineTo(J+M,Z-X),$.lineTo(J+H,Z+K),$.lineTo(J-M,Z+X),$.closePath();break;case"crossRot":W+=a1;case"cross":H=Math.cos(W)*(q?q/2:L),X=Math.cos(W)*L,K=Math.sin(W)*L,M=Math.sin(W)*(q?q/2:L),$.moveTo(J-H,Z-K),$.lineTo(J+H,Z+K),$.moveTo(J+M,Z-X),$.lineTo(J-M,Z+X);break;case"star":H=Math.cos(W)*(q?q/2:L),X=Math.cos(W)*L,K=Math.sin(W)*L,M=Math.sin(W)*(q?q/2:L),$.moveTo(J-H,Z-K),$.lineTo(J+H,Z+K),$.moveTo(J+M,Z-X),$.lineTo(J-M,Z+X),W+=a1,H=Math.cos(W)*(q?q/2:L),X=Math.cos(W)*L,K=Math.sin(W)*L,M=Math.sin(W)*(q?q/2:L),$.moveTo(J-H,Z-K),$.lineTo(J+H,Z+K),$.moveTo(J+M,Z-X),$.lineTo(J-M,Z+X);break;case"line":X=q?q/2:Math.cos(W)*L,K=Math.sin(W)*L,$.moveTo(J-X,Z-K),$.lineTo(J+X,Z+K);break;case"dash":$.moveTo(J,Z),$.lineTo(J+Math.cos(W)*(q?q/2:L),Z+Math.sin(W)*L);break;case!1:$.closePath();break}if($.fill(),Q.borderWidth>0)$.stroke()}function t0($,Q,J){return J=J||0.5,!Q||$&&$.x>Q.left-J&&$.x<Q.right+J&&$.y>Q.top-J&&$.y<Q.bottom+J}function G9($,Q){$.save(),$.beginPath(),$.rect(Q.left,Q.top,Q.right-Q.left,Q.bottom-Q.top),$.clip()}function X9($){$.restore()}function DJ($,Q,J,Z,q){if(!Q)return $.lineTo(J.x,J.y);if(q==="middle"){let G=(Q.x+J.x)/2;$.lineTo(G,Q.y),$.lineTo(G,J.y)}else if(q==="after"!==!!Z)$.lineTo(Q.x,J.y);else $.lineTo(J.x,Q.y);$.lineTo(J.x,J.y)}function PJ($,Q,J,Z){if(!Q)return $.lineTo(J.x,J.y);$.bezierCurveTo(Z?Q.cp1x:Q.cp2x,Z?Q.cp1y:Q.cp2y,Z?J.cp2x:J.cp1x,Z?J.cp2y:J.cp1y,J.x,J.y)}function CX($,Q){if(Q.translation)$.translate(Q.translation[0],Q.translation[1]);if(!u(Q.rotation))$.rotate(Q.rotation);if(Q.color)$.fillStyle=Q.color;if(Q.textAlign)$.textAlign=Q.textAlign;if(Q.textBaseline)$.textBaseline=Q.textBaseline}function OX($,Q,J,Z,q){if(q.strikethrough||q.underline){let G=$.measureText(Z),X=Q-G.actualBoundingBoxLeft,K=Q+G.actualBoundingBoxRight,Y=J-G.actualBoundingBoxAscent,U=J+G.actualBoundingBoxDescent,N=q.strikethrough?(Y+U)/2:U;$.strokeStyle=$.fillStyle,$.beginPath(),$.lineWidth=q.decorationWidth||2,$.moveTo(X,N),$.lineTo(K,N),$.stroke()}}function zX($,Q){let J=$.fillStyle;$.fillStyle=Q.color,$.fillRect(Q.left,Q.top,Q.width,Q.height),$.fillStyle=J}function k1($,Q,J,Z,q,G={}){let X=J0(Q)?Q:[Q],K=G.strokeWidth>0&&G.strokeColor!=="",Y,U;$.save(),$.font=q.string,CX($,G);for(Y=0;Y<X.length;++Y){if(U=X[Y],G.backdrop)zX($,G.backdrop);if(K){if(G.strokeColor)$.strokeStyle=G.strokeColor;if(!u(G.strokeWidth))$.lineWidth=G.strokeWidth;$.strokeText(U,J,Z,G.maxWidth)}$.fillText(U,J,Z,G.maxWidth),OX($,J,Z,U,G),Z+=Number(q.lineHeight)}$.restore()}function k5($,Q){let{x:J,y:Z,w:q,h:G,radius:X}=Q;$.arc(J+X.topLeft,Z+X.topLeft,X.topLeft,1.5*o,o,!0),$.lineTo(J,Z+G-X.bottomLeft),$.arc(J+X.bottomLeft,Z+G-X.bottomLeft,X.bottomLeft,o,B0,!0),$.lineTo(J+q-X.bottomRight,Z+G),$.arc(J+q-X.bottomRight,Z+G-X.bottomRight,X.bottomRight,B0,0,!0),$.lineTo(J+q,Z+X.topRight),$.arc(J+q-X.topRight,Z+X.topRight,X.topRight,0,-B0,!0),$.lineTo(J+X.topLeft,Z)}function SX($,Q){let J=(""+$).match(IX);if(!J||J[1]==="normal")return Q*1.2;switch($=+J[2],J[3]){case"px":return $;case"%":$/=100;break}return Q*$}function S8($,Q){let J={},Z=p(Q),q=Z?Object.keys(Q):Q,G=p($)?Z?(X)=>h($[X],$[Q[X]]):(X)=>$[X]:()=>$;for(let X of q)J[X]=kX(G(X));return J}function $7($){return S8($,{top:"y",right:"x",bottom:"y",left:"x"})}function b1($){return S8($,["topLeft","topRight","bottomLeft","bottomRight"])}function w0($){let Q=$7($);return Q.width=Q.left+Q.right,Q.height=Q.top+Q.bottom,Q}function j0($,Q){$=$||{},Q=Q||q0.font;let J=h($.size,Q.size);if(typeof J==="string")J=parseInt(J,10);let Z=h($.style,Q.style);if(Z&&!(""+Z).match(AX))console.warn('Invalid font style specified: "'+Z+'"'),Z=void 0;let q={family:h($.family,Q.family),lineHeight:SX(h($.lineHeight,Q.lineHeight),J),size:J,style:Z,weight:h($.weight,Q.weight),string:""};return q.string=TX(q),q}function b5($,Q,J,Z){let q=!0,G,X,K;for(G=0,X=$.length;G<X;++G){if(K=$[G],K===void 0)continue;if(Q!==void 0&&typeof K==="function")K=K(Q),q=!1;if(J!==void 0&&J0(K))K=K[J%K.length],q=!1;if(K!==void 0){if(Z&&!q)Z.cacheable=!1;return K}}}function TJ($,Q,J){let{min:Z,max:q}=$,G=x4(Q,(q-Z)/2),X=(K,Y)=>J&&K===0?0:K+Y;return{min:X(Z,-Math.abs(G)),max:X(q,G)}}function V1($,Q){return Object.assign(Object.create($),Q)}function k8($,Q=[""],J,Z,q=()=>$[0]){let G=J||$;if(typeof Z>"u")Z=zJ("_fallback",$);let X={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:$,_rootScopes:G,_fallback:Z,_getTarget:q,override:(K)=>k8([K,...$],Q,G,Z)};return new Proxy(X,{deleteProperty(K,Y){return delete K[Y],delete K._keys,delete $[0][Y],!0},get(K,Y){return CJ(K,Y,()=>mX(Y,Q,$,K))},getOwnPropertyDescriptor(K,Y){return Reflect.getOwnPropertyDescriptor(K._scopes[0],Y)},getPrototypeOf(){return Reflect.getPrototypeOf($[0])},has(K,Y){return ZJ(K).includes(Y)},ownKeys(K){return ZJ(K)},set(K,Y,U){let N=K._storage||(K._storage=q());return K[Y]=N[Y]=U,delete K._keys,!0}})}function e1($,Q,J,Z){let q={_cacheable:!1,_proxy:$,_context:Q,_subProxy:J,_stack:new Set,_descriptors:Q7($,Z),setContext:(G)=>e1($,G,J,Z),override:(G)=>e1($.override(G),Q,J,Z)};return new Proxy(q,{deleteProperty(G,X){return delete G[X],delete $[X],!0},get(G,X,K){return CJ(G,X,()=>yX(G,X,K))},getOwnPropertyDescriptor(G,X){return G._descriptors.allKeys?Reflect.has($,X)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor($,X)},getPrototypeOf(){return Reflect.getPrototypeOf($)},has(G,X){return Reflect.has($,X)},ownKeys(){return Reflect.ownKeys($)},set(G,X,K){return $[X]=K,delete G[X],!0}})}function Q7($,Q={scriptable:!0,indexable:!0}){let{_scriptable:J=Q.scriptable,_indexable:Z=Q.indexable,_allKeys:q=Q.allKeys}=$;return{allKeys:q,scriptable:J,indexable:Z,isScriptable:j1(J)?J:()=>J,isIndexable:j1(Z)?Z:()=>Z}}function CJ($,Q,J){if(Object.prototype.hasOwnProperty.call($,Q)||Q==="constructor")return $[Q];let Z=J();return $[Q]=Z,Z}function yX($,Q,J){let{_proxy:Z,_context:q,_subProxy:G,_descriptors:X}=$,K=Z[Q];if(j1(K)&&X.isScriptable(Q))K=vX(Q,K,$,J);if(J0(K)&&K.length)K=hX(Q,K,$,X.isIndexable);if(J7(Q,K))K=e1(K,q,G&&G[Q],X);return K}function vX($,Q,J,Z){let{_proxy:q,_context:G,_subProxy:X,_stack:K}=J;if(K.has($))throw Error("Recursion detected: "+Array.from(K).join("->")+"->"+$);K.add($);let Y=Q(G,X||Z);if(K.delete($),J7($,Y))Y=Z7(q._scopes,q,$,Y);return Y}function hX($,Q,J,Z){let{_proxy:q,_context:G,_subProxy:X,_descriptors:K}=J;if(typeof G.index<"u"&&Z($))return Q[G.index%Q.length];else if(p(Q[0])){let Y=Q,U=q._scopes.filter((N)=>N!==Y);Q=[];for(let N of Y){let H=Z7(U,q,$,N);Q.push(e1(H,G,X&&X[$],K))}}return Q}function OJ($,Q,J){return j1($)?$(Q,J):$}function xX($,Q,J,Z,q){for(let G of Q){let X=fX(J,G);if(X){$.add(X);let K=OJ(X._fallback,J,q);if(typeof K<"u"&&K!==J&&K!==Z)return K}else if(X===!1&&typeof Z<"u"&&J!==Z)return null}return!1}function Z7($,Q,J,Z){let q=Q._rootScopes,G=OJ(Q._fallback,J,Z),X=[...$,...q],K=new Set;K.add(Z);let Y=JJ(K,X,J,G||J,Z);if(Y===null)return!1;if(typeof G<"u"&&G!==J){if(Y=JJ(K,X,G,Y,Z),Y===null)return!1}return k8(Array.from(K),[""],q,G,()=>gX(Q,J,Z))}function JJ($,Q,J,Z,q){while(J)J=xX($,Q,J,Z,q);return J}function gX($,Q,J){let Z=$._getTarget();if(!(Q in Z))Z[Q]={};let q=Z[Q];if(J0(q)&&p(J))return J;return q||{}}function mX($,Q,J,Z){let q;for(let G of Q)if(q=zJ(bX(G,$),J),typeof q<"u")return J7($,q)?Z7(J,Z,$,q):q}function zJ($,Q){for(let J of Q){if(!J)continue;let Z=J[$];if(typeof Z<"u")return Z}}function ZJ($){let Q=$._keys;if(!Q)Q=$._keys=uX($._scopes);return Q}function uX($){let Q=new Set;for(let J of $)for(let Z of Object.keys(J).filter((q)=>!q.startsWith("_")))Q.add(Z);return Array.from(Q)}function q7($,Q,J,Z){let{iScale:q}=$,{key:G="r"}=this._parsing,X=Array(Z),K,Y,U,N;for(K=0,Y=Z;K<Y;++K)U=K+J,N=Q[U],X[K]={r:q.parse(F1(N,G),U)};return X}function dX($,Q,J,Z){let q=$.skip?Q:$,G=Q,X=J.skip?Q:J,K=D8(G,q),Y=D8(X,G),U=K/(K+Y),N=Y/(K+Y);U=isNaN(U)?0:U,N=isNaN(N)?0:N;let H=Z*U,M=Z*N;return{previous:{x:G.x-H*(X.x-q.x),y:G.y-H*(X.y-q.y)},next:{x:G.x+M*(X.x-q.x),y:G.y+M*(X.y-q.y)}}}function cX($,Q,J){let Z=$.length,q,G,X,K,Y,U=T5($,0);for(let N=0;N<Z-1;++N){if(Y=U,U=T5($,N+1),!Y||!U)continue;if(z5(Q[N],0,pX)){J[N]=J[N+1]=0;continue}if(q=J[N]/Q[N],G=J[N+1]/Q[N],K=Math.pow(q,2)+Math.pow(G,2),K<=9)continue;X=3/Math.sqrt(K),J[N]=q*X*Q[N],J[N+1]=G*X*Q[N]}}function lX($,Q,J="x"){let Z=IJ(J),q=$.length,G,X,K,Y=T5($,0);for(let U=0;U<q;++U){if(X=K,K=Y,Y=T5($,U+1),!K)continue;let N=K[J],H=K[Z];if(X)G=(N-X[J])/3,K[`cp1${J}`]=N-G,K[`cp1${Z}`]=H-G*Q[U];if(Y)G=(Y[J]-N)/3,K[`cp2${J}`]=N+G,K[`cp2${Z}`]=H+G*Q[U]}}function rX($,Q="x"){let J=IJ(Q),Z=$.length,q=Array(Z).fill(0),G=Array(Z),X,K,Y,U=T5($,0);for(X=0;X<Z;++X){if(K=Y,Y=U,U=T5($,X+1),!Y)continue;if(U){let N=U[Q]-Y[Q];q[X]=N!==0?(U[J]-Y[J])/N:0}G[X]=!K?q[X]:!U?q[X-1]:l0(q[X-1])!==l0(q[X])?0:(q[X-1]+q[X])/2}cX($,q,G),lX($,G,Q)}function _8($,Q,J){return Math.max(Math.min($,J),Q)}function sX($,Q){let J,Z,q,G,X,K=t0($[0],Q);for(J=0,Z=$.length;J<Z;++J){if(X=G,G=K,K=J<Z-1&&t0($[J+1],Q),!G)continue;if(q=$[J],X)q.cp1x=_8(q.cp1x,Q.left,Q.right),q.cp1y=_8(q.cp1y,Q.top,Q.bottom);if(K)q.cp2x=_8(q.cp2x,Q.left,Q.right),q.cp2y=_8(q.cp2y,Q.top,Q.bottom)}}function AJ($,Q,J,Z,q){let G,X,K,Y;if(Q.spanGaps)$=$.filter((U)=>!U.skip);if(Q.cubicInterpolationMode==="monotone")rX($,q);else{let U=Z?$[$.length-1]:$[0];for(G=0,X=$.length;G<X;++G)K=$[G],Y=dX(U,K,$[Math.min(G+1,X-(Z?0:1))%X],Q.tension),K.cp1x=Y.previous.x,K.cp1y=Y.previous.y,K.cp2x=Y.next.x,K.cp2y=Y.next.y,U=K}if(Q.capBezierPoints)sX($,J)}function b8(){return typeof window<"u"&&typeof document<"u"}function y8($){let Q=$.parentNode;if(Q&&Q.toString()==="[object ShadowRoot]")Q=Q.host;return Q}function P8($,Q,J){let Z;if(typeof $==="string"){if(Z=parseInt($,10),$.indexOf("%")!==-1)Z=Z/100*Q.parentNode[J]}else Z=$;return Z}function oX($,Q){return v8($).getPropertyValue(Q)}function t1($,Q,J){let Z={};J=J?"-"+J:"";for(let q=0;q<4;q++){let G=nX[q];Z[G]=parseFloat($[Q+"-"+G+J])||0}return Z.width=Z.left+Z.right,Z.height=Z.top+Z.bottom,Z}function aX($,Q){let J=$.touches,Z=J&&J.length?J[0]:$,{offsetX:q,offsetY:G}=Z,X=!1,K,Y;if(iX(q,G,$.target))K=q,Y=G;else{let U=Q.getBoundingClientRect();K=Z.clientX-U.left,Y=Z.clientY-U.top,X=!0}return{x:K,y:Y,box:X}}function y1($,Q){if("native"in $)return $;let{canvas:J,currentDevicePixelRatio:Z}=Q,q=v8(J),G=q.boxSizing==="border-box",X=t1(q,"padding"),K=t1(q,"border","width"),{x:Y,y:U,box:N}=aX($,J),H=X.left+(N&&K.left),M=X.top+(N&&K.top),{width:B,height:j}=Q;if(G)B-=X.width+K.width,j-=X.height+K.height;return{x:Math.round((Y-H)/B*J.width/Z),y:Math.round((U-M)/j*J.height/Z)}}function tX($,Q,J){let Z,q;if(Q===void 0||J===void 0){let G=$&&y8($);if(!G)Q=$.clientWidth,J=$.clientHeight;else{let X=G.getBoundingClientRect(),K=v8(G),Y=t1(K,"border","width"),U=t1(K,"padding");Q=X.width-U.width-Y.width,J=X.height-U.height-Y.height,Z=P8(K.maxWidth,G,"clientWidth"),q=P8(K.maxHeight,G,"clientHeight")}}return{width:Q,height:J,maxWidth:Z||E8,maxHeight:q||E8}}function SJ($,Q,J,Z){let q=v8($),G=t1(q,"margin"),X=P8(q.maxWidth,$,"clientWidth")||E8,K=P8(q.maxHeight,$,"clientHeight")||E8,Y=tX($,Q,J),{width:U,height:N}=Y;if(q.boxSizing==="content-box"){let M=t1(q,"border","width"),B=t1(q,"padding");U-=B.width+M.width,N-=B.height+M.height}if(U=Math.max(0,U-G.width),N=Math.max(0,Z?U/Z:N-G.height),U=I1(Math.min(U,X,Y.maxWidth)),N=I1(Math.min(N,K,Y.maxHeight)),U&&!N)N=I1(U/2);if((Q!==void 0||J!==void 0)&&Z&&Y.height&&N>Y.height)N=Y.height,U=I1(Math.floor(N*Z));return{width:U,height:N}}function G7($,Q,J){let Z=Q||1,q=I1($.height*Z),G=I1($.width*Z);$.height=I1($.height),$.width=I1($.width);let X=$.canvas;if(X.style&&(J||!X.style.height&&!X.style.width))X.style.height=`${$.height}px`,X.style.width=`${$.width}px`;if($.currentDevicePixelRatio!==Z||X.height!==q||X.width!==G)return $.currentDevicePixelRatio=Z,X.height=q,X.width=G,$.ctx.setTransform(Z,0,0,Z,0,0),!0;return!1}function X7($,Q){let J=oX($,Q),Z=J&&J.match(/^(\d+)(\.\d+)?px$/);return Z?+Z[1]:void 0}function z1($,Q,J,Z){return{x:$.x+J*(Q.x-$.x),y:$.y+J*(Q.y-$.y)}}function bJ($,Q,J,Z){return{x:$.x+J*(Q.x-$.x),y:Z==="middle"?J<0.5?$.y:Q.y:Z==="after"?J<1?$.y:Q.y:J>0?Q.y:$.y}}function yJ($,Q,J,Z){let q={x:$.cp2x,y:$.cp2y},G={x:Q.cp1x,y:Q.cp1y},X=z1($,q,J),K=z1(q,G,J),Y=z1(G,Q,J),U=z1(X,K,J),N=z1(K,Y,J);return z1(U,N,J)}function Q5($,Q,J){return $?eX(Q,J):$K()}function K7($,Q){let J,Z;if(Q==="ltr"||Q==="rtl")J=$.canvas.style,Z=[J.getPropertyValue("direction"),J.getPropertyPriority("direction")],J.setProperty("direction",Q,"important"),$.prevTextDirection=Z}function Y7($,Q){if(Q!==void 0)delete $.prevTextDirection,$.canvas.style.setProperty("direction",Q[0],Q[1])}function vJ($){if($==="angle")return{between:I5,compare:FX,normalize:_0};return{between:$1,compare:(Q,J)=>Q-J,normalize:(Q)=>Q}}function qJ({start:$,end:Q,count:J,loop:Z,style:q}){return{start:$%J,end:Q%J,loop:Z&&(Q-$+1)%J===0,style:q}}function QK($,Q,J){let{property:Z,start:q,end:G}=J,{between:X,normalize:K}=vJ(Z),Y=Q.length,{start:U,end:N,loop:H}=$,M,B;if(H){U+=Y,N+=Y;for(M=0,B=Y;M<B;++M){if(!X(K(Q[U%Y][Z]),q,G))break;U--,N--}U%=Y,N%=Y}if(N<U)N+=Y;return{start:U,end:N,loop:H,style:$.style}}function U7($,Q,J){if(!J)return[$];let{property:Z,start:q,end:G}=J,X=Q.length,{compare:K,between:Y,normalize:U}=vJ(Z),{start:N,end:H,loop:M,style:B}=QK($,Q,J),j=[],L=!1,W=null,V,_,D,E=()=>Y(q,D,V)&&K(q,D)!==0,w=()=>K(G,V)===0||Y(G,D,V),P=()=>L||E(),T=()=>!L||w();for(let A=N,z=N;A<=H;++A){if(_=Q[A%X],_.skip)continue;if(V=U(_[Z]),V===D)continue;if(L=Y(V,q,G),W===null&&P())W=K(V,q)===0?A:z;if(W!==null&&T())j.push(qJ({start:W,end:A,loop:M,count:X,style:B})),W=null;z=A,D=V}if(W!==null)j.push(qJ({start:W,end:H,loop:M,count:X,style:B}));return j}function N7($,Q){let J=[],Z=$.segments;for(let q=0;q<Z.length;q++){let G=U7(Z[q],$.points,Q);if(G.length)J.push(...G)}return J}function JK($,Q,J,Z){let q=0,G=Q-1;if(J&&!Z)while(q<Q&&!$[q].skip)q++;while(q<Q&&$[q].skip)q++;if(q%=Q,J)G+=q;while(G>q&&$[G%Q].skip)G--;return G%=Q,{start:q,end:G}}function ZK($,Q,J,Z){let q=$.length,G=[],X=Q,K=$[Q],Y;for(Y=Q+1;Y<=J;++Y){let U=$[Y%q];if(U.skip||U.stop){if(!K.skip)Z=!1,G.push({start:Q%q,end:(Y-1)%q,loop:Z}),Q=X=U.stop?Y:null}else if(X=Y,K.skip)Q=Y;K=U}if(X!==null)G.push({start:Q%q,end:X%q,loop:Z});return G}function hJ($,Q){let J=$.points,Z=$.options.spanGaps,q=J.length;if(!q)return[];let G=!!$._loop,{start:X,end:K}=JK(J,q,G,Z);if(Z===!0)return GJ($,[{start:X,end:K,loop:G}],J,Q);let Y=K<X?K+q:K,U=!!$._fullLoop&&X===0&&K===q-1;return GJ($,ZK(J,X,Y,U),J,Q)}function GJ($,Q,J,Z){if(!Z||!Z.setContext||!J)return Q;return qK($,Q,J,Z)}function qK($,Q,J,Z){let q=$._chart.getContext(),G=XJ($.options),{_datasetIndex:X,options:{spanGaps:K}}=$,Y=J.length,U=[],N=G,H=Q[0].start,M=H;function B(j,L,W,V){let _=K?-1:1;if(j===L)return;j+=Y;while(J[j%Y].skip)j-=_;while(J[L%Y].skip)L+=_;if(j%Y!==L%Y)U.push({start:j%Y,end:L%Y,loop:W,style:V}),N=V,H=L%Y}for(let j of Q){H=K?H:j.start;let L=J[H%Y],W;for(M=H+1;M<=j.end;M++){let V=J[M%Y];if(W=XJ(Z.setContext(V1(q,{type:"segment",p0:L,p1:V,p0DataIndex:(M-1)%Y,p1DataIndex:M%Y,datasetIndex:X}))),GK(W,N))B(H,M-1,j.loop,N);L=V,N=W}if(H<M-1)B(H,M-1,j.loop,N)}return U}function XJ($){return{backgroundColor:$.backgroundColor,borderCapStyle:$.borderCapStyle,borderDash:$.borderDash,borderDashOffset:$.borderDashOffset,borderJoinStyle:$.borderJoinStyle,borderWidth:$.borderWidth,borderColor:$.borderColor}}function GK($,Q){if(!Q)return!1;let J=[],Z=function(q,G){if(!i4(G))return G;if(!J.includes(G))J.push(G);return J.indexOf(G)};return JSON.stringify($,Z)!==JSON.stringify(Q,Z)}function R8($,Q,J){return $.options.clip?$[J]:Q[J]}function XK($,Q){let{xScale:J,yScale:Z}=$;if(J&&Z)return{left:R8(J,Q,"left"),right:R8(J,Q,"right"),top:R8(Z,Q,"top"),bottom:R8(Z,Q,"bottom")};return Q}function H7($,Q){let J=Q._clip;if(J.disabled)return!1;let Z=XK(Q,$.chartArea);return{left:J.left===!1?0:Z.left-(J.left===!0?0:J.left),right:J.right===!1?$.width:Z.right+(J.right===!0?0:J.right),top:J.top===!1?0:Z.top-(J.top===!0?0:J.top),bottom:J.bottom===!1?$.height:Z.bottom+(J.bottom===!0?0:J.bottom)}}var KJ,YJ=($,Q)=>typeof $==="string"&&$.endsWith("%")?parseFloat($)/100:+$/Q,x4=($,Q)=>typeof $==="string"&&$.endsWith("%")?parseFloat($)/100*Q:+$,aQ,O5=($)=>typeof $<"u",j1=($)=>typeof $==="function",g4=($,Q)=>{if($.size!==Q.size)return!1;for(let J of $)if(!Q.has(J))return!1;return!0},o,Z0,WX,E8,jX,B0,a1,tQ,L1,l0,a0=($,Q,J,Z)=>O8($,J,Z?(q)=>{let G=$[q][Q];return G<J||G===J&&$[q+1][Q]===J}:(q)=>$[q][Q]<J),WJ=($,Q,J)=>O8($,J,(Z)=>$[Z][Q]>=J),LJ,r4,z8=($)=>$==="start"?"left":$==="end"?"right":"center",R0=($,Q,J)=>$==="start"?Q:$==="end"?J:(Q+J)/2,_J=($,Q,J,Z)=>{return $===(Z?"left":"right")?J:$==="center"?(Q+J)/2:Q},V8=($)=>$===0||$===1,eQ=($,Q,J)=>-(Math.pow(2,10*($-=1))*Math.sin(($-Q)*Z0/J)),$J=($,Q,J)=>Math.pow(2,-10*$)*Math.sin(($-Q)*Z0/J)+1,D5,VX,_X,QJ,RJ,S5,A1,I8,q0,IX,AX,kX=($)=>+$||0,bX=($,Q)=>$?$+T8(Q):Q,J7=($,Q)=>p(Q)&&$!=="adapters"&&(Object.getPrototypeOf(Q)===null||Q.constructor===Object),fX=($,Q)=>$===!0?Q:typeof $==="string"?F1(Q,$):void 0,pX,T5=($,Q)=>Q<$.length&&!$[Q].skip&&$[Q],IJ=($)=>$==="x"?"y":"x",v8=($)=>$.ownerDocument.defaultView.getComputedStyle($,null),nX,iX=($,Q,J)=>($>0||Q>0)&&(!J||!J.shadowRoot),I1=($)=>Math.round($*10)/10,kJ,eX=function($,Q){return{x(J){return $+$+Q-J},setWidth(J){Q=J},textAlign(J){if(J==="center")return J;return J==="right"?"left":"right"},xPlus(J,Z){return J-Z},leftForLtr(J,Z){return J-Z}}},$K=function(){return{x($){return $},setWidth($){},textAlign($){return $},xPlus($,Q){return $+Q},leftForLtr($,Q){return $}}};var fJ=Z6(()=>{iQ();/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */KJ=(()=>{let $=0;return()=>$++})();aQ={"":($)=>$,x:($)=>$.x,y:($)=>$.y};o=Math.PI,Z0=2*o,WX=Z0+o,E8=Number.POSITIVE_INFINITY,jX=o/180,B0=o/2,a1=o/4,tQ=o*2/3,L1=Math.log10,l0=Math.sign;LJ=["push","pop","shift","splice","unshift"];r4=function(){if(typeof window>"u")return function($){return $()};return window.requestAnimationFrame}();D5={linear:($)=>$,easeInQuad:($)=>$*$,easeOutQuad:($)=>-$*($-2),easeInOutQuad:($)=>($/=0.5)<1?0.5*$*$:-0.5*(--$*($-2)-1),easeInCubic:($)=>$*$*$,easeOutCubic:($)=>($-=1)*$*$+1,easeInOutCubic:($)=>($/=0.5)<1?0.5*$*$*$:0.5*(($-=2)*$*$+2),easeInQuart:($)=>$*$*$*$,easeOutQuart:($)=>-(($-=1)*$*$*$-1),easeInOutQuart:($)=>($/=0.5)<1?0.5*$*$*$*$:-0.5*(($-=2)*$*$*$-2),easeInQuint:($)=>$*$*$*$*$,easeOutQuint:($)=>($-=1)*$*$*$*$+1,easeInOutQuint:($)=>($/=0.5)<1?0.5*$*$*$*$*$:0.5*(($-=2)*$*$*$*$+2),easeInSine:($)=>-Math.cos($*B0)+1,easeOutSine:($)=>Math.sin($*B0),easeInOutSine:($)=>-0.5*(Math.cos(o*$)-1),easeInExpo:($)=>$===0?0:Math.pow(2,10*($-1)),easeOutExpo:($)=>$===1?1:-Math.pow(2,-10*$)+1,easeInOutExpo:($)=>V8($)?$:$<0.5?0.5*Math.pow(2,10*($*2-1)):0.5*(-Math.pow(2,-10*($*2-1))+2),easeInCirc:($)=>$>=1?$:-(Math.sqrt(1-$*$)-1),easeOutCirc:($)=>Math.sqrt(1-($-=1)*$),easeInOutCirc:($)=>($/=0.5)<1?-0.5*(Math.sqrt(1-$*$)-1):0.5*(Math.sqrt(1-($-=2)*$)+1),easeInElastic:($)=>V8($)?$:eQ($,0.075,0.3),easeOutElastic:($)=>V8($)?$:$J($,0.075,0.3),easeInOutElastic($){return V8($)?$:$<0.5?0.5*eQ($*2,0.1125,0.45):0.5+0.5*$J($*2-1,0.1125,0.45)},easeInBack($){return $*$*(2.70158*$-1.70158)},easeOutBack($){return($-=1)*$*(2.70158*$+1.70158)+1},easeInOutBack($){let Q=1.70158;if(($/=0.5)<1)return 0.5*($*$*(((Q*=1.525)+1)*$-Q));return 0.5*(($-=2)*$*(((Q*=1.525)+1)*$+Q)+2)},easeInBounce:($)=>1-D5.easeOutBounce(1-$),easeOutBounce($){if($<0.36363636363636365)return 7.5625*$*$;if($<0.7272727272727273)return 7.5625*($-=0.5454545454545454)*$+0.75;if($<0.9090909090909091)return 7.5625*($-=0.8181818181818182)*$+0.9375;return 7.5625*($-=0.9545454545454546)*$+0.984375},easeInOutBounce:($)=>$<0.5?D5.easeInBounce($*2)*0.5:D5.easeOutBounce($*2-1)*0.5+0.5};VX=["x","y","borderWidth","radius","tension"],_X=["color","borderColor","backgroundColor"];QJ=new Map;RJ={values($){return J0($)?$:""+$},numeric($,Q,J){if($===0)return"0";let Z=this.chart.options.locale,q,G=$;if(J.length>1){let U=Math.max(Math.abs(J[0].value),Math.abs(J[J.length-1].value));if(U<0.0001||U>1000000000000000)q="scientific";G=DX($,J)}let X=L1(Math.abs(G)),K=isNaN(X)?1:Math.max(Math.min(-1*Math.floor(X),20),0),Y={notation:q,minimumFractionDigits:K,maximumFractionDigits:K};return Object.assign(Y,this.options.ticks.format),A5($,Z,Y)},logarithmic($,Q,J){if($===0)return"0";let Z=J[Q].significand||$/Math.pow(10,Math.floor(L1($)));if([1,2,3,5,10,15].includes(Z)||Q>0.8*J.length)return RJ.numeric.call(this,$,Q,J);return""}};S5={formatters:RJ};A1=Object.create(null),I8=Object.create(null);q0=new wJ({_scriptable:($)=>!$.startsWith("on"),_indexable:($)=>$!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[RX,wX,PX]);IX=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,AX=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;pX=Number.EPSILON||0.00000000000001;nX=["top","right","bottom","left"];kJ=function(){let $=!1;try{let Q={get passive(){return $=!0,!1}};if(b8())window.addEventListener("test",null,Q),window.removeEventListener("test",null,Q)}catch(Q){}return $}()});var w2={};P$(w2,{scales:()=>R2,registry:()=>r0,registerables:()=>XU,plugins:()=>V2,layouts:()=>E0,elements:()=>q2,defaults:()=>q0,controllers:()=>mZ,animator:()=>J1,_detectPlatform:()=>sZ,_adapters:()=>uZ,Tooltip:()=>F2,Title:()=>W2,TimeSeriesScale:()=>i7,TimeScale:()=>V9,Ticks:()=>S5,SubTitle:()=>j2,ScatterController:()=>f7,Scale:()=>h1,RadialLinearScale:()=>n7,RadarController:()=>h7,PolarAreaController:()=>s8,PointElement:()=>d7,PieController:()=>v7,LogarithmicScale:()=>o7,LinearScale:()=>s7,LineElement:()=>v5,LineController:()=>y7,Legend:()=>B2,Interaction:()=>pZ,Filler:()=>H2,Element:()=>s0,DoughnutController:()=>_9,DomPlatform:()=>m7,Decimation:()=>U2,DatasetController:()=>Z1,Colors:()=>K2,Chart:()=>u7,CategoryScale:()=>r7,BubbleController:()=>b7,BasicPlatform:()=>g7,BasePlatform:()=>o8,BarElement:()=>c7,BarController:()=>k7,ArcElement:()=>p7,Animations:()=>r8,Animation:()=>S7});class fZ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify($,Q,J,Z){let q=Q.listeners[Z],G=Q.duration;q.forEach((X)=>X({chart:$,initial:Q.initial,numSteps:G,currentStep:Math.min(J-Q.start,G)}))}_refresh(){if(this._request)return;this._running=!0,this._request=r4.call(window,()=>{if(this._update(),this._request=null,this._running)this._refresh()})}_update($=Date.now()){let Q=0;if(this._charts.forEach((J,Z)=>{if(!J.running||!J.items.length)return;let q=J.items,G=q.length-1,X=!1,K;for(;G>=0;--G)if(K=q[G],K._active){if(K._total>J.duration)J.duration=K._total;K.tick($),X=!0}else q[G]=q[q.length-1],q.pop();if(X)Z.draw(),this._notify(Z,J,$,"progress");if(!q.length)J.running=!1,this._notify(Z,J,$,"complete"),J.initial=!1;Q+=q.length}),this._lastDate=$,Q===0)this._running=!1}_getAnims($){let Q=this._charts,J=Q.get($);if(!J)J={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},Q.set($,J);return J}listen($,Q,J){this._getAnims($).listeners[Q].push(J)}add($,Q){if(!Q||!Q.length)return;this._getAnims($).items.push(...Q)}has($){return this._getAnims($).items.length>0}start($){let Q=this._charts.get($);if(!Q)return;Q.running=!0,Q.start=Date.now(),Q.duration=Q.items.reduce((J,Z)=>Math.max(J,Z._duration),0),this._refresh()}running($){if(!this._running)return!1;let Q=this._charts.get($);if(!Q||!Q.running||!Q.items.length)return!1;return!0}stop($){let Q=this._charts.get($);if(!Q||!Q.items.length)return;let J=Q.items,Z=J.length-1;for(;Z>=0;--Z)J[Z].cancel();Q.items=[],this._notify($,Q,Date.now(),"complete")}remove($){return this._charts.delete($)}}class S7{constructor($,Q,J,Z){let q=Q[J];Z=b5([$.to,Z,q,$.from]);let G=b5([$.from,q,Z]);this._active=!0,this._fn=$.fn||KK[$.type||typeof G],this._easing=D5[$.easing]||D5.linear,this._start=Math.floor(Date.now()+($.delay||0)),this._duration=this._total=Math.floor($.duration),this._loop=!!$.loop,this._target=Q,this._prop=J,this._from=G,this._to=Z,this._promises=void 0}active(){return this._active}update($,Q,J){if(this._active){this._notify(!1);let Z=this._target[this._prop],q=J-this._start,G=this._duration-q;this._start=J,this._duration=Math.floor(Math.max(G,$.duration)),this._total+=q,this._loop=!!$.loop,this._to=b5([$.to,Q,Z,$.from]),this._from=b5([$.from,Z,Q])}}cancel(){if(this._active)this.tick(Date.now()),this._active=!1,this._notify(!1)}tick($){let Q=$-this._start,J=this._duration,Z=this._prop,q=this._from,G=this._loop,X=this._to,K;if(this._active=q!==X&&(G||Q<J),!this._active){this._target[Z]=X,this._notify(!0);return}if(Q<0){this._target[Z]=q;return}K=Q/J%2,K=G&&K>1?2-K:K,K=this._easing(Math.min(1,Math.max(0,K))),this._target[Z]=this._fn(q,X,K)}wait(){let $=this._promises||(this._promises=[]);return new Promise((Q,J)=>{$.push({res:Q,rej:J})})}_notify($){let Q=$?"res":"rej",J=this._promises||[];for(let Z=0;Z<J.length;Z++)J[Z][Q]()}}class r8{constructor($,Q){this._chart=$,this._properties=new Map,this.configure(Q)}configure($){if(!p($))return;let Q=Object.keys(q0.animation),J=this._properties;Object.getOwnPropertyNames($).forEach((Z)=>{let q=$[Z];if(!p(q))return;let G={};for(let X of Q)G[X]=q[X];(J0(q.properties)&&q.properties||[Z]).forEach((X)=>{if(X===Z||!J.has(X))J.set(X,G)})})}_animateOptions($,Q){let J=Q.options,Z=UK($,J);if(!Z)return[];let q=this._createAnimations(Z,J);if(J.$shared)YK($.options.$animations,J).then(()=>{$.options=J},()=>{});return q}_createAnimations($,Q){let J=this._properties,Z=[],q=$.$animations||($.$animations={}),G=Object.keys(Q),X=Date.now(),K;for(K=G.length-1;K>=0;--K){let Y=G[K];if(Y.charAt(0)==="$")continue;if(Y==="options"){Z.push(...this._animateOptions($,Q));continue}let U=Q[Y],N=q[Y],H=J.get(Y);if(N)if(H&&N.active()){N.update(H,U,X);continue}else N.cancel();if(!H||!H.duration){$[Y]=U;continue}q[Y]=N=new S7(H,$,Y,U),Z.push(N)}return Z}update($,Q){if(this._properties.size===0){Object.assign($,Q);return}let J=this._createAnimations($,Q);if(J.length)return J1.add(this._chart,J),!0}}function YK($,Q){let J=[],Z=Object.keys(Q);for(let q=0;q<Z.length;q++){let G=$[Z[q]];if(G&&G.active())J.push(G.wait())}return Promise.all(J)}function UK($,Q){if(!Q)return;let J=$.options;if(!J){$.options=Q;return}if(J.$shared)$.options=J=Object.assign({},J,{$shared:!1,$animations:{}});return J}function gJ($,Q){let J=$&&$.options||{},Z=J.reverse,q=J.min===void 0?Q:0,G=J.max===void 0?Q:0;return{start:Z?G:q,end:Z?q:G}}function NK($,Q,J){if(J===!1)return!1;let Z=gJ($,J),q=gJ(Q,J);return{top:q.end,right:Z.end,bottom:q.start,left:Z.start}}function HK($){let Q,J,Z,q;if(p($))Q=$.top,J=$.right,Z=$.bottom,q=$.left;else Q=J=Z=q=$;return{top:Q,right:J,bottom:Z,left:q,disabled:$===!1}}function xZ($,Q){let J=[],Z=$._getSortedDatasetMetas(Q),q,G;for(q=0,G=Z.length;q<G;++q)J.push(Z[q].index);return J}function mJ($,Q,J,Z={}){let q=$.keys,G=Z.mode==="single",X,K,Y,U;if(Q===null)return;let N=!1;for(X=0,K=q.length;X<K;++X){if(Y=+q[X],Y===J){if(N=!0,Z.all)continue;break}if(U=$.values[Y],Y0(U)&&(G||Q===0||l0(Q)===l0(U)))Q+=U}if(!N&&!Z.all)return 0;return Q}function MK($,Q){let{iScale:J,vScale:Z}=Q,q=J.axis==="x"?"x":"y",G=Z.axis==="x"?"x":"y",X=Object.keys($),K=Array(X.length),Y,U,N;for(Y=0,U=X.length;Y<U;++Y)N=X[Y],K[Y]={[q]:N,[G]:$[N]};return K}function M7($,Q){let J=$&&$.options.stacked;return J||J===void 0&&Q.stack!==void 0}function BK($,Q,J){return`${$.id}.${Q.id}.${J.stack||J.type}`}function WK($){let{min:Q,max:J,minDefined:Z,maxDefined:q}=$.getUserBounds();return{min:Z?Q:Number.NEGATIVE_INFINITY,max:q?J:Number.POSITIVE_INFINITY}}function jK($,Q,J){let Z=$[Q]||($[Q]={});return Z[J]||(Z[J]={})}function uJ($,Q,J,Z){for(let q of Q.getMatchingVisibleMetas(Z).reverse()){let G=$[q.index];if(J&&G>0||!J&&G<0)return q.index}return null}function pJ($,Q){let{chart:J,_cachedMeta:Z}=$,q=J._stacks||(J._stacks={}),{iScale:G,vScale:X,index:K}=Z,Y=G.axis,U=X.axis,N=BK(G,X,Z),H=Q.length,M;for(let B=0;B<H;++B){let j=Q[B],{[Y]:L,[U]:W}=j,V=j._stacks||(j._stacks={});M=V[U]=jK(q,N,L),M[K]=W,M._top=uJ(M,X,!0,Z.type),M._bottom=uJ(M,X,!1,Z.type);let _=M._visualValues||(M._visualValues={});_[K]=W}}function B7($,Q){let J=$.scales;return Object.keys(J).filter((Z)=>J[Z].axis===Q).shift()}function LK($,Q){return V1($,{active:!1,dataset:void 0,datasetIndex:Q,index:Q,mode:"default",type:"dataset"})}function FK($,Q,J){return V1($,{active:!1,dataIndex:Q,parsed:void 0,raw:void 0,element:J,index:Q,mode:"default",type:"data"})}function K9($,Q){let J=$.controller.index,Z=$.vScale&&$.vScale.axis;if(!Z)return;Q=Q||$._parsed;for(let q of Q){let G=q._stacks;if(!G||G[Z]===void 0||G[Z][J]===void 0)return;if(delete G[Z][J],G[Z]._visualValues!==void 0&&G[Z]._visualValues[J]!==void 0)delete G[Z]._visualValues[J]}}function _K($,Q){if(!$._cache.$bar){let J=$.getMatchingVisibleMetas(Q),Z=[];for(let q=0,G=J.length;q<G;q++)Z=Z.concat(J[q].controller.getAllParsedValues($));$._cache.$bar=l4(Z.sort((q,G)=>q-G))}return $._cache.$bar}function RK($){let Q=$.iScale,J=_K(Q,$.type),Z=Q._length,q,G,X,K,Y=()=>{if(X===32767||X===-32768)return;if(O5(K))Z=Math.min(Z,Math.abs(X-K)||Z);K=X};for(q=0,G=J.length;q<G;++q)X=Q.getPixelForValue(J[q]),Y();K=void 0;for(q=0,G=Q.ticks.length;q<G;++q)X=Q.getPixelForTick(q),Y();return Z}function wK($,Q,J,Z){let q=J.barThickness,G,X;if(u(q))G=Q.min*J.categoryPercentage,X=J.barPercentage;else G=q*Z,X=1;return{chunk:G/Z,ratio:X,start:Q.pixels[$]-G/2}}function EK($,Q,J,Z){let q=Q.pixels,G=q[$],X=$>0?q[$-1]:null,K=$<q.length-1?q[$+1]:null,Y=J.categoryPercentage;if(X===null)X=G-(K===null?Q.end-Q.start:K-G);if(K===null)K=G+G-X;let U=G-(G-Math.min(X,K))/2*Y;return{chunk:Math.abs(K-X)/2*Y/Z,ratio:J.barPercentage,start:U}}function DK($,Q,J,Z){let q=J.parse($[0],Z),G=J.parse($[1],Z),X=Math.min(q,G),K=Math.max(q,G),Y=X,U=K;if(Math.abs(X)>Math.abs(K))Y=K,U=X;Q[J.axis]=U,Q._custom={barStart:Y,barEnd:U,start:q,end:G,min:X,max:K}}function gZ($,Q,J,Z){if(J0($))DK($,Q,J,Z);else Q[J.axis]=J.parse($,Z);return Q}function cJ($,Q,J,Z){let{iScale:q,vScale:G}=$,X=q.getLabels(),K=q===G,Y=[],U,N,H,M;for(U=J,N=J+Z;U<N;++U)M=Q[U],H={},H[q.axis]=K||q.parse(X[U],U),Y.push(gZ(M,H,G,U));return Y}function j7($){return $&&$.barStart!==void 0&&$.barEnd!==void 0}function PK($,Q,J){if($!==0)return l0($);return(Q.isHorizontal()?1:-1)*(Q.min>=J?1:-1)}function TK($){let Q,J,Z,q,G;if($.horizontal)Q=$.base>$.x,J="left",Z="right";else Q=$.base<$.y,J="bottom",Z="top";if(Q)q="end",G="start";else q="start",G="end";return{start:J,end:Z,reverse:Q,top:q,bottom:G}}function CK($,Q,J,Z){let q=Q.borderSkipped,G={};if(!q){$.borderSkipped=G;return}if(q===!0){$.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:X,end:K,reverse:Y,top:U,bottom:N}=TK($);if(q==="middle"&&J)if($.enableBorderRadius=!0,(J._top||0)===Z)q=U;else if((J._bottom||0)===Z)q=N;else G[lJ(N,X,K,Y)]=!0,q=U;G[lJ(q,X,K,Y)]=!0,$.borderSkipped=G}function lJ($,Q,J,Z){if(Z)$=OK($,Q,J),$=rJ($,J,Q);else $=rJ($,Q,J);return $}function OK($,Q,J){return $===Q?J:$===J?Q:$}function rJ($,Q,J){return $==="start"?Q:$==="end"?J:$}function zK($,{inflateAmount:Q},J){$.inflateAmount=Q==="auto"?J===1?0.33:0:Q}function IK($,Q,J){let Z=1,q=1,G=0,X=0;if(Q<Z0){let K=$,Y=K+Q,U=Math.cos(K),N=Math.sin(K),H=Math.cos(Y),M=Math.sin(Y),B=(D,E,w)=>I5(D,K,Y,!0)?1:Math.max(E,E*J,w,w*J),j=(D,E,w)=>I5(D,K,Y,!0)?-1:Math.min(E,E*J,w,w*J),L=B(0,U,H),W=B(B0,N,M),V=j(o,U,H),_=j(o+B0,N,M);Z=(L-V)/2,q=(W-_)/2,G=-(L+V)/2,X=-(W+_)/2}return{ratioX:Z,ratioY:q,offsetX:G,offsetY:X}}function J5(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class x7{static override($){Object.assign(x7.prototype,$)}options;constructor($){this.options=$||{}}init(){}formats(){return J5()}parse(){return J5()}format(){return J5()}add(){return J5()}diff(){return J5()}startOf(){return J5()}endOf(){return J5()}}function AK($,Q,J,Z){let{controller:q,data:G,_sorted:X}=$,K=q._cachedMeta.iScale,Y=$.dataset?$.dataset.options?$.dataset.options.spanGaps:null:null;if(K&&Q===K.axis&&Q!=="r"&&X&&G.length){let U=K._reversePixels?WJ:a0;if(!Z){let N=U(G,Q,J);if(Y){let{vScale:H}=q._cachedMeta,{_parsed:M}=$,B=M.slice(0,N.lo+1).reverse().findIndex((L)=>!u(L[H.axis]));N.lo-=Math.max(0,B);let j=M.slice(N.hi).findIndex((L)=>!u(L[H.axis]));N.hi+=Math.max(0,j)}return N}else if(q._sharedOptions){let N=G[0],H=typeof N.getRange==="function"&&N.getRange(Q);if(H){let M=U(G,Q,J-H),B=U(G,Q,J+H);return{lo:M.lo,hi:B.hi}}}}return{lo:0,hi:G.length-1}}function R9($,Q,J,Z,q){let G=$.getSortedVisibleDatasetMetas(),X=J[Q];for(let K=0,Y=G.length;K<Y;++K){let{index:U,data:N}=G[K],{lo:H,hi:M}=AK(G[K],Q,X,q);for(let B=H;B<=M;++B){let j=N[B];if(!j.skip)Z(j,U,B)}}}function SK($){let Q=$.indexOf("x")!==-1,J=$.indexOf("y")!==-1;return function(Z,q){let G=Q?Math.abs(Z.x-q.x):0,X=J?Math.abs(Z.y-q.y):0;return Math.sqrt(Math.pow(G,2)+Math.pow(X,2))}}function L7($,Q,J,Z,q){let G=[];if(!q&&!$.isPointInArea(Q))return G;return R9($,J,Q,function(K,Y,U){if(!q&&!t0(K,$.chartArea,0))return;if(K.inRange(Q.x,Q.y,Z))G.push({element:K,datasetIndex:Y,index:U})},!0),G}function kK($,Q,J,Z){let q=[];function G(X,K,Y){let{startAngle:U,endAngle:N}=X.getProps(["startAngle","endAngle"],Z),{angle:H}=d4(X,{x:Q.x,y:Q.y});if(I5(H,U,N))q.push({element:X,datasetIndex:K,index:Y})}return R9($,J,Q,G),q}function bK($,Q,J,Z,q,G){let X=[],K=SK(J),Y=Number.POSITIVE_INFINITY;function U(N,H,M){let B=N.inRange(Q.x,Q.y,q);if(Z&&!B)return;let j=N.getCenterPoint(q);if(!(!!G||$.isPointInArea(j))&&!B)return;let W=K(Q,j);if(W<Y)X=[{element:N,datasetIndex:H,index:M}],Y=W;else if(W===Y)X.push({element:N,datasetIndex:H,index:M})}return R9($,J,Q,U),X}function F7($,Q,J,Z,q,G){if(!G&&!$.isPointInArea(Q))return[];return J==="r"&&!Z?kK($,Q,J,q):bK($,Q,J,Z,q,G)}function sJ($,Q,J,Z,q){let G=[],X=J==="x"?"inXRange":"inYRange",K=!1;if(R9($,J,Q,(Y,U,N)=>{if(Y[X]&&Y[X](Q[J],q))G.push({element:Y,datasetIndex:U,index:N}),K=K||Y.inRange(Q.x,Q.y,q)}),Z&&!K)return[];return G}function Y9($,Q){return $.filter((J)=>J.pos===Q)}function oJ($,Q){return $.filter((J)=>dZ.indexOf(J.pos)===-1&&J.box.axis===Q)}function U9($,Q){return $.sort((J,Z)=>{let q=Q?Z:J,G=Q?J:Z;return q.weight===G.weight?q.index-G.index:q.weight-G.weight})}function yK($){let Q=[],J,Z,q,G,X,K;for(J=0,Z=($||[]).length;J<Z;++J)q=$[J],{position:G,options:{stack:X,stackWeight:K=1}}=q,Q.push({index:J,box:q,pos:G,horizontal:q.isHorizontal(),weight:q.weight,stack:X&&G+X,stackWeight:K});return Q}function vK($){let Q={};for(let J of $){let{stack:Z,pos:q,stackWeight:G}=J;if(!Z||!dZ.includes(q))continue;let X=Q[Z]||(Q[Z]={count:0,placed:0,weight:0,size:0});X.count++,X.weight+=G}return Q}function hK($,Q){let J=vK($),{vBoxMaxWidth:Z,hBoxMaxHeight:q}=Q,G,X,K;for(G=0,X=$.length;G<X;++G){K=$[G];let{fullSize:Y}=K.box,U=J[K.stack],N=U&&K.stackWeight/U.weight;if(K.horizontal)K.width=N?N*Z:Y&&Q.availableWidth,K.height=q;else K.width=Z,K.height=N?N*q:Y&&Q.availableHeight}return J}function fK($){let Q=yK($),J=U9(Q.filter((U)=>U.box.fullSize),!0),Z=U9(Y9(Q,"left"),!0),q=U9(Y9(Q,"right")),G=U9(Y9(Q,"top"),!0),X=U9(Y9(Q,"bottom")),K=oJ(Q,"x"),Y=oJ(Q,"y");return{fullSize:J,leftAndTop:Z.concat(G),rightAndBottom:q.concat(Y).concat(X).concat(K),chartArea:Y9(Q,"chartArea"),vertical:Z.concat(q).concat(Y),horizontal:G.concat(X).concat(K)}}function nJ($,Q,J,Z){return Math.max($[J],Q[J])+Math.max($[Z],Q[Z])}function cZ($,Q){$.top=Math.max($.top,Q.top),$.left=Math.max($.left,Q.left),$.bottom=Math.max($.bottom,Q.bottom),$.right=Math.max($.right,Q.right)}function xK($,Q,J,Z){let{pos:q,box:G}=J,X=$.maxPadding;if(!p(q)){if(J.size)$[q]-=J.size;let H=Z[J.stack]||{size:0,count:1};H.size=Math.max(H.size,J.horizontal?G.height:G.width),J.size=H.size/H.count,$[q]+=J.size}if(G.getPadding)cZ(X,G.getPadding());let K=Math.max(0,Q.outerWidth-nJ(X,$,"left","right")),Y=Math.max(0,Q.outerHeight-nJ(X,$,"top","bottom")),U=K!==$.w,N=Y!==$.h;return $.w=K,$.h=Y,J.horizontal?{same:U,other:N}:{same:N,other:U}}function gK($){let Q=$.maxPadding;function J(Z){let q=Math.max(Q[Z]-$[Z],0);return $[Z]+=q,q}$.y+=J("top"),$.x+=J("left"),J("right"),J("bottom")}function mK($,Q){let J=Q.maxPadding;function Z(q){let G={left:0,top:0,right:0,bottom:0};return q.forEach((X)=>{G[X]=Math.max(Q[X],J[X])}),G}return $?Z(["left","right"]):Z(["top","bottom"])}function M9($,Q,J,Z){let q=[],G,X,K,Y,U,N;for(G=0,X=$.length,U=0;G<X;++G){K=$[G],Y=K.box,Y.update(K.width||Q.w,K.height||Q.h,mK(K.horizontal,Q));let{same:H,other:M}=xK(Q,J,K,Z);if(U|=H&&q.length,N=N||M,!Y.fullSize)q.push(K)}return U&&M9(q,Q,J,Z)||N}function h8($,Q,J,Z,q){$.top=J,$.left=Q,$.right=Q+Z,$.bottom=J+q,$.width=Z,$.height=q}function iJ($,Q,J,Z){let q=J.padding,{x:G,y:X}=Q;for(let K of $){let Y=K.box,U=Z[K.stack]||{count:1,placed:0,weight:1},N=K.stackWeight/U.weight||1;if(K.horizontal){let H=Q.w*N,M=U.size||Y.height;if(O5(U.start))X=U.start;if(Y.fullSize)h8(Y,q.left,X,J.outerWidth-q.right-q.left,M);else h8(Y,Q.left+U.placed,X,H,M);U.start=X,U.placed+=H,X=Y.bottom}else{let H=Q.h*N,M=U.size||Y.width;if(O5(U.start))G=U.start;if(Y.fullSize)h8(Y,G,q.top,M,J.outerHeight-q.bottom-q.top);else h8(Y,G,Q.top+U.placed,M,H);U.start=G,U.placed+=H,G=Y.right}}Q.x=G,Q.y=X}class o8{acquireContext($,Q){}releaseContext($){return!1}addEventListener($,Q,J){}removeEventListener($,Q,J){}getDevicePixelRatio(){return 1}getMaximumSize($,Q,J,Z){return Q=Math.max(0,Q||$.width),J=J||$.height,{width:Q,height:Math.max(0,Z?Math.floor(Q/Z):J)}}isAttached($){return!0}updateConfig($){}}function pK($,Q){let J=$.style,Z=$.getAttribute("height"),q=$.getAttribute("width");if($[p8]={initial:{height:Z,width:q,style:{display:J.display,height:J.height,width:J.width}}},J.display=J.display||"block",J.boxSizing=J.boxSizing||"border-box",aJ(q)){let G=X7($,"width");if(G!==void 0)$.width=G}if(aJ(Z))if($.style.height==="")$.height=$.width/(Q||2);else{let G=X7($,"height");if(G!==void 0)$.height=G}return $}function dK($,Q,J){if($)$.addEventListener(Q,J,lZ)}function cK($,Q,J){if($&&$.canvas)$.canvas.removeEventListener(Q,J,lZ)}function lK($,Q){let J=uK[$.type]||$.type,{x:Z,y:q}=y1($,Q);return{type:J,chart:Q,native:$,x:Z!==void 0?Z:null,y:q!==void 0?q:null}}function c8($,Q){for(let J of $)if(J===Q||J.contains(Q))return!0}function rK($,Q,J){let Z=$.canvas,q=new MutationObserver((G)=>{let X=!1;for(let K of G)X=X||c8(K.addedNodes,Z),X=X&&!c8(K.removedNodes,Z);if(X)J()});return q.observe(document,{childList:!0,subtree:!0}),q}function sK($,Q,J){let Z=$.canvas,q=new MutationObserver((G)=>{let X=!1;for(let K of G)X=X||c8(K.removedNodes,Z),X=X&&!c8(K.addedNodes,Z);if(X)J()});return q.observe(document,{childList:!0,subtree:!0}),q}function rZ(){let $=window.devicePixelRatio;if($===tJ)return;tJ=$,j9.forEach((Q,J)=>{if(J.currentDevicePixelRatio!==$)Q()})}function oK($,Q){if(!j9.size)window.addEventListener("resize",rZ);j9.set($,Q)}function nK($){if(j9.delete($),!j9.size)window.removeEventListener("resize",rZ)}function iK($,Q,J){let Z=$.canvas,q=Z&&y8(Z);if(!q)return;let G=s4((K,Y)=>{let U=q.clientWidth;if(J(K,Y),U<q.clientWidth)J()},window),X=new ResizeObserver((K)=>{let Y=K[0],U=Y.contentRect.width,N=Y.contentRect.height;if(U===0&&N===0)return;G(U,N)});return X.observe(q),oK($,G),X}function V7($,Q,J){if(J)J.disconnect();if(Q==="resize")nK($)}function aK($,Q,J){let Z=$.canvas,q=s4((G)=>{if($.ctx!==null)J(lK(G,$))},$);return dK(Z,Q,q),q}function sZ($){if(!b8()||typeof OffscreenCanvas<"u"&&$ instanceof OffscreenCanvas)return g7;return m7}function tK($,Q){let J=$.options.ticks,Z=eK($),q=Math.min(J.maxTicksLimit||Z,Z),G=J.major.enabled?Q3(Q):[],X=G.length,K=G[0],Y=G[X-1],U=[];if(X>q)return J3(Q,U,G,X/q),U;let N=$3(G,Q,q);if(X>0){let H,M,B=X>1?Math.round((Y-K)/(X-1)):null;f8(Q,U,N,u(B)?0:K-B,K);for(H=0,M=X-1;H<M;H++)f8(Q,U,N,G[H],G[H+1]);return f8(Q,U,N,Y,u(B)?Q.length:Y+B),U}return f8(Q,U,N),U}function eK($){let Q=$.options.offset,J=$._tickSize(),Z=$._length/J+(Q?0:1),q=$._maxLength/J;return Math.floor(Math.min(Z,q))}function $3($,Q,J){let Z=Z3($),q=Q.length/J;if(!Z)return Math.max(q,1);let G=HJ(Z);for(let X=0,K=G.length-1;X<K;X++){let Y=G[X];if(Y>q)return Y}return Math.max(q,1)}function Q3($){let Q=[],J,Z;for(J=0,Z=$.length;J<Z;J++)if($[J].major)Q.push(J);return Q}function J3($,Q,J,Z){let q=0,G=J[0],X;Z=Math.ceil(Z);for(X=0;X<$.length;X++)if(X===G)Q.push($[X]),q++,G=J[q*Z]}function f8($,Q,J,Z,q){let G=h(Z,0),X=Math.min(h(q,$.length),$.length),K=0,Y,U,N;if(J=Math.ceil(J),q)Y=q-Z,J=Y/Math.floor(Y/J);N=G;while(N<0)K++,N=Math.round(G+K*J);for(U=Math.max(G,0);U<X;U++)if(U===N)Q.push($[U]),K++,N=Math.round(G+K*J)}function Z3($){let Q=$.length,J,Z;if(Q<2)return!1;for(Z=$[0],J=1;J<Q;++J)if($[J]-$[J-1]!==Z)return!1;return Z}function QZ($,Q){let J=[],Z=$.length/Q,q=$.length,G=0;for(;G<q;G+=Z)J.push($[Math.floor(G)]);return J}function G3($,Q,J){let Z=$.ticks.length,q=Math.min(Q,Z-1),G=$._startPixel,X=$._endPixel,K=0.000001,Y=$.getPixelForTick(q),U;if(J){if(Z===1)U=Math.max(Y-G,X-Y);else if(Q===0)U=($.getPixelForTick(1)-Y)/2;else U=(Y-$.getPixelForTick(q-1))/2;if(Y+=q<Q?U:-U,Y<G-0.000001||Y>X+0.000001)return}return Y}function X3($,Q){i($,(J)=>{let Z=J.gc,q=Z.length/2,G;if(q>Q){for(G=0;G<q;++G)delete J.data[Z[G]];Z.splice(0,q)}})}function N9($){return $.drawTicks?$.tickLength:0}function JZ($,Q){if(!$.display)return 0;let J=j0($.font,Q),Z=w0($.padding);return(J0($.text)?$.text.length:1)*J.lineHeight+Z.height}function K3($,Q){return V1($,{scale:Q,type:"scale"})}function Y3($,Q,J){return V1($,{tick:J,index:Q,type:"tick"})}function U3($,Q,J){let Z=z8($);if(J&&Q!=="right"||!J&&Q==="right")Z=q3(Z);return Z}function N3($,Q,J,Z){let{top:q,left:G,bottom:X,right:K,chart:Y}=$,{chartArea:U,scales:N}=Y,H=0,M,B,j,L=X-q,W=K-G;if($.isHorizontal()){if(B=R0(Z,G,K),p(J)){let V=Object.keys(J)[0],_=J[V];j=N[V].getPixelForValue(_)+L-Q}else if(J==="center")j=(U.bottom+U.top)/2+L-Q;else j=eJ($,J,Q);M=K-G}else{if(p(J)){let V=Object.keys(J)[0],_=J[V];B=N[V].getPixelForValue(_)-W+Q}else if(J==="center")B=(U.left+U.right)/2-W+Q;else B=eJ($,J,Q);j=R0(Z,X,q),H=J==="left"?-B0:B0}return{titleX:B,titleY:j,maxWidth:M,rotation:H}}class B9{constructor($,Q,J){this.type=$,this.scope=Q,this.override=J,this.items=Object.create(null)}isForType($){return Object.prototype.isPrototypeOf.call(this.type.prototype,$.prototype)}register($){let Q=Object.getPrototypeOf($),J;if(B3(Q))J=this.register(Q);let Z=this.items,q=$.id,G=this.scope+"."+q;if(!q)throw Error("class does not have id: "+$);if(q in Z)return G;if(Z[q]=$,H3($,G,J),this.override)q0.override($.id,$.overrides);return G}get($){return this.items[$]}unregister($){let Q=this.items,J=$.id,Z=this.scope;if(J in Q)delete Q[J];if(Z&&J in q0[Z]){if(delete q0[Z][J],this.override)delete A1[J]}}}function H3($,Q,J){let Z=P5(Object.create(null),[J?q0.get(J):{},q0.get(Q),$.defaults]);if(q0.set(Q,Z),$.defaultRoutes)M3(Q,$.defaultRoutes);if($.descriptors)q0.describe(Q,$.descriptors)}function M3($,Q){Object.keys(Q).forEach((J)=>{let Z=J.split("."),q=Z.pop(),G=[$].concat(Z).join("."),X=Q[J].split("."),K=X.pop(),Y=X.join(".");q0.route(G,q,Y,K)})}function B3($){return"id"in $&&"defaults"in $}class oZ{constructor(){this.controllers=new B9(Z1,"datasets",!0),this.elements=new B9(s0,"elements"),this.plugins=new B9(Object,"plugins"),this.scales=new B9(h1,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...$){this._each("register",$)}remove(...$){this._each("unregister",$)}addControllers(...$){this._each("register",$,this.controllers)}addElements(...$){this._each("register",$,this.elements)}addPlugins(...$){this._each("register",$,this.plugins)}addScales(...$){this._each("register",$,this.scales)}getController($){return this._get($,this.controllers,"controller")}getElement($){return this._get($,this.elements,"element")}getPlugin($){return this._get($,this.plugins,"plugin")}getScale($){return this._get($,this.scales,"scale")}removeControllers(...$){this._each("unregister",$,this.controllers)}removeElements(...$){this._each("unregister",$,this.elements)}removePlugins(...$){this._each("unregister",$,this.plugins)}removeScales(...$){this._each("unregister",$,this.scales)}_each($,Q,J){[...Q].forEach((Z)=>{let q=J||this._getRegistryForType(Z);if(J||q.isForType(Z)||q===this.plugins&&Z.id)this._exec($,q,Z);else i(Z,(G)=>{let X=J||this._getRegistryForType(G);this._exec($,X,G)})})}_exec($,Q,J){let Z=T8($);$0(J["before"+Z],[],J),Q[$](J),$0(J["after"+Z],[],J)}_getRegistryForType($){for(let Q=0;Q<this._typedRegistries.length;Q++){let J=this._typedRegistries[Q];if(J.isForType($))return J}return this.plugins}_get($,Q,J){let Z=Q.get($);if(Z===void 0)throw Error('"'+$+'" is not a registered '+J+".");return Z}}class nZ{constructor(){this._init=void 0}notify($,Q,J,Z){if(Q==="beforeInit")this._init=this._createDescriptors($,!0),this._notify(this._init,$,"install");if(this._init===void 0)return;let q=Z?this._descriptors($).filter(Z):this._descriptors($),G=this._notify(q,$,Q,J);if(Q==="afterDestroy")this._notify(q,$,"stop"),this._notify(this._init,$,"uninstall"),this._init=void 0;return G}_notify($,Q,J,Z){Z=Z||{};for(let q of $){let G=q.plugin,X=G[J],K=[Q,Z,q.options];if($0(X,K,G)===!1&&Z.cancelable)return!1}return!0}invalidate(){if(!u(this._cache))this._oldCache=this._cache,this._cache=void 0}_descriptors($){if(this._cache)return this._cache;let Q=this._cache=this._createDescriptors($);return this._notifyStateChanges($),Q}_createDescriptors($,Q){let J=$&&$.config,Z=h(J.options&&J.options.plugins,{}),q=W3(J);return Z===!1&&!Q?[]:L3($,q,Z,Q)}_notifyStateChanges($){let Q=this._oldCache||[],J=this._cache,Z=(q,G)=>q.filter((X)=>!G.some((K)=>X.plugin.id===K.plugin.id));this._notify(Z(Q,J),$,"stop"),this._notify(Z(J,Q),$,"start")}}function W3($){let Q={},J=[],Z=Object.keys(r0.plugins.items);for(let G=0;G<Z.length;G++)J.push(r0.getPlugin(Z[G]));let q=$.plugins||[];for(let G=0;G<q.length;G++){let X=q[G];if(J.indexOf(X)===-1)J.push(X),Q[X.id]=!0}return{plugins:J,localIds:Q}}function j3($,Q){if(!Q&&$===!1)return null;if($===!0)return{};return $}function L3($,{plugins:Q,localIds:J},Z,q){let G=[],X=$.getContext();for(let K of Q){let Y=K.id,U=j3(Z[Y],q);if(U===null)continue;G.push({plugin:K,options:F3($.config,{plugin:K,local:J[Y]},U,X)})}return G}function F3($,{plugin:Q,local:J},Z,q){let G=$.pluginScopeKeys(Q),X=$.getOptionScopes(Z,G);if(J&&Q.defaults)X.push(Q.defaults);return $.createResolver(X,q,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function D7($,Q){let J=q0.datasets[$]||{};return((Q.datasets||{})[$]||{}).indexAxis||Q.indexAxis||J.indexAxis||"x"}function V3($,Q){let J=$;if($==="_index_")J=Q;else if($==="_value_")J=Q==="x"?"y":"x";return J}function _3($,Q){return $===Q?"_index_":"_value_"}function ZZ($){if($==="x"||$==="y"||$==="r")return $}function R3($){if($==="top"||$==="bottom")return"x";if($==="left"||$==="right")return"y"}function P7($,...Q){if(ZZ($))return $;for(let J of Q){let Z=J.axis||R3(J.position)||$.length>1&&ZZ($[0].toLowerCase());if(Z)return Z}throw Error(`Cannot determine type of '${$}' axis. Please provide 'axis' or 'position' option.`)}function qZ($,Q,J){if(J[Q+"AxisID"]===$)return{axis:Q}}function w3($,Q){if(Q.data&&Q.data.datasets){let J=Q.data.datasets.filter((Z)=>Z.xAxisID===$||Z.yAxisID===$);if(J.length)return qZ($,"x",J[0])||qZ($,"y",J[0])}return{}}function E3($,Q){let J=A1[$.type]||{scales:{}},Z=Q.scales||{},q=D7($.type,Q),G=Object.create(null);return Object.keys(Z).forEach((X)=>{let K=Z[X];if(!p(K))return console.error(`Invalid scale configuration for scale: ${X}`);if(K._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${X}`);let Y=P7(X,K,w3(X,$),q0.scales[K.type]),U=_3(Y,q),N=J.scales||{};G[X]=C5(Object.create(null),[{axis:Y},K,N[Y],N[U]])}),$.data.datasets.forEach((X)=>{let K=X.type||$.type,Y=X.indexAxis||D7(K,Q),N=(A1[K]||{}).scales||{};Object.keys(N).forEach((H)=>{let M=V3(H,Y),B=X[M+"AxisID"]||M;G[B]=G[B]||Object.create(null),C5(G[B],[{axis:M},Z[B],N[H]])})}),Object.keys(G).forEach((X)=>{let K=G[X];C5(K,[q0.scales[K.type],q0.scale])}),G}function iZ($){let Q=$.options||($.options={});Q.plugins=h(Q.plugins,{}),Q.scales=E3($,Q)}function aZ($){return $=$||{},$.datasets=$.datasets||[],$.labels=$.labels||[],$}function D3($){return $=$||{},$.data=aZ($.data),iZ($),$}function x8($,Q){let J=GZ.get($);if(!J)J=Q(),GZ.set($,J),tZ.add(J);return J}class eZ{constructor($){this._config=D3($),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type($){this._config.type=$}get data(){return this._config.data}set data($){this._config.data=aZ($)}get options(){return this._config.options}set options($){this._config.options=$}get plugins(){return this._config.plugins}update(){let $=this._config;this.clearCache(),iZ($)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys($){return x8($,()=>[[`datasets.${$}`,""]])}datasetAnimationScopeKeys($,Q){return x8(`${$}.transition.${Q}`,()=>[[`datasets.${$}.transitions.${Q}`,`transitions.${Q}`],[`datasets.${$}`,""]])}datasetElementScopeKeys($,Q){return x8(`${$}-${Q}`,()=>[[`datasets.${$}.elements.${Q}`,`datasets.${$}`,`elements.${Q}`,""]])}pluginScopeKeys($){let Q=$.id,J=this.type;return x8(`${J}-plugin-${Q}`,()=>[[`plugins.${Q}`,...$.additionalOptionScopes||[]]])}_cachedScopes($,Q){let J=this._scopeCache,Z=J.get($);if(!Z||Q)Z=new Map,J.set($,Z);return Z}getOptionScopes($,Q,J){let{options:Z,type:q}=this,G=this._cachedScopes($,J),X=G.get(Q);if(X)return X;let K=new Set;Q.forEach((U)=>{if($)K.add($),U.forEach((N)=>H9(K,$,N));U.forEach((N)=>H9(K,Z,N)),U.forEach((N)=>H9(K,A1[q]||{},N)),U.forEach((N)=>H9(K,q0,N)),U.forEach((N)=>H9(K,I8,N))});let Y=Array.from(K);if(Y.length===0)Y.push(Object.create(null));if(tZ.has(Q))G.set(Q,Y);return Y}chartOptionScopes(){let{options:$,type:Q}=this;return[$,A1[Q]||{},q0.datasets[Q]||{},{type:Q},q0,I8]}resolveNamedOptions($,Q,J,Z=[""]){let q={$shared:!0},{resolver:G,subPrefixes:X}=XZ(this._resolverCache,$,Z),K=G;if(T3(G,Q)){q.$shared=!1,J=j1(J)?J():J;let Y=this.createResolver($,J,X);K=e1(G,J,Y)}for(let Y of Q)q[Y]=K[Y];return q}createResolver($,Q,J=[""],Z){let{resolver:q}=XZ(this._resolverCache,$,J);return p(Q)?e1(q,Q,void 0,Z):q}}function XZ($,Q,J){let Z=$.get(Q);if(!Z)Z=new Map,$.set(Q,Z);let q=J.join(),G=Z.get(q);if(!G)G={resolver:k8(Q,J),subPrefixes:J.filter((K)=>!K.toLowerCase().includes("hover"))},Z.set(q,G);return G}function T3($,Q){let{isScriptable:J,isIndexable:Z}=Q7($);for(let q of Q){let G=J(q),X=Z(q),K=(X||G)&&$[q];if(G&&(j1(K)||P3(K))||X&&J0(K))return!0}return!1}function KZ($,Q){return $==="top"||$==="bottom"||O3.indexOf($)===-1&&Q==="x"}function YZ($,Q){return function(J,Z){return J[$]===Z[$]?J[Q]-Z[Q]:J[$]-Z[$]}}function UZ($){let Q=$.chart,J=Q.options.animation;Q.notifyPlugins("afterRender"),$0(J&&J.onComplete,[$],Q)}function z3($){let Q=$.chart,J=Q.options.animation;$0(J&&J.onProgress,[$],Q)}function $2($){if(b8()&&typeof $==="string")$=document.getElementById($);else if($&&$.length)$=$[0];if($&&$.canvas)$=$.canvas;return $}function I3($,Q,J){let Z=Object.keys($);for(let q of Z){let G=+q;if(G>=Q){let X=$[q];if(delete $[q],J>0||G>Q)$[G+J]=X}}}function A3($,Q,J,Z){if(!J||$.type==="mouseout")return null;if(Z)return Q;return $}function HZ(){return i(u7.instances,($)=>$._plugins.invalidate())}function S3($,Q,J){let{startAngle:Z,x:q,y:G,outerRadius:X,innerRadius:K,options:Y}=Q,{borderWidth:U,borderJoinStyle:N}=Y,H=Math.min(U/X,_0(Z-J));if($.beginPath(),$.arc(q,G,X-U/2,Z+H/2,J-H/2),K>0){let M=Math.min(U/K,_0(Z-J));$.arc(q,G,K+U/2,J-M/2,Z+M/2,!0)}else{let M=Math.min(U/2,X*_0(Z-J));if(N==="round")$.arc(q,G,M,J-o/2,Z+o/2,!0);else if(N==="bevel"){let B=2*M*M,j=-B*Math.cos(J+o/2)+q,L=-B*Math.sin(J+o/2)+G,W=B*Math.cos(Z+o/2)+q,V=B*Math.sin(Z+o/2)+G;$.lineTo(j,L),$.lineTo(W,V)}}$.closePath(),$.moveTo(0,0),$.rect(0,0,$.canvas.width,$.canvas.height),$.clip("evenodd")}function k3($,Q,J){let{startAngle:Z,pixelMargin:q,x:G,y:X,outerRadius:K,innerRadius:Y}=Q,U=q/K;if($.beginPath(),$.arc(G,X,K,Z-U,J+U),Y>q)U=q/Y,$.arc(G,X,Y,J+U,Z-U,!0);else $.arc(G,X,q,J+B0,Z-B0);$.closePath(),$.clip()}function b3($){return S8($,["outerStart","outerEnd","innerStart","innerEnd"])}function y3($,Q,J,Z){let q=b3($.options.borderRadius),G=(J-Q)/2,X=Math.min(G,Z*Q/2),K=(Y)=>{let U=(J-Math.min(G,Y))*Z/2;return L0(Y,0,Math.min(G,U))};return{outerStart:K(q.outerStart),outerEnd:K(q.outerEnd),innerStart:L0(q.innerStart,0,X),innerEnd:L0(q.innerEnd,0,X)}}function y5($,Q,J,Z){return{x:J+$*Math.cos(Q),y:Z+$*Math.sin(Q)}}function l8($,Q,J,Z,q,G){let{x:X,y:K,startAngle:Y,pixelMargin:U,innerRadius:N}=Q,H=Math.max(Q.outerRadius+Z+J-U,0),M=N>0?N+Z+J+U:0,B=0,j=q-Y;if(Z){let t=N>0?N-Z:0,U0=H>0?H-Z:0,P0=(t+U0)/2,A0=P0!==0?j*P0/(P0+Z):j;B=(j-A0)/2}let L=Math.max(0.001,j*H-J/o)/H,W=(j-L)/2,V=Y+W+B,_=q-W-B,{outerStart:D,outerEnd:E,innerStart:w,innerEnd:P}=y3(Q,M,H,_-V),T=H-D,A=H-E,z=V+D/T,g=_-E/A,x=M+w,X0=M+P,D0=V+w/x,e=_-P/X0;if($.beginPath(),G){let t=(z+g)/2;if($.arc(X,K,H,z,t),$.arc(X,K,H,t,g),E>0){let W0=y5(A,g,X,K);$.arc(W0.x,W0.y,E,g,_+B0)}let U0=y5(X0,_,X,K);if($.lineTo(U0.x,U0.y),P>0){let W0=y5(X0,e,X,K);$.arc(W0.x,W0.y,P,_+B0,e+Math.PI)}let P0=(_-P/M+(V+w/M))/2;if($.arc(X,K,M,_-P/M,P0,!0),$.arc(X,K,M,P0,V+w/M,!0),w>0){let W0=y5(x,D0,X,K);$.arc(W0.x,W0.y,w,D0+Math.PI,V-B0)}let A0=y5(T,V,X,K);if($.lineTo(A0.x,A0.y),D>0){let W0=y5(T,z,X,K);$.arc(W0.x,W0.y,D,V-B0,z)}}else{$.moveTo(X,K);let t=Math.cos(z)*H+X,U0=Math.sin(z)*H+K;$.lineTo(t,U0);let P0=Math.cos(g)*H+X,A0=Math.sin(g)*H+K;$.lineTo(P0,A0)}$.closePath()}function v3($,Q,J,Z,q){let{fullCircles:G,startAngle:X,circumference:K}=Q,Y=Q.endAngle;if(G){l8($,Q,J,Z,Y,q);for(let U=0;U<G;++U)$.fill();if(!isNaN(K))Y=X+(K%Z0||Z0)}return l8($,Q,J,Z,Y,q),$.fill(),Y}function h3($,Q,J,Z,q){let{fullCircles:G,startAngle:X,circumference:K,options:Y}=Q,{borderWidth:U,borderJoinStyle:N,borderDash:H,borderDashOffset:M,borderRadius:B}=Y,j=Y.borderAlign==="inner";if(!U)return;if($.setLineDash(H||[]),$.lineDashOffset=M,j)$.lineWidth=U*2,$.lineJoin=N||"round";else $.lineWidth=U,$.lineJoin=N||"bevel";let L=Q.endAngle;if(G){l8($,Q,J,Z,L,q);for(let W=0;W<G;++W)$.stroke();if(!isNaN(K))L=X+(K%Z0||Z0)}if(j)k3($,Q,L);if(Y.selfJoin&&L-X>=o&&B===0&&N!=="miter")S3($,Q,L);if(!G)l8($,Q,J,Z,L,q),$.stroke()}function Q2($,Q,J=Q){$.lineCap=h(J.borderCapStyle,Q.borderCapStyle),$.setLineDash(h(J.borderDash,Q.borderDash)),$.lineDashOffset=h(J.borderDashOffset,Q.borderDashOffset),$.lineJoin=h(J.borderJoinStyle,Q.borderJoinStyle),$.lineWidth=h(J.borderWidth,Q.borderWidth),$.strokeStyle=h(J.borderColor,Q.borderColor)}function f3($,Q,J){$.lineTo(J.x,J.y)}function x3($){if($.stepped)return DJ;if($.tension||$.cubicInterpolationMode==="monotone")return PJ;return f3}function J2($,Q,J={}){let Z=$.length,{start:q=0,end:G=Z-1}=J,{start:X,end:K}=Q,Y=Math.max(q,X),U=Math.min(G,K),N=q<X&&G<X||q>K&&G>K;return{count:Z,start:Y,loop:Q.loop,ilen:U<Y&&!N?Z+U-Y:U-Y}}function g3($,Q,J,Z){let{points:q,options:G}=Q,{count:X,start:K,loop:Y,ilen:U}=J2(q,J,Z),N=x3(G),{move:H=!0,reverse:M}=Z||{},B,j,L;for(B=0;B<=U;++B){if(j=q[(K+(M?U-B:B))%X],j.skip)continue;else if(H)$.moveTo(j.x,j.y),H=!1;else N($,L,j,M,G.stepped);L=j}if(Y)j=q[(K+(M?U:0))%X],N($,L,j,M,G.stepped);return!!Y}function m3($,Q,J,Z){let q=Q.points,{count:G,start:X,ilen:K}=J2(q,J,Z),{move:Y=!0,reverse:U}=Z||{},N=0,H=0,M,B,j,L,W,V,_=(E)=>(X+(U?K-E:E))%G,D=()=>{if(L!==W)$.lineTo(N,W),$.lineTo(N,L),$.lineTo(N,V)};if(Y)B=q[_(0)],$.moveTo(B.x,B.y);for(M=0;M<=K;++M){if(B=q[_(M)],B.skip)continue;let{x:E,y:w}=B,P=E|0;if(P===j){if(w<L)L=w;else if(w>W)W=w;N=(H*N+E)/++H}else D(),$.lineTo(E,w),j=P,H=0,L=W=w;V=w}D()}function T7($){let Q=$.options,J=Q.borderDash&&Q.borderDash.length;return!$._decimated&&!$._loop&&!Q.tension&&Q.cubicInterpolationMode!=="monotone"&&!Q.stepped&&!J?m3:g3}function u3($){if($.stepped)return bJ;if($.tension||$.cubicInterpolationMode==="monotone")return yJ;return z1}function p3($,Q,J,Z){let q=Q._path;if(!q){if(q=Q._path=new Path2D,Q.path(q,J,Z))q.closePath()}Q2($,Q.options),$.stroke(q)}function d3($,Q,J,Z){let{segments:q,options:G}=Q,X=T7(Q);for(let K of q){if(Q2($,G,K.style),$.beginPath(),X($,Q,K,{start:J,end:J+Z-1}))$.closePath();$.stroke()}}function l3($,Q,J,Z){if(c3&&!Q.options.segment)p3($,Q,J,Z);else d3($,Q,J,Z)}function MZ($,Q,J,Z){let q=$.options,{[J]:G}=$.getProps([J],Z);return Math.abs(Q-G)<q.radius+q.hitRadius}function Z2($,Q){let{x:J,y:Z,base:q,width:G,height:X}=$.getProps(["x","y","base","width","height"],Q),K,Y,U,N,H;if($.horizontal)H=X/2,K=Math.min(J,q),Y=Math.max(J,q),U=Z-H,N=Z+H;else H=G/2,K=J-H,Y=J+H,U=Math.min(Z,q),N=Math.max(Z,q);return{left:K,top:U,right:Y,bottom:N}}function v1($,Q,J,Z){return $?0:L0(Q,J,Z)}function r3($,Q,J){let Z=$.options.borderWidth,q=$.borderSkipped,G=$7(Z);return{t:v1(q.top,G.top,0,J),r:v1(q.right,G.right,0,Q),b:v1(q.bottom,G.bottom,0,J),l:v1(q.left,G.left,0,Q)}}function s3($,Q,J){let{enableBorderRadius:Z}=$.getProps(["enableBorderRadius"]),q=$.options.borderRadius,G=b1(q),X=Math.min(Q,J),K=$.borderSkipped,Y=Z||p(q);return{topLeft:v1(!Y||K.top||K.left,G.topLeft,0,X),topRight:v1(!Y||K.top||K.right,G.topRight,0,X),bottomLeft:v1(!Y||K.bottom||K.left,G.bottomLeft,0,X),bottomRight:v1(!Y||K.bottom||K.right,G.bottomRight,0,X)}}function o3($){let Q=Z2($),J=Q.right-Q.left,Z=Q.bottom-Q.top,q=r3($,J/2,Z/2),G=s3($,J/2,Z/2);return{outer:{x:Q.left,y:Q.top,w:J,h:Z,radius:G},inner:{x:Q.left+q.l,y:Q.top+q.t,w:J-q.l-q.r,h:Z-q.t-q.b,radius:{topLeft:Math.max(0,G.topLeft-Math.max(q.t,q.l)),topRight:Math.max(0,G.topRight-Math.max(q.t,q.r)),bottomLeft:Math.max(0,G.bottomLeft-Math.max(q.b,q.l)),bottomRight:Math.max(0,G.bottomRight-Math.max(q.b,q.r))}}}}function _7($,Q,J,Z){let q=Q===null,G=J===null,K=$&&!(q&&G)&&Z2($,Z);return K&&(q||$1(Q,K.left,K.right))&&(G||$1(J,K.top,K.bottom))}function n3($){return $.topLeft||$.topRight||$.bottomLeft||$.bottomRight}function i3($,Q){$.rect(Q.x,Q.y,Q.w,Q.h)}function R7($,Q,J={}){let Z=$.x!==J.x?-Q:0,q=$.y!==J.y?-Q:0,G=($.x+$.w!==J.x+J.w?Q:0)-Z,X=($.y+$.h!==J.y+J.h?Q:0)-q;return{x:$.x+Z,y:$.y+q,w:$.w+G,h:$.h+X,radius:$.radius}}function G2($){return C7[$%C7.length]}function X2($){return BZ[$%BZ.length]}function a3($,Q){return $.borderColor=G2(Q),$.backgroundColor=X2(Q),++Q}function t3($,Q){return $.backgroundColor=$.data.map(()=>G2(Q++)),Q}function e3($,Q){return $.backgroundColor=$.data.map(()=>X2(Q++)),Q}function $Y($){let Q=0;return(J,Z)=>{let q=$.getDatasetMeta(Z).controller;if(q instanceof _9)Q=t3(J,Q);else if(q instanceof s8)Q=e3(J,Q);else if(q)Q=a3(J,Q)}}function WZ($){let Q;for(Q in $)if($[Q].borderColor||$[Q].backgroundColor)return!0;return!1}function QY($){return $&&($.borderColor||$.backgroundColor)}function JY(){return q0.borderColor!=="rgba(0,0,0,0.1)"||q0.backgroundColor!=="rgba(0,0,0,0.1)"}function ZY($,Q,J,Z,q){let G=q.samples||Z;if(G>=J)return $.slice(Q,Q+J);let X=[],K=(J-2)/(G-2),Y=0,U=Q+J-1,N=Q,H,M,B,j,L;X[Y++]=$[N];for(H=0;H<G-2;H++){let W=0,V=0,_,D=Math.floor((H+1)*K)+1+Q,E=Math.min(Math.floor((H+2)*K)+1,J)+Q,w=E-D;for(_=D;_<E;_++)W+=$[_].x,V+=$[_].y;W/=w,V/=w;let P=Math.floor(H*K)+1+Q,T=Math.min(Math.floor((H+1)*K)+1,J)+Q,{x:A,y:z}=$[N];B=j=-1;for(_=P;_<T;_++)if(j=0.5*Math.abs((A-W)*($[_].y-z)-(A-$[_].x)*(V-z)),j>B)B=j,M=$[_],L=_;X[Y++]=M,N=L}return X[Y++]=$[U],X}function qY($,Q,J,Z){let q=0,G=0,X,K,Y,U,N,H,M,B,j,L,W=[],V=Q+J-1,_=$[Q].x,E=$[V].x-_;for(X=Q;X<Q+J;++X){K=$[X],Y=(K.x-_)/E*Z,U=K.y;let w=Y|0;if(w===N){if(U<j)j=U,H=X;else if(U>L)L=U,M=X;q=(G*q+K.x)/++G}else{let P=X-1;if(!u(H)&&!u(M)){let T=Math.min(H,M),A=Math.max(H,M);if(T!==B&&T!==P)W.push({...$[T],x:q});if(A!==B&&A!==P)W.push({...$[A],x:q})}if(X>0&&P!==B)W.push($[P]);W.push(K),N=w,G=0,j=L=U,H=M=B=X}}return W}function Y2($){if($._decimated){let Q=$._data;delete $._decimated,delete $._data,Object.defineProperty($,"data",{configurable:!0,enumerable:!0,writable:!0,value:Q})}}function jZ($){$.data.datasets.forEach((Q)=>{Y2(Q)})}function GY($,Q){let J=Q.length,Z=0,q,{iScale:G}=$,{min:X,max:K,minDefined:Y,maxDefined:U}=G.getUserBounds();if(Y)Z=L0(a0(Q,G.axis,X).lo,0,J-1);if(U)q=L0(a0(Q,G.axis,K).hi+1,Z,J)-Z;else q=J-Z;return{start:Z,count:q}}function XY($,Q,J){let{segments:Z,points:q}=$,G=Q.points,X=[];for(let K of Z){let{start:Y,end:U}=K;U=n8(Y,U,q);let N=O7(J,q[Y],q[U],K.loop);if(!Q.segments){X.push({source:K,target:N,start:q[Y],end:q[U]});continue}let H=N7(Q,N);for(let M of H){let B=O7(J,G[M.start],G[M.end],M.loop),j=U7(K,q,B);for(let L of j)X.push({source:L,target:M,start:{[J]:LZ(N,B,"start",Math.max)},end:{[J]:LZ(N,B,"end",Math.min)}})}}return X}function O7($,Q,J,Z){if(Z)return;let q=Q[$],G=J[$];if($==="angle")q=_0(q),G=_0(G);return{property:$,start:q,end:G}}function KY($,Q){let{x:J=null,y:Z=null}=$||{},q=Q.points,G=[];return Q.segments.forEach(({start:X,end:K})=>{K=n8(X,K,q);let Y=q[X],U=q[K];if(Z!==null)G.push({x:Y.x,y:Z}),G.push({x:U.x,y:Z});else if(J!==null)G.push({x:J,y:Y.y}),G.push({x:J,y:U.y})}),G}function n8($,Q,J){for(;Q>$;Q--){let Z=J[Q];if(!isNaN(Z.x)&&!isNaN(Z.y))break}return Q}function LZ($,Q,J,Z){if($&&Q)return Z($[J],Q[J]);return $?$[J]:Q?Q[J]:0}function N2($,Q){let J=[],Z=!1;if(J0($))Z=!0,J=$;else J=KY($,Q);return J.length?new v5({points:J,options:{tension:0},_loop:Z,_fullLoop:Z}):null}function FZ($){return $&&$.fill!==!1}function YY($,Q,J){let q=$[Q].fill,G=[Q],X;if(!J)return q;while(q!==!1&&G.indexOf(q)===-1){if(!Y0(q))return q;if(X=$[q],!X)return!1;if(X.visible)return q;G.push(q),q=X.fill}return!1}function UY($,Q,J){let Z=BY($);if(p(Z))return isNaN(Z.value)?!1:Z;let q=parseFloat(Z);if(Y0(q)&&Math.floor(q)===q)return NY(Z[0],Q,q,J);return["origin","start","end","stack","shape"].indexOf(Z)>=0&&Z}function NY($,Q,J,Z){if($==="-"||$==="+")J=Q+J;if(J===Q||J<0||J>=Z)return!1;return J}function HY($,Q){let J=null;if($==="start")J=Q.bottom;else if($==="end")J=Q.top;else if(p($))J=Q.getPixelForValue($.value);else if(Q.getBasePixel)J=Q.getBasePixel();return J}function MY($,Q,J){let Z;if($==="start")Z=J;else if($==="end")Z=Q.options.reverse?Q.min:Q.max;else if(p($))Z=$.value;else Z=Q.getBaseValue();return Z}function BY($){let Q=$.options,J=Q.fill,Z=h(J&&J.target,J);if(Z===void 0)Z=!!Q.backgroundColor;if(Z===!1||Z===null)return!1;if(Z===!0)return"origin";return Z}function WY($){let{scale:Q,index:J,line:Z}=$,q=[],G=Z.segments,X=Z.points,K=jY(Q,J);K.push(N2({x:null,y:Q.bottom},Z));for(let Y=0;Y<G.length;Y++){let U=G[Y];for(let N=U.start;N<=U.end;N++)LY(q,X[N],K)}return new v5({points:q,options:{}})}function jY($,Q){let J=[],Z=$.getMatchingVisibleMetas("line");for(let q=0;q<Z.length;q++){let G=Z[q];if(G.index===Q)break;if(!G.hidden)J.unshift(G.dataset)}return J}function LY($,Q,J){let Z=[];for(let q=0;q<J.length;q++){let G=J[q],{first:X,last:K,point:Y}=FY(G,Q,"x");if(!Y||X&&K)continue;if(X)Z.unshift(Y);else if($.push(Y),!K)break}$.push(...Z)}function FY($,Q,J){let Z=$.interpolate(Q,J);if(!Z)return{};let q=Z[J],G=$.segments,X=$.points,K=!1,Y=!1;for(let U=0;U<G.length;U++){let N=G[U],H=X[N.start][J],M=X[N.end][J];if($1(q,H,M)){K=q===H,Y=q===M;break}}return{first:K,last:Y,point:Z}}class l7{constructor($){this.x=$.x,this.y=$.y,this.radius=$.radius}pathSegment($,Q,J){let{x:Z,y:q,radius:G}=this;return Q=Q||{start:0,end:Z0},$.arc(Z,q,G,Q.end,Q.start,!0),!J.bounds}interpolate($){let{x:Q,y:J,radius:Z}=this,q=$.angle;return{x:Q+Math.cos(q)*Z,y:J+Math.sin(q)*Z,angle:q}}}function VY($){let{chart:Q,fill:J,line:Z}=$;if(Y0(J))return _Y(Q,J);if(J==="stack")return WY($);if(J==="shape")return!0;let q=RY($);if(q instanceof l7)return q;return N2(q,Z)}function _Y($,Q){let J=$.getDatasetMeta(Q);return J&&$.isDatasetVisible(Q)?J.dataset:null}function RY($){if(($.scale||{}).getPointPositionForValue)return EY($);return wY($)}function wY($){let{scale:Q={},fill:J}=$,Z=HY(J,Q);if(Y0(Z)){let q=Q.isHorizontal();return{x:q?Z:null,y:q?null:Z}}return null}function EY($){let{scale:Q,fill:J}=$,Z=Q.options,q=Q.getLabels().length,G=Z.reverse?Q.max:Q.min,X=MY(J,Q,G),K=[];if(Z.grid.circular){let Y=Q.getPointPositionForValue(0,G);return new l7({x:Y.x,y:Y.y,radius:Q.getDistanceFromCenterForValue(X)})}for(let Y=0;Y<q;++Y)K.push(Q.getPointPositionForValue(Y,X));return K}function w7($,Q,J){let Z=VY(Q),{chart:q,index:G,line:X,scale:K,axis:Y}=Q,U=X.options,N=U.fill,H=U.backgroundColor,{above:M=H,below:B=H}=N||{},j=q.getDatasetMeta(G),L=H7(q,j);if(Z&&X.points.length)G9($,J),DY($,{line:X,target:Z,above:M,below:B,area:J,scale:K,axis:Y,clip:L}),X9($)}function DY($,Q){let{line:J,target:Z,above:q,below:G,area:X,scale:K,clip:Y}=Q,U=J._loop?"angle":Q.axis;$.save();let N=G;if(G!==q){if(U==="x")VZ($,Z,X.top),E7($,{line:J,target:Z,color:q,scale:K,property:U,clip:Y}),$.restore(),$.save(),VZ($,Z,X.bottom);else if(U==="y")_Z($,Z,X.left),E7($,{line:J,target:Z,color:G,scale:K,property:U,clip:Y}),$.restore(),$.save(),_Z($,Z,X.right),N=q}E7($,{line:J,target:Z,color:N,scale:K,property:U,clip:Y}),$.restore()}function VZ($,Q,J){let{segments:Z,points:q}=Q,G=!0,X=!1;$.beginPath();for(let K of Z){let{start:Y,end:U}=K,N=q[Y],H=q[n8(Y,U,q)];if(G)$.moveTo(N.x,N.y),G=!1;else $.lineTo(N.x,J),$.lineTo(N.x,N.y);if(X=!!Q.pathSegment($,K,{move:X}),X)$.closePath();else $.lineTo(H.x,J)}$.lineTo(Q.first().x,J),$.closePath(),$.clip()}function _Z($,Q,J){let{segments:Z,points:q}=Q,G=!0,X=!1;$.beginPath();for(let K of Z){let{start:Y,end:U}=K,N=q[Y],H=q[n8(Y,U,q)];if(G)$.moveTo(N.x,N.y),G=!1;else $.lineTo(J,N.y),$.lineTo(N.x,N.y);if(X=!!Q.pathSegment($,K,{move:X}),X)$.closePath();else $.lineTo(J,H.y)}$.lineTo(J,Q.first().y),$.closePath(),$.clip()}function E7($,Q){let{line:J,target:Z,property:q,color:G,scale:X,clip:K}=Q,Y=XY(J,Z,q);for(let{source:U,target:N,start:H,end:M}of Y){let{style:{backgroundColor:B=G}={}}=U,j=Z!==!0;$.save(),$.fillStyle=B,PY($,X,K,j&&O7(q,H,M)),$.beginPath();let L=!!J.pathSegment($,U),W;if(j){if(L)$.closePath();else RZ($,Z,M,q);let V=!!Z.pathSegment($,N,{move:L,reverse:!0});if(W=L&&V,!W)RZ($,Z,H,q)}$.closePath(),$.fill(W?"evenodd":"nonzero"),$.restore()}}function PY($,Q,J,Z){let q=Q.chart.chartArea,{property:G,start:X,end:K}=Z||{};if(G==="x"||G==="y"){let Y,U,N,H;if(G==="x")Y=X,U=q.top,N=K,H=q.bottom;else Y=q.left,U=X,N=q.right,H=K;if($.beginPath(),J)Y=Math.max(Y,J.left),N=Math.min(N,J.right),U=Math.max(U,J.top),H=Math.min(H,J.bottom);$.rect(Y,U,N-Y,H-U),$.clip()}}function RZ($,Q,J,Z){let q=Q.interpolate(J,Z);if(q)$.lineTo(q.x,q.y)}function CY($,Q,J,Z,q){let G=OY(Z,$,Q,J),X=zY(q,Z,Q.lineHeight);return{itemWidth:G,itemHeight:X}}function OY($,Q,J,Z){let q=$.text;if(q&&typeof q!=="string")q=q.reduce((G,X)=>G.length>X.length?G:X);return Q+J.size/2+Z.measureText(q).width}function zY($,Q,J){let Z=$;if(typeof Q.text!=="string")Z=M2(Q,J);return Z}function M2($,Q){let J=$.text?$.text.length:0;return Q*J}function IY($,Q){if(($==="mousemove"||$==="mouseout")&&(Q.onHover||Q.onLeave))return!0;if(Q.onClick&&($==="click"||$==="mouseup"))return!0;return!1}function AY($,Q){let J=new i8({ctx:$.ctx,options:Q,chart:$});E0.configure($,J,Q),E0.addBox($,J),$.titleBlock=J}function Q1($,Q){if(Q)if(J0(Q))Array.prototype.push.apply($,Q);else $.push(Q);return $}function _1($){if((typeof $==="string"||$ instanceof String)&&$.indexOf(`
`)>-1)return $.split(`
`);return $}function SY($,Q){let{element:J,datasetIndex:Z,index:q}=Q,G=$.getDatasetMeta(Z).controller,{label:X,value:K}=G.getLabelAndValue(q);return{chart:$,label:X,parsed:G.getParsed(q),raw:$.data.datasets[Z].data[q],formattedValue:K,dataset:G.getDataset(),dataIndex:q,datasetIndex:Z,element:J}}function EZ($,Q){let J=$.chart.ctx,{body:Z,footer:q,title:G}=$,{boxWidth:X,boxHeight:K}=Q,Y=j0(Q.bodyFont),U=j0(Q.titleFont),N=j0(Q.footerFont),H=G.length,M=q.length,B=Z.length,j=w0(Q.padding),L=j.height,W=0,V=Z.reduce((E,w)=>E+w.before.length+w.lines.length+w.after.length,0);if(V+=$.beforeBody.length+$.afterBody.length,H)L+=H*U.lineHeight+(H-1)*Q.titleSpacing+Q.titleMarginBottom;if(V){let E=Q.displayColors?Math.max(K,Y.lineHeight):Y.lineHeight;L+=B*E+(V-B)*Y.lineHeight+(V-1)*Q.bodySpacing}if(M)L+=Q.footerMarginTop+M*N.lineHeight+(M-1)*Q.footerSpacing;let _=0,D=function(E){W=Math.max(W,J.measureText(E).width+_)};return J.save(),J.font=U.string,i($.title,D),J.font=Y.string,i($.beforeBody.concat($.afterBody),D),_=Q.displayColors?X+2+Q.boxPadding:0,i(Z,(E)=>{i(E.before,D),i(E.lines,D),i(E.after,D)}),_=0,J.font=N.string,i($.footer,D),J.restore(),W+=j.width,{width:W,height:L}}function kY($,Q){let{y:J,height:Z}=Q;if(J<Z/2)return"top";else if(J>$.height-Z/2)return"bottom";return"center"}function bY($,Q,J,Z){let{x:q,width:G}=Z,X=J.caretSize+J.caretPadding;if($==="left"&&q+G+X>Q.width)return!0;if($==="right"&&q-G-X<0)return!0}function yY($,Q,J,Z){let{x:q,width:G}=J,{width:X,chartArea:{left:K,right:Y}}=$,U="center";if(Z==="center")U=q<=(K+Y)/2?"left":"right";else if(q<=G/2)U="left";else if(q>=X-G/2)U="right";if(bY(U,$,Q,J))U="center";return U}function DZ($,Q,J){let Z=J.yAlign||Q.yAlign||kY($,J);return{xAlign:J.xAlign||Q.xAlign||yY($,Q,J,Z),yAlign:Z}}function vY($,Q){let{x:J,width:Z}=$;if(Q==="right")J-=Z;else if(Q==="center")J-=Z/2;return J}function hY($,Q,J){let{y:Z,height:q}=$;if(Q==="top")Z+=J;else if(Q==="bottom")Z-=q+J;else Z-=q/2;return Z}function PZ($,Q,J,Z){let{caretSize:q,caretPadding:G,cornerRadius:X}=$,{xAlign:K,yAlign:Y}=J,U=q+G,{topLeft:N,topRight:H,bottomLeft:M,bottomRight:B}=b1(X),j=vY(Q,K),L=hY(Q,Y,U);if(Y==="center"){if(K==="left")j+=U;else if(K==="right")j-=U}else if(K==="left")j-=Math.max(N,M)+q;else if(K==="right")j+=Math.max(H,B)+q;return{x:L0(j,0,Z.width-Q.width),y:L0(L,0,Z.height-Q.height)}}function m8($,Q,J){let Z=w0(J.padding);return Q==="center"?$.x+$.width/2:Q==="right"?$.x+$.width-Z.right:$.x+Z.left}function TZ($){return Q1([],_1($))}function fY($,Q,J){return V1($,{tooltip:Q,tooltipItems:J,type:"tooltip"})}function CZ($,Q){let J=Q&&Q.dataset&&Q.dataset.tooltip&&Q.dataset.tooltip.callbacks;return J?$.override(J):$}function z0($,Q,J,Z){let q=$[Q].call(J,Z);if(typeof q>"u")return L2[Q].call(J,Z);return q}function gY($,Q,J,Z){let q=$.indexOf(Q);if(q===-1)return xY($,Q,J,Z);let G=$.lastIndexOf(Q);return q!==G?J:q}function OZ($){let Q=this.getLabels();if($>=0&&$<Q.length)return Q[$];return $}function uY($,Q){let J=[],Z=0.00000000000001,{bounds:q,step:G,min:X,max:K,precision:Y,count:U,maxTicks:N,maxDigits:H,includeBounds:M}=$,B=G||1,j=N-1,{min:L,max:W}=Q,V=!u(X),_=!u(K),D=!u(U),E=(W-L)/(H+1),w=m4((W-L)/j/B)*B,P,T,A,z;if(w<0.00000000000001&&!V&&!_)return[{value:L},{value:W}];if(z=Math.ceil(W/w)-Math.floor(L/w),z>j)w=m4(z*w/j/B)*B;if(!u(Y))P=Math.pow(10,Y),w=Math.ceil(w*P)/P;if(q==="ticks")T=Math.floor(L/w)*w,A=Math.ceil(W/w)*w;else T=L,A=W;if(V&&_&&G&&MJ((K-X)/G,w/1000))z=Math.round(Math.min((K-X)/w,N)),w=(K-X)/z,T=X,A=K;else if(D)T=V?X:T,A=_?K:A,z=U-1,w=(A-T)/z;else if(z=(A-T)/w,z5(z,Math.round(z),w/1000))z=Math.round(z);else z=Math.ceil(z);let g=Math.max(p4(w),p4(T));P=Math.pow(10,u(Y)?g:Y),T=Math.round(T*P)/P,A=Math.round(A*P)/P;let x=0;if(V){if(M&&T!==X){if(J.push({value:X}),T<X)x++;if(z5(Math.round((T+x*w)*P)/P,X,zZ(X,E,$)))x++}else if(T<X)x++}for(;x<z;++x){let X0=Math.round((T+x*w)*P)/P;if(_&&X0>K)break;J.push({value:X0})}if(_&&M&&A!==K)if(J.length&&z5(J[J.length-1].value,K,zZ(K,E,$)))J[J.length-1].value=K;else J.push({value:K});else if(!_||A===K)J.push({value:A});return J}function zZ($,Q,{horizontal:J,minRotation:Z}){let q=x0(Z),G=(J?Math.sin(q):Math.cos(q))||0.001,X=0.75*Q*(""+$).length;return Math.min(Q/G,X)}function IZ($){return $/Math.pow(10,F9($))===1}function AZ($,Q,J){let Z=Math.pow(10,J),q=Math.floor($/Z);return Math.ceil(Q/Z)-q}function pY($,Q){let J=Q-$,Z=F9(J);while(AZ($,Q,Z)>10)Z++;while(AZ($,Q,Z)<10)Z--;return Math.min(Z,F9($))}function dY($,{min:Q,max:J}){Q=O0($.min,Q);let Z=[],q=F9(Q),G=pY(Q,J),X=G<0?Math.pow(10,Math.abs(G)):1,K=Math.pow(10,G),Y=q>G?Math.pow(10,q):0,U=Math.round((Q-Y)*X)/X,N=Math.floor((Q-Y)/K/10)*K*10,H=Math.floor((U-N)/Math.pow(10,G)),M=O0($.min,Math.round((Y+N+H*Math.pow(10,G))*X)/X);while(M<J){if(Z.push({value:M,major:IZ(M),significand:H}),H>=10)H=H<15?15:20;else H++;if(H>=20)G++,H=2,X=G>=0?1:X;M=Math.round((Y+N+H*Math.pow(10,G))*X)/X}let B=O0($.max,M);return Z.push({value:B,major:IZ(B),significand:H}),Z}function A7($){let Q=$.ticks;if(Q.display&&$.display){let J=w0(Q.backdropPadding);return h(Q.font&&Q.font.size,q0.font.size)+J.height}return 0}function cY($,Q,J){return J=J0(J)?J:[J],{w:EJ($,Q.string,J),h:J.length*Q.lineHeight}}function SZ($,Q,J,Z,q){if($===Z||$===q)return{start:Q-J/2,end:Q+J/2};else if($<Z||$>q)return{start:Q-J,end:Q};return{start:Q,end:Q+J}}function lY($){let Q={l:$.left+$._padding.left,r:$.right-$._padding.right,t:$.top+$._padding.top,b:$.bottom-$._padding.bottom},J=Object.assign({},Q),Z=[],q=[],G=$._pointLabels.length,X=$.options.pointLabels,K=X.centerPointLabels?o/G:0;for(let Y=0;Y<G;Y++){let U=X.setContext($.getPointLabelContext(Y));q[Y]=U.padding;let N=$.getPointPosition(Y,$.drawingArea+q[Y],K),H=j0(U.font),M=cY($.ctx,H,$._pointLabels[Y]);Z[Y]=M;let B=_0($.getIndexAngle(Y)+K),j=Math.round(C8(B)),L=SZ(j,N.x,M.w,0,180),W=SZ(j,N.y,M.h,90,270);rY(J,Q,B,L,W)}$.setCenterPoint(Q.l-J.l,J.r-Q.r,Q.t-J.t,J.b-Q.b),$._pointLabelItems=nY($,Z,q)}function rY($,Q,J,Z,q){let G=Math.abs(Math.sin(J)),X=Math.abs(Math.cos(J)),K=0,Y=0;if(Z.start<Q.l)K=(Q.l-Z.start)/G,$.l=Math.min($.l,Q.l-K);else if(Z.end>Q.r)K=(Z.end-Q.r)/G,$.r=Math.max($.r,Q.r+K);if(q.start<Q.t)Y=(Q.t-q.start)/X,$.t=Math.min($.t,Q.t-Y);else if(q.end>Q.b)Y=(q.end-Q.b)/X,$.b=Math.max($.b,Q.b+Y)}function sY($,Q,J){let Z=$.drawingArea,{extra:q,additionalAngle:G,padding:X,size:K}=J,Y=$.getPointPosition(Q,Z+q+X,G),U=Math.round(C8(_0(Y.angle+B0))),N=tY(Y.y,K.h,U),H=iY(U),M=aY(Y.x,K.w,H);return{visible:!0,x:Y.x,y:N,textAlign:H,left:M,top:N,right:M+K.w,bottom:N+K.h}}function oY($,Q){if(!Q)return!0;let{left:J,top:Z,right:q,bottom:G}=$;return!(t0({x:J,y:Z},Q)||t0({x:J,y:G},Q)||t0({x:q,y:Z},Q)||t0({x:q,y:G},Q))}function nY($,Q,J){let Z=[],q=$._pointLabels.length,G=$.options,{centerPointLabels:X,display:K}=G.pointLabels,Y={extra:A7(G)/2,additionalAngle:X?o/q:0},U;for(let N=0;N<q;N++){Y.padding=J[N],Y.size=Q[N];let H=sY($,N,Y);if(Z.push(H),K==="auto"){if(H.visible=oY(H,U),H.visible)U=H}}return Z}function iY($){if($===0||$===180)return"center";else if($<180)return"left";return"right"}function aY($,Q,J){if(J==="right")$-=Q;else if(J==="center")$-=Q/2;return $}function tY($,Q,J){if(J===90||J===270)$-=Q/2;else if(J>270||J<90)$-=Q;return $}function eY($,Q,J){let{left:Z,top:q,right:G,bottom:X}=J,{backdropColor:K}=Q;if(!u(K)){let Y=b1(Q.borderRadius),U=w0(Q.backdropPadding);$.fillStyle=K;let N=Z-U.left,H=q-U.top,M=G-Z+U.width,B=X-q+U.height;if(Object.values(Y).some((j)=>j!==0))$.beginPath(),k5($,{x:N,y:H,w:M,h:B,radius:Y}),$.fill();else $.fillRect(N,H,M,B)}}function $U($,Q){let{ctx:J,options:{pointLabels:Z}}=$;for(let q=Q-1;q>=0;q--){let G=$._pointLabelItems[q];if(!G.visible)continue;let X=Z.setContext($.getPointLabelContext(q));eY(J,X,G);let K=j0(X.font),{x:Y,y:U,textAlign:N}=G;k1(J,$._pointLabels[q],Y,U+K.lineHeight/2,K,{color:X.color,textAlign:N,textBaseline:"middle"})}}function _2($,Q,J,Z){let{ctx:q}=$;if(J)q.arc($.xCenter,$.yCenter,Q,0,Z0);else{let G=$.getPointPosition(0,Q);q.moveTo(G.x,G.y);for(let X=1;X<Z;X++)G=$.getPointPosition(X,Q),q.lineTo(G.x,G.y)}}function QU($,Q,J,Z,q){let G=$.ctx,X=Q.circular,{color:K,lineWidth:Y}=Q;if(!X&&!Z||!K||!Y||J<0)return;G.save(),G.strokeStyle=K,G.lineWidth=Y,G.setLineDash(q.dash||[]),G.lineDashOffset=q.dashOffset,G.beginPath(),_2($,J,X,Z),G.closePath(),G.stroke(),G.restore()}function JU($,Q,J){return V1($,{label:J,index:Q,type:"pointLabel"})}function kZ($,Q){return $-Q}function bZ($,Q){if(u(Q))return null;let J=$._adapter,{parser:Z,round:q,isoWeekday:G}=$._parseOpts,X=Q;if(typeof Z==="function")X=Z(X);if(!Y0(X))X=typeof Z==="string"?J.parse(X,Z):J.parse(X);if(X===null)return null;if(q)X=q==="week"&&($5(G)||G===!0)?J.startOf(X,"isoWeek",G):J.startOf(X,q);return+X}function yZ($,Q,J,Z){let q=I0.length;for(let G=I0.indexOf($);G<q-1;++G){let X=a8[I0[G]],K=X.steps?X.steps:Number.MAX_SAFE_INTEGER;if(X.common&&Math.ceil((J-Q)/(K*X.size))<=Z)return I0[G]}return I0[q-1]}function ZU($,Q,J,Z,q){for(let G=I0.length-1;G>=I0.indexOf(J);G--){let X=I0[G];if(a8[X].common&&$._adapter.diff(q,Z,X)>=Q-1)return X}return I0[J?I0.indexOf(J):0]}function qU($){for(let Q=I0.indexOf($)+1,J=I0.length;Q<J;++Q)if(a8[I0[Q]].common)return I0[Q]}function vZ($,Q,J){if(!J)$[Q]=!0;else if(J.length){let{lo:Z,hi:q}=O8(J,Q),G=J[Z]>=Q?J[Z]:J[q];$[G]=!0}}function GU($,Q,J,Z){let q=$._adapter,G=+q.startOf(Q[0].value,Z),X=Q[Q.length-1].value,K,Y;for(K=G;K<=X;K=+q.add(K,1,Z))if(Y=J[K],Y>=0)Q[Y].major=!0;return Q}function hZ($,Q,J){let Z=[],q={},G=Q.length,X,K;for(X=0;X<G;++X)K=Q[X],q[K]=X,Z.push({value:K,major:!1});return G===0||!J?Z:GU($,Z,q,J)}function u8($,Q,J){let Z=0,q=$.length-1,G,X,K,Y;if(J){if(Q>=$[Z].pos&&Q<=$[q].pos)({lo:Z,hi:q}=a0($,"pos",Q));({pos:G,time:K}=$[Z]),{pos:X,time:Y}=$[q]}else{if(Q>=$[Z].time&&Q<=$[q].time)({lo:Z,hi:q}=a0($,"time",Q));({time:G,pos:K}=$[Z]),{time:X,pos:Y}=$[q]}let U=X-G;return U?K+(Y-K)*(Q-G)/U:K}var J1,xJ="transparent",KK,W7=($)=>$==="reset"||$==="none",dJ=($,Q)=>Q?$:Object.assign({},$),VK=($,Q,J)=>$&&!Q.hidden&&Q._stacked&&{keys:xZ(J,!0),values:null},Z1,k7,b7,_9,y7,s8,v7,h7,f7,mZ,uZ,pZ,dZ,E0,g7,p8="$chartjs",uK,aJ=($)=>$===null||$==="",lZ,j9,tJ=0,m7,s0,q3=($)=>$==="left"?"right":$==="right"?"left":$,eJ=($,Q,J)=>Q==="top"||Q==="left"?$[Q]+J:$[Q]-J,$Z=($,Q)=>Math.min(Q||$,$),h1,r0,GZ,tZ,H9=($,Q,J)=>{let Z=F1(Q,J);if(Z!==void 0)$.add(Z)},P3=($)=>p($)&&Object.getOwnPropertyNames($).some((Q)=>j1($[Q])),C3="4.5.1",O3,d8,NZ=($)=>{let Q=$2($);return Object.values(d8).filter((J)=>J.canvas===Q).pop()},u7,p7,c3,v5,d7,c7,q2,C7,BZ,K2,U2,H2,wZ=($,Q)=>{let{boxHeight:J=Q,boxWidth:Z=Q}=$;if($.usePointStyle)J=Math.min(J,Q),Z=$.pointStyleWidth||Math.min(Z,Q);return{boxWidth:Z,boxHeight:J,itemHeight:Math.max(Q,J)}},TY=($,Q)=>$!==null&&Q!==null&&$.datasetIndex===Q.datasetIndex&&$.index===Q.index,z7,B2,i8,W2,g8,j2,W9,L2,I7,F2,V2,xY=($,Q,J,Z)=>{if(typeof Q==="string")J=$.push(Q)-1,Z.unshift({index:J,label:Q});else if(isNaN(Q))J=null;return J},mY=($,Q)=>$===null?null:L0(Math.round($),0,Q),r7,L9,s7,F9=($)=>Math.floor(L1($)),Z5=($,Q)=>Math.pow(10,F9($)+Q),o7,n7,a8,I0,V9,i7,R2,XU;var E2=Z6(()=>{fJ();/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */J1=new fZ,KK={boolean($,Q,J){return J>0.5?Q:$},color($,Q,J){let Z=a4($||xJ),q=Z.valid&&a4(Q||xJ);return q&&q.valid?q.mix(Z,J).hexString():Q},number($,Q,J){return $+(Q-$)*J}};Z1=class Z1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor($,Q){this.chart=$,this._ctx=$.ctx,this.index=Q,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let $=this._cachedMeta;if(this.configure(),this.linkScales(),$._stacked=M7($.vScale,$),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler"))console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex($){if(this.index!==$)K9(this._cachedMeta);this.index=$}linkScales(){let $=this.chart,Q=this._cachedMeta,J=this.getDataset(),Z=(N,H,M,B)=>N==="x"?H:N==="r"?B:M,q=Q.xAxisID=h(J.xAxisID,B7($,"x")),G=Q.yAxisID=h(J.yAxisID,B7($,"y")),X=Q.rAxisID=h(J.rAxisID,B7($,"r")),K=Q.indexAxis,Y=Q.iAxisID=Z(K,q,G,X),U=Q.vAxisID=Z(K,G,q,X);Q.xScale=this.getScaleForId(q),Q.yScale=this.getScaleForId(G),Q.rScale=this.getScaleForId(X),Q.iScale=this.getScaleForId(Y),Q.vScale=this.getScaleForId(U)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId($){return this.chart.scales[$]}_getOtherScale($){let Q=this._cachedMeta;return $===Q.iScale?Q.vScale:Q.iScale}reset(){this._update("reset")}_destroy(){let $=this._cachedMeta;if(this._data)c4(this._data,this);if($._stacked)K9($)}_dataCheck(){let $=this.getDataset(),Q=$.data||($.data=[]),J=this._data;if(p(Q)){let Z=this._cachedMeta;this._data=MK(Q,Z)}else if(J!==Q){if(J){c4(J,this);let Z=this._cachedMeta;K9(Z),Z._parsed=[]}if(Q&&Object.isExtensible(Q))FJ(Q,this);this._syncList=[],this._data=Q}}addElements(){let $=this._cachedMeta;if(this._dataCheck(),this.datasetElementType)$.dataset=new this.datasetElementType}buildOrUpdateElements($){let Q=this._cachedMeta,J=this.getDataset(),Z=!1;this._dataCheck();let q=Q._stacked;if(Q._stacked=M7(Q.vScale,Q),Q.stack!==J.stack)Z=!0,K9(Q),Q.stack=J.stack;if(this._resyncElements($),Z||q!==Q._stacked)pJ(this,Q._parsed),Q._stacked=M7(Q.vScale,Q)}configure(){let $=this.chart.config,Q=$.datasetScopeKeys(this._type),J=$.getOptionScopes(this.getDataset(),Q,!0);this.options=$.createResolver(J,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse($,Q){let{_cachedMeta:J,_data:Z}=this,{iScale:q,_stacked:G}=J,X=q.axis,K=$===0&&Q===Z.length?!0:J._sorted,Y=$>0&&J._parsed[$-1],U,N,H;if(this._parsing===!1)J._parsed=Z,J._sorted=!0,H=Z;else{if(J0(Z[$]))H=this.parseArrayData(J,Z,$,Q);else if(p(Z[$]))H=this.parseObjectData(J,Z,$,Q);else H=this.parsePrimitiveData(J,Z,$,Q);let M=()=>N[X]===null||Y&&N[X]<Y[X];for(U=0;U<Q;++U)if(J._parsed[U+$]=N=H[U],K){if(M())K=!1;Y=N}J._sorted=K}if(G)pJ(this,H)}parsePrimitiveData($,Q,J,Z){let{iScale:q,vScale:G}=$,X=q.axis,K=G.axis,Y=q.getLabels(),U=q===G,N=Array(Z),H,M,B;for(H=0,M=Z;H<M;++H)B=H+J,N[H]={[X]:U||q.parse(Y[B],B),[K]:G.parse(Q[B],B)};return N}parseArrayData($,Q,J,Z){let{xScale:q,yScale:G}=$,X=Array(Z),K,Y,U,N;for(K=0,Y=Z;K<Y;++K)U=K+J,N=Q[U],X[K]={x:q.parse(N[0],U),y:G.parse(N[1],U)};return X}parseObjectData($,Q,J,Z){let{xScale:q,yScale:G}=$,{xAxisKey:X="x",yAxisKey:K="y"}=this._parsing,Y=Array(Z),U,N,H,M;for(U=0,N=Z;U<N;++U)H=U+J,M=Q[H],Y[U]={x:q.parse(F1(M,X),H),y:G.parse(F1(M,K),H)};return Y}getParsed($){return this._cachedMeta._parsed[$]}getDataElement($){return this._cachedMeta.data[$]}applyStack($,Q,J){let Z=this.chart,q=this._cachedMeta,G=Q[$.axis],X={keys:xZ(Z,!0),values:Q._stacks[$.axis]._visualValues};return mJ(X,G,q.index,{mode:J})}updateRangeFromParsed($,Q,J,Z){let q=J[Q.axis],G=q===null?NaN:q,X=Z&&J._stacks[Q.axis];if(Z&&X)Z.values=X,G=mJ(Z,q,this._cachedMeta.index);$.min=Math.min($.min,G),$.max=Math.max($.max,G)}getMinMax($,Q){let J=this._cachedMeta,Z=J._parsed,q=J._sorted&&$===J.iScale,G=Z.length,X=this._getOtherScale($),K=VK(Q,J,this.chart),Y={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:U,max:N}=WK(X),H,M;function B(){M=Z[H];let j=M[X.axis];return!Y0(M[$.axis])||U>j||N<j}for(H=0;H<G;++H){if(B())continue;if(this.updateRangeFromParsed(Y,$,M,K),q)break}if(q)for(H=G-1;H>=0;--H){if(B())continue;this.updateRangeFromParsed(Y,$,M,K);break}return Y}getAllParsedValues($){let Q=this._cachedMeta._parsed,J=[],Z,q,G;for(Z=0,q=Q.length;Z<q;++Z)if(G=Q[Z][$.axis],Y0(G))J.push(G);return J}getMaxOverflow(){return!1}getLabelAndValue($){let Q=this._cachedMeta,J=Q.iScale,Z=Q.vScale,q=this.getParsed($);return{label:J?""+J.getLabelForValue(q[J.axis]):"",value:Z?""+Z.getLabelForValue(q[Z.axis]):""}}_update($){let Q=this._cachedMeta;this.update($||"default"),Q._clip=HK(h(this.options.clip,NK(Q.xScale,Q.yScale,this.getMaxOverflow())))}update($){}draw(){let $=this._ctx,Q=this.chart,J=this._cachedMeta,Z=J.data||[],q=Q.chartArea,G=[],X=this._drawStart||0,K=this._drawCount||Z.length-X,Y=this.options.drawActiveElementsOnTop,U;if(J.dataset)J.dataset.draw($,q,X,K);for(U=X;U<X+K;++U){let N=Z[U];if(N.hidden)continue;if(N.active&&Y)G.push(N);else N.draw($,q)}for(U=0;U<G.length;++U)G[U].draw($,q)}getStyle($,Q){let J=Q?"active":"default";return $===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(J):this.resolveDataElementOptions($||0,J)}getContext($,Q,J){let Z=this.getDataset(),q;if($>=0&&$<this._cachedMeta.data.length){let G=this._cachedMeta.data[$];q=G.$context||(G.$context=FK(this.getContext(),$,G)),q.parsed=this.getParsed($),q.raw=Z.data[$],q.index=q.dataIndex=$}else q=this.$context||(this.$context=LK(this.chart.getContext(),this.index)),q.dataset=Z,q.index=q.datasetIndex=this.index;return q.active=!!Q,q.mode=J,q}resolveDatasetElementOptions($){return this._resolveElementOptions(this.datasetElementType.id,$)}resolveDataElementOptions($,Q){return this._resolveElementOptions(this.dataElementType.id,Q,$)}_resolveElementOptions($,Q="default",J){let Z=Q==="active",q=this._cachedDataOpts,G=$+"-"+Q,X=q[G],K=this.enableOptionSharing&&O5(J);if(X)return dJ(X,K);let Y=this.chart.config,U=Y.datasetElementScopeKeys(this._type,$),N=Z?[`${$}Hover`,"hover",$,""]:[$,""],H=Y.getOptionScopes(this.getDataset(),U),M=Object.keys(q0.elements[$]),B=()=>this.getContext(J,Z,Q),j=Y.resolveNamedOptions(H,M,B,N);if(j.$shared)j.$shared=K,q[G]=Object.freeze(dJ(j,K));return j}_resolveAnimations($,Q,J){let Z=this.chart,q=this._cachedDataOpts,G=`animation-${Q}`,X=q[G];if(X)return X;let K;if(Z.options.animation!==!1){let U=this.chart.config,N=U.datasetAnimationScopeKeys(this._type,Q),H=U.getOptionScopes(this.getDataset(),N);K=U.createResolver(H,this.getContext($,J,Q))}let Y=new r8(Z,K&&K.animations);if(K&&K._cacheable)q[G]=Object.freeze(Y);return Y}getSharedOptions($){if(!$.$shared)return;return this._sharedOptions||(this._sharedOptions=Object.assign({},$))}includeOptions($,Q){return!Q||W7($)||this.chart._animationsDisabled}_getSharedOptions($,Q){let J=this.resolveDataElementOptions($,Q),Z=this._sharedOptions,q=this.getSharedOptions(J),G=this.includeOptions(Q,q)||q!==Z;return this.updateSharedOptions(q,Q,J),{sharedOptions:q,includeOptions:G}}updateElement($,Q,J,Z){if(W7(Z))Object.assign($,J);else this._resolveAnimations(Q,Z).update($,J)}updateSharedOptions($,Q,J){if($&&!W7(Q))this._resolveAnimations(void 0,Q).update($,J)}_setStyle($,Q,J,Z){$.active=Z;let q=this.getStyle(Q,Z);this._resolveAnimations(Q,J,Z).update($,{options:!Z&&this.getSharedOptions(q)||q})}removeHoverStyle($,Q,J){this._setStyle($,J,"active",!1)}setHoverStyle($,Q,J){this._setStyle($,J,"active",!0)}_removeDatasetHoverStyle(){let $=this._cachedMeta.dataset;if($)this._setStyle($,void 0,"active",!1)}_setDatasetHoverStyle(){let $=this._cachedMeta.dataset;if($)this._setStyle($,void 0,"active",!0)}_resyncElements($){let Q=this._data,J=this._cachedMeta.data;for(let[X,K,Y]of this._syncList)this[X](K,Y);this._syncList=[];let Z=J.length,q=Q.length,G=Math.min(q,Z);if(G)this.parse(0,G);if(q>Z)this._insertElements(Z,q-Z,$);else if(q<Z)this._removeElements(q,Z-q)}_insertElements($,Q,J=!0){let Z=this._cachedMeta,q=Z.data,G=$+Q,X,K=(Y)=>{Y.length+=Q;for(X=Y.length-1;X>=G;X--)Y[X]=Y[X-Q]};K(q);for(X=$;X<G;++X)q[X]=new this.dataElementType;if(this._parsing)K(Z._parsed);if(this.parse($,Q),J)this.updateElements(q,$,Q,"reset")}updateElements($,Q,J,Z){}_removeElements($,Q){let J=this._cachedMeta;if(this._parsing){let Z=J._parsed.splice($,Q);if(J._stacked)K9(J,Z)}J.data.splice($,Q)}_sync($){if(this._parsing)this._syncList.push($);else{let[Q,J,Z]=$;this[Q](J,Z)}this.chart._dataChanges.push([this.index,...$])}_onDataPush(){let $=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-$,$])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice($,Q){if(Q)this._sync(["_removeElements",$,Q]);let J=arguments.length-2;if(J)this._sync(["_insertElements",$,J])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};k7=class k7 extends Z1{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:0.8,barPercentage:0.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData($,Q,J,Z){return cJ($,Q,J,Z)}parseArrayData($,Q,J,Z){return cJ($,Q,J,Z)}parseObjectData($,Q,J,Z){let{iScale:q,vScale:G}=$,{xAxisKey:X="x",yAxisKey:K="y"}=this._parsing,Y=q.axis==="x"?X:K,U=G.axis==="x"?X:K,N=[],H,M,B,j;for(H=J,M=J+Z;H<M;++H)j=Q[H],B={},B[q.axis]=q.parse(F1(j,Y),H),N.push(gZ(F1(j,U),B,G,H));return N}updateRangeFromParsed($,Q,J,Z){super.updateRangeFromParsed($,Q,J,Z);let q=J._custom;if(q&&Q===this._cachedMeta.vScale)$.min=Math.min($.min,q.min),$.max=Math.max($.max,q.max)}getMaxOverflow(){return 0}getLabelAndValue($){let Q=this._cachedMeta,{iScale:J,vScale:Z}=Q,q=this.getParsed($),G=q._custom,X=j7(G)?"["+G.start+", "+G.end+"]":""+Z.getLabelForValue(q[Z.axis]);return{label:""+J.getLabelForValue(q[J.axis]),value:X}}initialize(){this.enableOptionSharing=!0,super.initialize();let $=this._cachedMeta;$.stack=this.getDataset().stack}update($){let Q=this._cachedMeta;this.updateElements(Q.data,0,Q.data.length,$)}updateElements($,Q,J,Z){let q=Z==="reset",{index:G,_cachedMeta:{vScale:X}}=this,K=X.getBasePixel(),Y=X.isHorizontal(),U=this._getRuler(),{sharedOptions:N,includeOptions:H}=this._getSharedOptions(Q,Z);for(let M=Q;M<Q+J;M++){let B=this.getParsed(M),j=q||u(B[X.axis])?{base:K,head:K}:this._calculateBarValuePixels(M),L=this._calculateBarIndexPixels(M,U),W=(B._stacks||{})[X.axis],V={horizontal:Y,base:j.base,enableBorderRadius:!W||j7(B._custom)||G===W._top||G===W._bottom,x:Y?j.head:L.center,y:Y?L.center:j.head,height:Y?L.size:Math.abs(j.size),width:Y?Math.abs(j.size):L.size};if(H)V.options=N||this.resolveDataElementOptions(M,$[M].active?"active":Z);let _=V.options||$[M].options;CK(V,_,W,G),zK(V,_,U.ratio),this.updateElement($[M],M,V,Z)}}_getStacks($,Q){let{iScale:J}=this._cachedMeta,Z=J.getMatchingVisibleMetas(this._type).filter((U)=>U.controller.options.grouped),q=J.options.stacked,G=[],X=this._cachedMeta.controller.getParsed(Q),K=X&&X[J.axis],Y=(U)=>{let N=U._parsed.find((M)=>M[J.axis]===K),H=N&&N[U.vScale.axis];if(u(H)||isNaN(H))return!0};for(let U of Z){if(Q!==void 0&&Y(U))continue;if(q===!1||G.indexOf(U.stack)===-1||q===void 0&&U.stack===void 0)G.push(U.stack);if(U.index===$)break}if(!G.length)G.push(void 0);return G}_getStackCount($){return this._getStacks(void 0,$).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let $=this.chart.scales,Q=this.chart.options.indexAxis;return Object.keys($).filter((J)=>$[J].axis===Q).shift()}_getAxis(){let $={},Q=this.getFirstScaleIdForIndexAxis();for(let J of this.chart.data.datasets)$[h(this.chart.options.indexAxis==="x"?J.xAxisID:J.yAxisID,Q)]=!0;return Object.keys($)}_getStackIndex($,Q,J){let Z=this._getStacks($,J),q=Q!==void 0?Z.indexOf(Q):-1;return q===-1?Z.length-1:q}_getRuler(){let $=this.options,Q=this._cachedMeta,J=Q.iScale,Z=[],q,G;for(q=0,G=Q.data.length;q<G;++q)Z.push(J.getPixelForValue(this.getParsed(q)[J.axis],q));let X=$.barThickness;return{min:X||RK(Q),pixels:Z,start:J._startPixel,end:J._endPixel,stackCount:this._getStackCount(),scale:J,grouped:$.grouped,ratio:X?1:$.categoryPercentage*$.barPercentage}}_calculateBarValuePixels($){let{_cachedMeta:{vScale:Q,_stacked:J,index:Z},options:{base:q,minBarLength:G}}=this,X=q||0,K=this.getParsed($),Y=K._custom,U=j7(Y),N=K[Q.axis],H=0,M=J?this.applyStack(Q,K,J):N,B,j;if(M!==N)H=M-N,M=N;if(U){if(N=Y.barStart,M=Y.barEnd-Y.barStart,N!==0&&l0(N)!==l0(Y.barEnd))H=0;H+=N}let L=!u(q)&&!U?q:H,W=Q.getPixelForValue(L);if(this.chart.getDataVisibility($))B=Q.getPixelForValue(H+M);else B=W;if(j=B-W,Math.abs(j)<G){if(j=PK(j,Q,X)*G,N===X)W-=j/2;let V=Q.getPixelForDecimal(0),_=Q.getPixelForDecimal(1),D=Math.min(V,_),E=Math.max(V,_);if(W=Math.max(Math.min(W,E),D),B=W+j,J&&!U)K._stacks[Q.axis]._visualValues[Z]=Q.getValueForPixel(B)-Q.getValueForPixel(W)}if(W===Q.getPixelForValue(X)){let V=l0(j)*Q.getLineWidthForValue(X)/2;W+=V,j-=V}return{size:j,base:W,head:B,center:B+j/2}}_calculateBarIndexPixels($,Q){let J=Q.scale,Z=this.options,q=Z.skipNull,G=h(Z.maxBarThickness,1/0),X,K,Y=this._getAxisCount();if(Q.grouped){let U=q?this._getStackCount($):Q.stackCount,N=Z.barThickness==="flex"?EK($,Q,Z,U*Y):wK($,Q,Z,U*Y),H=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,M=this._getAxis().indexOf(h(H,this.getFirstScaleIdForIndexAxis())),B=this._getStackIndex(this.index,this._cachedMeta.stack,q?$:void 0)+M;X=N.start+N.chunk*B+N.chunk/2,K=Math.min(G,N.chunk*N.ratio)}else X=J.getPixelForValue(this.getParsed($)[J.axis],$),K=Math.min(G,Q.min*Q.ratio);return{base:X-K/2,head:X+K/2,center:X,size:K}}draw(){let $=this._cachedMeta,Q=$.vScale,J=$.data,Z=J.length,q=0;for(;q<Z;++q)if(this.getParsed(q)[Q.axis]!==null&&!J[q].hidden)J[q].draw(this._ctx)}};b7=class b7 extends Z1{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData($,Q,J,Z){let q=super.parsePrimitiveData($,Q,J,Z);for(let G=0;G<q.length;G++)q[G]._custom=this.resolveDataElementOptions(G+J).radius;return q}parseArrayData($,Q,J,Z){let q=super.parseArrayData($,Q,J,Z);for(let G=0;G<q.length;G++){let X=Q[J+G];q[G]._custom=h(X[2],this.resolveDataElementOptions(G+J).radius)}return q}parseObjectData($,Q,J,Z){let q=super.parseObjectData($,Q,J,Z);for(let G=0;G<q.length;G++){let X=Q[J+G];q[G]._custom=h(X&&X.r&&+X.r,this.resolveDataElementOptions(G+J).radius)}return q}getMaxOverflow(){let $=this._cachedMeta.data,Q=0;for(let J=$.length-1;J>=0;--J)Q=Math.max(Q,$[J].size(this.resolveDataElementOptions(J))/2);return Q>0&&Q}getLabelAndValue($){let Q=this._cachedMeta,J=this.chart.data.labels||[],{xScale:Z,yScale:q}=Q,G=this.getParsed($),X=Z.getLabelForValue(G.x),K=q.getLabelForValue(G.y),Y=G._custom;return{label:J[$]||"",value:"("+X+", "+K+(Y?", "+Y:"")+")"}}update($){let Q=this._cachedMeta.data;this.updateElements(Q,0,Q.length,$)}updateElements($,Q,J,Z){let q=Z==="reset",{iScale:G,vScale:X}=this._cachedMeta,{sharedOptions:K,includeOptions:Y}=this._getSharedOptions(Q,Z),U=G.axis,N=X.axis;for(let H=Q;H<Q+J;H++){let M=$[H],B=!q&&this.getParsed(H),j={},L=j[U]=q?G.getPixelForDecimal(0.5):G.getPixelForValue(B[U]),W=j[N]=q?X.getBasePixel():X.getPixelForValue(B[N]);if(j.skip=isNaN(L)||isNaN(W),Y){if(j.options=K||this.resolveDataElementOptions(H,M.active?"active":Z),q)j.options.radius=0}this.updateElement(M,H,j,Z)}}resolveDataElementOptions($,Q){let J=this.getParsed($),Z=super.resolveDataElementOptions($,Q);if(Z.$shared)Z=Object.assign({},Z,{$shared:!1});let q=Z.radius;if(Q!=="active")Z.radius=0;return Z.radius+=h(J&&J._custom,q),Z}};_9=class _9 extends Z1{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:($)=>$!=="spacing",_indexable:($)=>$!=="spacing"&&!$.startsWith("borderDash")&&!$.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels($){let Q=$.data,{labels:{pointStyle:J,textAlign:Z,color:q,useBorderRadius:G,borderRadius:X}}=$.legend.options;if(Q.labels.length&&Q.datasets.length)return Q.labels.map((K,Y)=>{let N=$.getDatasetMeta(0).controller.getStyle(Y);return{text:K,fillStyle:N.backgroundColor,fontColor:q,hidden:!$.getDataVisibility(Y),lineDash:N.borderDash,lineDashOffset:N.borderDashOffset,lineJoin:N.borderJoinStyle,lineWidth:N.borderWidth,strokeStyle:N.borderColor,textAlign:Z,pointStyle:J,borderRadius:G&&(X||N.borderRadius),index:Y}});return[]}},onClick($,Q,J){J.chart.toggleDataVisibility(Q.index),J.chart.update()}}}};constructor($,Q){super($,Q);this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse($,Q){let J=this.getDataset().data,Z=this._cachedMeta;if(this._parsing===!1)Z._parsed=J;else{let q=(K)=>+J[K];if(p(J[$])){let{key:K="value"}=this._parsing;q=(Y)=>+F1(J[Y],K)}let G,X;for(G=$,X=$+Q;G<X;++G)Z._parsed[G]=q(G)}}_getRotation(){return x0(this.options.rotation-90)}_getCircumference(){return x0(this.options.circumference)}_getRotationExtents(){let $=Z0,Q=-Z0;for(let J=0;J<this.chart.data.datasets.length;++J)if(this.chart.isDatasetVisible(J)&&this.chart.getDatasetMeta(J).type===this._type){let Z=this.chart.getDatasetMeta(J).controller,q=Z._getRotation(),G=Z._getCircumference();$=Math.min($,q),Q=Math.max(Q,q+G)}return{rotation:$,circumference:Q-$}}update($){let Q=this.chart,{chartArea:J}=Q,Z=this._cachedMeta,q=Z.data,G=this.getMaxBorderWidth()+this.getMaxOffset(q)+this.options.spacing,X=Math.max((Math.min(J.width,J.height)-G)/2,0),K=Math.min(YJ(this.options.cutout,X),1),Y=this._getRingWeight(this.index),{circumference:U,rotation:N}=this._getRotationExtents(),{ratioX:H,ratioY:M,offsetX:B,offsetY:j}=IK(N,U,K),L=(J.width-G)/H,W=(J.height-G)/M,V=Math.max(Math.min(L,W)/2,0),_=x4(this.options.radius,V),D=Math.max(_*K,0),E=(_-D)/this._getVisibleDatasetWeightTotal();this.offsetX=B*_,this.offsetY=j*_,Z.total=this.calculateTotal(),this.outerRadius=_-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*Y,0),this.updateElements(q,0,q.length,$)}_circumference($,Q){let J=this.options,Z=this._cachedMeta,q=this._getCircumference();if(Q&&J.animation.animateRotate||!this.chart.getDataVisibility($)||Z._parsed[$]===null||Z.data[$].hidden)return 0;return this.calculateCircumference(Z._parsed[$]*q/Z0)}updateElements($,Q,J,Z){let q=Z==="reset",G=this.chart,X=G.chartArea,Y=G.options.animation,U=(X.left+X.right)/2,N=(X.top+X.bottom)/2,H=q&&Y.animateScale,M=H?0:this.innerRadius,B=H?0:this.outerRadius,{sharedOptions:j,includeOptions:L}=this._getSharedOptions(Q,Z),W=this._getRotation(),V;for(V=0;V<Q;++V)W+=this._circumference(V,q);for(V=Q;V<Q+J;++V){let _=this._circumference(V,q),D=$[V],E={x:U+this.offsetX,y:N+this.offsetY,startAngle:W,endAngle:W+_,circumference:_,outerRadius:B,innerRadius:M};if(L)E.options=j||this.resolveDataElementOptions(V,D.active?"active":Z);W+=_,this.updateElement(D,V,E,Z)}}calculateTotal(){let $=this._cachedMeta,Q=$.data,J=0,Z;for(Z=0;Z<Q.length;Z++){let q=$._parsed[Z];if(q!==null&&!isNaN(q)&&this.chart.getDataVisibility(Z)&&!Q[Z].hidden)J+=Math.abs(q)}return J}calculateCircumference($){let Q=this._cachedMeta.total;if(Q>0&&!isNaN($))return Z0*(Math.abs($)/Q);return 0}getLabelAndValue($){let Q=this._cachedMeta,J=this.chart,Z=J.data.labels||[],q=A5(Q._parsed[$],J.options.locale);return{label:Z[$]||"",value:q}}getMaxBorderWidth($){let Q=0,J=this.chart,Z,q,G,X,K;if(!$){for(Z=0,q=J.data.datasets.length;Z<q;++Z)if(J.isDatasetVisible(Z)){G=J.getDatasetMeta(Z),$=G.data,X=G.controller;break}}if(!$)return 0;for(Z=0,q=$.length;Z<q;++Z)if(K=X.resolveDataElementOptions(Z),K.borderAlign!=="inner")Q=Math.max(Q,K.borderWidth||0,K.hoverBorderWidth||0);return Q}getMaxOffset($){let Q=0;for(let J=0,Z=$.length;J<Z;++J){let q=this.resolveDataElementOptions(J);Q=Math.max(Q,q.offset||0,q.hoverOffset||0)}return Q}_getRingWeightOffset($){let Q=0;for(let J=0;J<$;++J)if(this.chart.isDatasetVisible(J))Q+=this._getRingWeight(J);return Q}_getRingWeight($){return Math.max(h(this.chart.data.datasets[$].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}};y7=class y7 extends Z1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update($){let Q=this._cachedMeta,{dataset:J,data:Z=[],_dataset:q}=Q,G=this.chart._animationsDisabled,{start:X,count:K}=o4(Q,Z,G);if(this._drawStart=X,this._drawCount=K,n4(Q))X=0,K=Z.length;J._chart=this.chart,J._datasetIndex=this.index,J._decimated=!!q._decimated,J.points=Z;let Y=this.resolveDatasetElementOptions($);if(!this.options.showLine)Y.borderWidth=0;Y.segment=this.options.segment,this.updateElement(J,void 0,{animated:!G,options:Y},$),this.updateElements(Z,X,K,$)}updateElements($,Q,J,Z){let q=Z==="reset",{iScale:G,vScale:X,_stacked:K,_dataset:Y}=this._cachedMeta,{sharedOptions:U,includeOptions:N}=this._getSharedOptions(Q,Z),H=G.axis,M=X.axis,{spanGaps:B,segment:j}=this.options,L=$5(B)?B:Number.POSITIVE_INFINITY,W=this.chart._animationsDisabled||q||Z==="none",V=Q+J,_=$.length,D=Q>0&&this.getParsed(Q-1);for(let E=0;E<_;++E){let w=$[E],P=W?w:{};if(E<Q||E>=V){P.skip=!0;continue}let T=this.getParsed(E),A=u(T[M]),z=P[H]=G.getPixelForValue(T[H],E),g=P[M]=q||A?X.getBasePixel():X.getPixelForValue(K?this.applyStack(X,T,K):T[M],E);if(P.skip=isNaN(z)||isNaN(g)||A,P.stop=E>0&&Math.abs(T[H]-D[H])>L,j)P.parsed=T,P.raw=Y.data[E];if(N)P.options=U||this.resolveDataElementOptions(E,w.active?"active":Z);if(!W)this.updateElement(w,E,P,Z);D=T}}getMaxOverflow(){let $=this._cachedMeta,Q=$.dataset,J=Q.options&&Q.options.borderWidth||0,Z=$.data||[];if(!Z.length)return J;let q=Z[0].size(this.resolveDataElementOptions(0)),G=Z[Z.length-1].size(this.resolveDataElementOptions(Z.length-1));return Math.max(J,q,G)/2}draw(){let $=this._cachedMeta;$.dataset.updateControlPoints(this.chart.chartArea,$.iScale.axis),super.draw()}};s8=class s8 extends Z1{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels($){let Q=$.data;if(Q.labels.length&&Q.datasets.length){let{labels:{pointStyle:J,color:Z}}=$.legend.options;return Q.labels.map((q,G)=>{let K=$.getDatasetMeta(0).controller.getStyle(G);return{text:q,fillStyle:K.backgroundColor,strokeStyle:K.borderColor,fontColor:Z,lineWidth:K.borderWidth,pointStyle:J,hidden:!$.getDataVisibility(G),index:G}})}return[]}},onClick($,Q,J){J.chart.toggleDataVisibility(Q.index),J.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor($,Q){super($,Q);this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue($){let Q=this._cachedMeta,J=this.chart,Z=J.data.labels||[],q=A5(Q._parsed[$].r,J.options.locale);return{label:Z[$]||"",value:q}}parseObjectData($,Q,J,Z){return q7.bind(this)($,Q,J,Z)}update($){let Q=this._cachedMeta.data;this._updateRadius(),this.updateElements(Q,0,Q.length,$)}getMinMax(){let $=this._cachedMeta,Q={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return $.data.forEach((J,Z)=>{let q=this.getParsed(Z).r;if(!isNaN(q)&&this.chart.getDataVisibility(Z)){if(q<Q.min)Q.min=q;if(q>Q.max)Q.max=q}}),Q}_updateRadius(){let $=this.chart,Q=$.chartArea,J=$.options,Z=Math.min(Q.right-Q.left,Q.bottom-Q.top),q=Math.max(Z/2,0),G=Math.max(J.cutoutPercentage?q/100*J.cutoutPercentage:1,0),X=(q-G)/$.getVisibleDatasetCount();this.outerRadius=q-X*this.index,this.innerRadius=this.outerRadius-X}updateElements($,Q,J,Z){let q=Z==="reset",G=this.chart,K=G.options.animation,Y=this._cachedMeta.rScale,U=Y.xCenter,N=Y.yCenter,H=Y.getIndexAngle(0)-0.5*o,M=H,B,j=360/this.countVisibleElements();for(B=0;B<Q;++B)M+=this._computeAngle(B,Z,j);for(B=Q;B<Q+J;B++){let L=$[B],W=M,V=M+this._computeAngle(B,Z,j),_=G.getDataVisibility(B)?Y.getDistanceFromCenterForValue(this.getParsed(B).r):0;if(M=V,q){if(K.animateScale)_=0;if(K.animateRotate)W=V=H}let D={x:U,y:N,innerRadius:0,outerRadius:_,startAngle:W,endAngle:V,options:this.resolveDataElementOptions(B,L.active?"active":Z)};this.updateElement(L,B,D,Z)}}countVisibleElements(){let $=this._cachedMeta,Q=0;return $.data.forEach((J,Z)=>{if(!isNaN(this.getParsed(Z).r)&&this.chart.getDataVisibility(Z))Q++}),Q}_computeAngle($,Q,J){return this.chart.getDataVisibility($)?x0(this.resolveDataElementOptions($,Q).angle||J):0}};v7=class v7 extends _9{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}};h7=class h7 extends Z1{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue($){let Q=this._cachedMeta.vScale,J=this.getParsed($);return{label:Q.getLabels()[$],value:""+Q.getLabelForValue(J[Q.axis])}}parseObjectData($,Q,J,Z){return q7.bind(this)($,Q,J,Z)}update($){let Q=this._cachedMeta,J=Q.dataset,Z=Q.data||[],q=Q.iScale.getLabels();if(J.points=Z,$!=="resize"){let G=this.resolveDatasetElementOptions($);if(!this.options.showLine)G.borderWidth=0;let X={_loop:!0,_fullLoop:q.length===Z.length,options:G};this.updateElement(J,void 0,X,$)}this.updateElements(Z,0,Z.length,$)}updateElements($,Q,J,Z){let q=this._cachedMeta.rScale,G=Z==="reset";for(let X=Q;X<Q+J;X++){let K=$[X],Y=this.resolveDataElementOptions(X,K.active?"active":Z),U=q.getPointPositionForValue(X,this.getParsed(X).r),N=G?q.xCenter:U.x,H=G?q.yCenter:U.y,M={x:N,y:H,angle:U.angle,skip:isNaN(N)||isNaN(H),options:Y};this.updateElement(K,X,M,Z)}}};f7=class f7 extends Z1{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue($){let Q=this._cachedMeta,J=this.chart.data.labels||[],{xScale:Z,yScale:q}=Q,G=this.getParsed($),X=Z.getLabelForValue(G.x),K=q.getLabelForValue(G.y);return{label:J[$]||"",value:"("+X+", "+K+")"}}update($){let Q=this._cachedMeta,{data:J=[]}=Q,Z=this.chart._animationsDisabled,{start:q,count:G}=o4(Q,J,Z);if(this._drawStart=q,this._drawCount=G,n4(Q))q=0,G=J.length;if(this.options.showLine){if(!this.datasetElementType)this.addElements();let{dataset:X,_dataset:K}=Q;X._chart=this.chart,X._datasetIndex=this.index,X._decimated=!!K._decimated,X.points=J;let Y=this.resolveDatasetElementOptions($);Y.segment=this.options.segment,this.updateElement(X,void 0,{animated:!Z,options:Y},$)}else if(this.datasetElementType)delete Q.dataset,this.datasetElementType=!1;this.updateElements(J,q,G,$)}addElements(){let{showLine:$}=this.options;if(!this.datasetElementType&&$)this.datasetElementType=this.chart.registry.getElement("line");super.addElements()}updateElements($,Q,J,Z){let q=Z==="reset",{iScale:G,vScale:X,_stacked:K,_dataset:Y}=this._cachedMeta,U=this.resolveDataElementOptions(Q,Z),N=this.getSharedOptions(U),H=this.includeOptions(Z,N),M=G.axis,B=X.axis,{spanGaps:j,segment:L}=this.options,W=$5(j)?j:Number.POSITIVE_INFINITY,V=this.chart._animationsDisabled||q||Z==="none",_=Q>0&&this.getParsed(Q-1);for(let D=Q;D<Q+J;++D){let E=$[D],w=this.getParsed(D),P=V?E:{},T=u(w[B]),A=P[M]=G.getPixelForValue(w[M],D),z=P[B]=q||T?X.getBasePixel():X.getPixelForValue(K?this.applyStack(X,w,K):w[B],D);if(P.skip=isNaN(A)||isNaN(z)||T,P.stop=D>0&&Math.abs(w[M]-_[M])>W,L)P.parsed=w,P.raw=Y.data[D];if(H)P.options=N||this.resolveDataElementOptions(D,E.active?"active":Z);if(!V)this.updateElement(E,D,P,Z);_=w}this.updateSharedOptions(N,Z,U)}getMaxOverflow(){let $=this._cachedMeta,Q=$.data||[];if(!this.options.showLine){let X=0;for(let K=Q.length-1;K>=0;--K)X=Math.max(X,Q[K].size(this.resolveDataElementOptions(K))/2);return X>0&&X}let J=$.dataset,Z=J.options&&J.options.borderWidth||0;if(!Q.length)return Z;let q=Q[0].size(this.resolveDataElementOptions(0)),G=Q[Q.length-1].size(this.resolveDataElementOptions(Q.length-1));return Math.max(Z,q,G)/2}};mZ=Object.freeze({__proto__:null,BarController:k7,BubbleController:b7,DoughnutController:_9,LineController:y7,PieController:v7,PolarAreaController:s8,RadarController:h7,ScatterController:f7});uZ={_date:x7};pZ={evaluateInteractionItems:R9,modes:{index($,Q,J,Z){let q=y1(Q,$),G=J.axis||"x",X=J.includeInvisible||!1,K=J.intersect?L7($,q,G,Z,X):F7($,q,G,!1,Z,X),Y=[];if(!K.length)return[];return $.getSortedVisibleDatasetMetas().forEach((U)=>{let N=K[0].index,H=U.data[N];if(H&&!H.skip)Y.push({element:H,datasetIndex:U.index,index:N})}),Y},dataset($,Q,J,Z){let q=y1(Q,$),G=J.axis||"xy",X=J.includeInvisible||!1,K=J.intersect?L7($,q,G,Z,X):F7($,q,G,!1,Z,X);if(K.length>0){let Y=K[0].datasetIndex,U=$.getDatasetMeta(Y).data;K=[];for(let N=0;N<U.length;++N)K.push({element:U[N],datasetIndex:Y,index:N})}return K},point($,Q,J,Z){let q=y1(Q,$),G=J.axis||"xy",X=J.includeInvisible||!1;return L7($,q,G,Z,X)},nearest($,Q,J,Z){let q=y1(Q,$),G=J.axis||"xy",X=J.includeInvisible||!1;return F7($,q,G,J.intersect,Z,X)},x($,Q,J,Z){let q=y1(Q,$);return sJ($,q,"x",J.intersect,Z)},y($,Q,J,Z){let q=y1(Q,$);return sJ($,q,"y",J.intersect,Z)}}},dZ=["left","top","right","bottom"];E0={addBox($,Q){if(!$.boxes)$.boxes=[];Q.fullSize=Q.fullSize||!1,Q.position=Q.position||"top",Q.weight=Q.weight||0,Q._layers=Q._layers||function(){return[{z:0,draw(J){Q.draw(J)}}]},$.boxes.push(Q)},removeBox($,Q){let J=$.boxes?$.boxes.indexOf(Q):-1;if(J!==-1)$.boxes.splice(J,1)},configure($,Q,J){Q.fullSize=J.fullSize,Q.position=J.position,Q.weight=J.weight},update($,Q,J,Z){if(!$)return;let q=w0($.options.layout.padding),G=Math.max(Q-q.width,0),X=Math.max(J-q.height,0),K=fK($.boxes),Y=K.vertical,U=K.horizontal;i($.boxes,(L)=>{if(typeof L.beforeLayout==="function")L.beforeLayout()});let N=Y.reduce((L,W)=>W.box.options&&W.box.options.display===!1?L:L+1,0)||1,H=Object.freeze({outerWidth:Q,outerHeight:J,padding:q,availableWidth:G,availableHeight:X,vBoxMaxWidth:G/2/N,hBoxMaxHeight:X/2}),M=Object.assign({},q);cZ(M,w0(Z));let B=Object.assign({maxPadding:M,w:G,h:X,x:q.left,y:q.top},q),j=hK(Y.concat(U),H);if(M9(K.fullSize,B,H,j),M9(Y,B,H,j),M9(U,B,H,j))M9(Y,B,H,j);gK(B),iJ(K.leftAndTop,B,H,j),B.x+=B.w,B.y+=B.h,iJ(K.rightAndBottom,B,H,j),$.chartArea={left:B.left,top:B.top,right:B.left+B.w,bottom:B.top+B.h,height:B.h,width:B.w},i(K.chartArea,(L)=>{let W=L.box;Object.assign(W,$.chartArea),W.update(B.w,B.h,{left:0,top:0,right:0,bottom:0})})}};g7=class g7 extends o8{acquireContext($){return $&&$.getContext&&$.getContext("2d")||null}updateConfig($){$.options.animation=!1}};uK={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};lZ=kJ?{passive:!0}:!1;j9=new Map;m7=class m7 extends o8{acquireContext($,Q){let J=$&&$.getContext&&$.getContext("2d");if(J&&J.canvas===$)return pK($,Q),J;return null}releaseContext($){let Q=$.canvas;if(!Q[p8])return!1;let J=Q[p8].initial;["height","width"].forEach((q)=>{let G=J[q];if(u(G))Q.removeAttribute(q);else Q.setAttribute(q,G)});let Z=J.style||{};return Object.keys(Z).forEach((q)=>{Q.style[q]=Z[q]}),Q.width=Q.width,delete Q[p8],!0}addEventListener($,Q,J){this.removeEventListener($,Q);let Z=$.$proxies||($.$proxies={}),G={attach:rK,detach:sK,resize:iK}[Q]||aK;Z[Q]=G($,Q,J)}removeEventListener($,Q){let J=$.$proxies||($.$proxies={}),Z=J[Q];if(!Z)return;({attach:V7,detach:V7,resize:V7}[Q]||cK)($,Q,Z),J[Q]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize($,Q,J,Z){return SJ($,Q,J,Z)}isAttached($){let Q=$&&y8($);return!!(Q&&Q.isConnected)}};s0=class s0{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition($){let{x:Q,y:J}=this.getProps(["x","y"],$);return{x:Q,y:J}}hasValue(){return $5(this.x)&&$5(this.y)}getProps($,Q){let J=this.$animations;if(!Q||!J)return this;let Z={};return $.forEach((q)=>{Z[q]=J[q]&&J[q].active()?J[q]._to:this[q]}),Z}};h1=class h1 extends s0{constructor($){super();this.id=$.id,this.type=$.type,this.options=void 0,this.ctx=$.ctx,this.chart=$.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init($){this.options=$.setContext(this.getContext()),this.axis=$.axis,this._userMin=this.parse($.min),this._userMax=this.parse($.max),this._suggestedMin=this.parse($.suggestedMin),this._suggestedMax=this.parse($.suggestedMax)}parse($,Q){return $}getUserBounds(){let{_userMin:$,_userMax:Q,_suggestedMin:J,_suggestedMax:Z}=this;return $=O0($,Number.POSITIVE_INFINITY),Q=O0(Q,Number.NEGATIVE_INFINITY),J=O0(J,Number.POSITIVE_INFINITY),Z=O0(Z,Number.NEGATIVE_INFINITY),{min:O0($,J),max:O0(Q,Z),minDefined:Y0($),maxDefined:Y0(Q)}}getMinMax($){let{min:Q,max:J,minDefined:Z,maxDefined:q}=this.getUserBounds(),G;if(Z&&q)return{min:Q,max:J};let X=this.getMatchingVisibleMetas();for(let K=0,Y=X.length;K<Y;++K){if(G=X[K].controller.getMinMax(this,$),!Z)Q=Math.min(Q,G.min);if(!q)J=Math.max(J,G.max)}return Q=q&&Q>J?J:Q,J=Z&&Q>J?Q:J,{min:O0(Q,O0(J,Q)),max:O0(J,O0(Q,J))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let $=this.chart.data;return this.options.labels||(this.isHorizontal()?$.xLabels:$.yLabels)||$.labels||[]}getLabelItems($=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems($))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$0(this.options.beforeUpdate,[this])}update($,Q,J){let{beginAtZero:Z,grace:q,ticks:G}=this.options,X=G.sampleSize;if(this.beforeUpdate(),this.maxWidth=$,this.maxHeight=Q,this._margins=J=Object.assign({left:0,right:0,top:0,bottom:0},J),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+J.left+J.right:this.height+J.top+J.bottom,!this._dataLimitsCached)this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=TJ(this,q,Z),this._dataLimitsCached=!0;this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let K=X<this.ticks.length;if(this._convertTicksToLabels(K?QZ(this.ticks,X):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),G.display&&(G.autoSkip||G.source==="auto"))this.ticks=tK(this,this.ticks),this._labelSizes=null,this.afterAutoSkip();if(K)this._convertTicksToLabels(this.ticks);this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let $=this.options.reverse,Q,J;if(this.isHorizontal())Q=this.left,J=this.right;else Q=this.top,J=this.bottom,$=!$;this._startPixel=Q,this._endPixel=J,this._reversePixels=$,this._length=J-Q,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$0(this.options.afterUpdate,[this])}beforeSetDimensions(){$0(this.options.beforeSetDimensions,[this])}setDimensions(){if(this.isHorizontal())this.width=this.maxWidth,this.left=0,this.right=this.width;else this.height=this.maxHeight,this.top=0,this.bottom=this.height;this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$0(this.options.afterSetDimensions,[this])}_callHooks($){this.chart.notifyPlugins($,this.getContext()),$0(this.options[$],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$0(this.options.beforeTickToLabelConversion,[this])}generateTickLabels($){let Q=this.options.ticks,J,Z,q;for(J=0,Z=$.length;J<Z;J++)q=$[J],q.label=$0(Q.callback,[q.value,J,$],this)}afterTickToLabelConversion(){$0(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$0(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let $=this.options,Q=$.ticks,J=$Z(this.ticks.length,$.ticks.maxTicksLimit),Z=Q.minRotation||0,q=Q.maxRotation,G=Z,X,K,Y;if(!this._isVisible()||!Q.display||Z>=q||J<=1||!this.isHorizontal()){this.labelRotation=Z;return}let U=this._getLabelSizes(),N=U.widest.width,H=U.highest.height,M=L0(this.chart.width-N,0,this.maxWidth);if(X=$.offset?this.maxWidth/J:M/(J-1),N+6>X)X=M/(J-($.offset?0.5:1)),K=this.maxHeight-N9($.grid)-Q.padding-JZ($.title,this.chart.options.font),Y=Math.sqrt(N*N+H*H),G=C8(Math.min(Math.asin(L0((U.highest.height+6)/X,-1,1)),Math.asin(L0(K/Y,-1,1))-Math.asin(L0(H/Y,-1,1)))),G=Math.max(Z,Math.min(q,G));this.labelRotation=G}afterCalculateLabelRotation(){$0(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$0(this.options.beforeFit,[this])}fit(){let $={width:0,height:0},{chart:Q,options:{ticks:J,title:Z,grid:q}}=this,G=this._isVisible(),X=this.isHorizontal();if(G){let K=JZ(Z,Q.options.font);if(X)$.width=this.maxWidth,$.height=N9(q)+K;else $.height=this.maxHeight,$.width=N9(q)+K;if(J.display&&this.ticks.length){let{first:Y,last:U,widest:N,highest:H}=this._getLabelSizes(),M=J.padding*2,B=x0(this.labelRotation),j=Math.cos(B),L=Math.sin(B);if(X){let W=J.mirror?0:L*N.width+j*H.height;$.height=Math.min(this.maxHeight,$.height+W+M)}else{let W=J.mirror?0:j*N.width+L*H.height;$.width=Math.min(this.maxWidth,$.width+W+M)}this._calculatePadding(Y,U,L,j)}}if(this._handleMargins(),X)this.width=this._length=Q.width-this._margins.left-this._margins.right,this.height=$.height;else this.width=$.width,this.height=this._length=Q.height-this._margins.top-this._margins.bottom}_calculatePadding($,Q,J,Z){let{ticks:{align:q,padding:G},position:X}=this.options,K=this.labelRotation!==0,Y=X!=="top"&&this.axis==="x";if(this.isHorizontal()){let U=this.getPixelForTick(0)-this.left,N=this.right-this.getPixelForTick(this.ticks.length-1),H=0,M=0;if(K)if(Y)H=Z*$.width,M=J*Q.height;else H=J*$.height,M=Z*Q.width;else if(q==="start")M=Q.width;else if(q==="end")H=$.width;else if(q!=="inner")H=$.width/2,M=Q.width/2;this.paddingLeft=Math.max((H-U+G)*this.width/(this.width-U),0),this.paddingRight=Math.max((M-N+G)*this.width/(this.width-N),0)}else{let U=Q.height/2,N=$.height/2;if(q==="start")U=0,N=$.height;else if(q==="end")U=Q.height,N=0;this.paddingTop=U+G,this.paddingBottom=N+G}}_handleMargins(){if(this._margins)this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom)}afterFit(){$0(this.options.afterFit,[this])}isHorizontal(){let{axis:$,position:Q}=this.options;return Q==="top"||Q==="bottom"||$==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels($){this.beforeTickToLabelConversion(),this.generateTickLabels($);let Q,J;for(Q=0,J=$.length;Q<J;Q++)if(u($[Q].label))$.splice(Q,1),J--,Q--;this.afterTickToLabelConversion()}_getLabelSizes(){let $=this._labelSizes;if(!$){let Q=this.options.ticks.sampleSize,J=this.ticks;if(Q<J.length)J=QZ(J,Q);this._labelSizes=$=this._computeLabelSizes(J,J.length,this.options.ticks.maxTicksLimit)}return $}_computeLabelSizes($,Q,J){let{ctx:Z,_longestTextCache:q}=this,G=[],X=[],K=Math.floor(Q/$Z(Q,J)),Y=0,U=0,N,H,M,B,j,L,W,V,_,D,E;for(N=0;N<Q;N+=K){if(B=$[N].label,j=this._resolveTickFontOptions(N),Z.font=L=j.string,W=q[L]=q[L]||{data:{},gc:[]},V=j.lineHeight,_=D=0,!u(B)&&!J0(B))_=Z9(Z,W.data,W.gc,_,B),D=V;else if(J0(B)){for(H=0,M=B.length;H<M;++H)if(E=B[H],!u(E)&&!J0(E))_=Z9(Z,W.data,W.gc,_,E),D+=V}G.push(_),X.push(D),Y=Math.max(_,Y),U=Math.max(D,U)}X3(q,Q);let w=G.indexOf(Y),P=X.indexOf(U),T=(A)=>({width:G[A]||0,height:X[A]||0});return{first:T(0),last:T(Q-1),widest:T(w),highest:T(P),widths:G,heights:X}}getLabelForValue($){return $}getPixelForValue($,Q){return NaN}getValueForPixel($){}getPixelForTick($){let Q=this.ticks;if($<0||$>Q.length-1)return null;return this.getPixelForValue(Q[$].value)}getPixelForDecimal($){if(this._reversePixels)$=1-$;let Q=this._startPixel+$*this._length;return BJ(this._alignToPixels?S1(this.chart,Q,0):Q)}getDecimalForPixel($){let Q=($-this._startPixel)/this._length;return this._reversePixels?1-Q:Q}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:$,max:Q}=this;return $<0&&Q<0?Q:$>0&&Q>0?$:0}getContext($){let Q=this.ticks||[];if($>=0&&$<Q.length){let J=Q[$];return J.$context||(J.$context=Y3(this.getContext(),$,J))}return this.$context||(this.$context=K3(this.chart.getContext(),this))}_tickSize(){let $=this.options.ticks,Q=x0(this.labelRotation),J=Math.abs(Math.cos(Q)),Z=Math.abs(Math.sin(Q)),q=this._getLabelSizes(),G=$.autoSkipPadding||0,X=q?q.widest.width+G:0,K=q?q.highest.height+G:0;return this.isHorizontal()?K*J>X*Z?X/J:K/Z:K*Z<X*J?K/J:X/Z}_isVisible(){let $=this.options.display;if($!=="auto")return!!$;return this.getMatchingVisibleMetas().length>0}_computeGridLineItems($){let Q=this.axis,J=this.chart,Z=this.options,{grid:q,position:G,border:X}=Z,K=q.offset,Y=this.isHorizontal(),N=this.ticks.length+(K?1:0),H=N9(q),M=[],B=X.setContext(this.getContext()),j=B.display?B.width:0,L=j/2,W=function(t){return S1(J,t,j)},V,_,D,E,w,P,T,A,z,g,x,X0;if(G==="top")V=W(this.bottom),P=this.bottom-H,A=V-L,g=W($.top)+L,X0=$.bottom;else if(G==="bottom")V=W(this.top),g=$.top,X0=W($.bottom)-L,P=V+L,A=this.top+H;else if(G==="left")V=W(this.right),w=this.right-H,T=V-L,z=W($.left)+L,x=$.right;else if(G==="right")V=W(this.left),z=$.left,x=W($.right)-L,w=V+L,T=this.left+H;else if(Q==="x"){if(G==="center")V=W(($.top+$.bottom)/2+0.5);else if(p(G)){let t=Object.keys(G)[0],U0=G[t];V=W(this.chart.scales[t].getPixelForValue(U0))}g=$.top,X0=$.bottom,P=V+L,A=P+H}else if(Q==="y"){if(G==="center")V=W(($.left+$.right)/2);else if(p(G)){let t=Object.keys(G)[0],U0=G[t];V=W(this.chart.scales[t].getPixelForValue(U0))}w=V-L,T=w-H,z=$.left,x=$.right}let D0=h(Z.ticks.maxTicksLimit,N),e=Math.max(1,Math.ceil(N/D0));for(_=0;_<N;_+=e){let t=this.getContext(_),U0=q.setContext(t),P0=X.setContext(t),A0=U0.lineWidth,W0=U0.color,R=P0.dash||[],F=P0.dashOffset,I=U0.tickWidth,S=U0.tickColor,v=U0.tickBorderDash||[],b=U0.tickBorderDashOffset;if(D=G3(this,_,K),D===void 0)continue;if(E=S1(J,D,A0),Y)w=T=z=x=E;else P=A=g=X0=E;M.push({tx1:w,ty1:P,tx2:T,ty2:A,x1:z,y1:g,x2:x,y2:X0,width:A0,color:W0,borderDash:R,borderDashOffset:F,tickWidth:I,tickColor:S,tickBorderDash:v,tickBorderDashOffset:b})}return this._ticksLength=N,this._borderValue=V,M}_computeLabelItems($){let Q=this.axis,J=this.options,{position:Z,ticks:q}=J,G=this.isHorizontal(),X=this.ticks,{align:K,crossAlign:Y,padding:U,mirror:N}=q,H=N9(J.grid),M=H+U,B=N?-U:M,j=-x0(this.labelRotation),L=[],W,V,_,D,E,w,P,T,A,z,g,x,X0="middle";if(Z==="top")w=this.bottom-B,P=this._getXAxisLabelAlignment();else if(Z==="bottom")w=this.top+B,P=this._getXAxisLabelAlignment();else if(Z==="left"){let e=this._getYAxisLabelAlignment(H);P=e.textAlign,E=e.x}else if(Z==="right"){let e=this._getYAxisLabelAlignment(H);P=e.textAlign,E=e.x}else if(Q==="x"){if(Z==="center")w=($.top+$.bottom)/2+M;else if(p(Z)){let e=Object.keys(Z)[0],t=Z[e];w=this.chart.scales[e].getPixelForValue(t)+M}P=this._getXAxisLabelAlignment()}else if(Q==="y"){if(Z==="center")E=($.left+$.right)/2-M;else if(p(Z)){let e=Object.keys(Z)[0],t=Z[e];E=this.chart.scales[e].getPixelForValue(t)}P=this._getYAxisLabelAlignment(H).textAlign}if(Q==="y"){if(K==="start")X0="top";else if(K==="end")X0="bottom"}let D0=this._getLabelSizes();for(W=0,V=X.length;W<V;++W){_=X[W],D=_.label;let e=q.setContext(this.getContext(W));T=this.getPixelForTick(W)+q.labelOffset,A=this._resolveTickFontOptions(W),z=A.lineHeight,g=J0(D)?D.length:1;let t=g/2,U0=e.color,P0=e.textStrokeColor,A0=e.textStrokeWidth,W0=P;if(G){if(E=T,P==="inner")if(W===V-1)W0=!this.options.reverse?"right":"left";else if(W===0)W0=!this.options.reverse?"left":"right";else W0="center";if(Z==="top")if(Y==="near"||j!==0)x=-g*z+z/2;else if(Y==="center")x=-D0.highest.height/2-t*z+z;else x=-D0.highest.height+z/2;else if(Y==="near"||j!==0)x=z/2;else if(Y==="center")x=D0.highest.height/2-t*z;else x=D0.highest.height-g*z;if(N)x*=-1;if(j!==0&&!e.showLabelBackdrop)E+=z/2*Math.sin(j)}else w=T,x=(1-g)*z/2;let R;if(e.showLabelBackdrop){let F=w0(e.backdropPadding),I=D0.heights[W],S=D0.widths[W],v=x-F.top,b=0-F.left;switch(X0){case"middle":v-=I/2;break;case"bottom":v-=I;break}switch(P){case"center":b-=S/2;break;case"right":b-=S;break;case"inner":if(W===V-1)b-=S;else if(W>0)b-=S/2;break}R={left:b,top:v,width:S+F.width,height:I+F.height,color:e.backdropColor}}L.push({label:D,font:A,textOffset:x,options:{rotation:j,color:U0,strokeColor:P0,strokeWidth:A0,textAlign:W0,textBaseline:X0,translation:[E,w],backdrop:R}})}return L}_getXAxisLabelAlignment(){let{position:$,ticks:Q}=this.options;if(-x0(this.labelRotation))return $==="top"?"left":"right";let Z="center";if(Q.align==="start")Z="left";else if(Q.align==="end")Z="right";else if(Q.align==="inner")Z="inner";return Z}_getYAxisLabelAlignment($){let{position:Q,ticks:{crossAlign:J,mirror:Z,padding:q}}=this.options,G=this._getLabelSizes(),X=$+q,K=G.widest.width,Y,U;if(Q==="left")if(Z)if(U=this.right+q,J==="near")Y="left";else if(J==="center")Y="center",U+=K/2;else Y="right",U+=K;else if(U=this.right-X,J==="near")Y="right";else if(J==="center")Y="center",U-=K/2;else Y="left",U=this.left;else if(Q==="right")if(Z)if(U=this.left+q,J==="near")Y="right";else if(J==="center")Y="center",U-=K/2;else Y="left",U-=K;else if(U=this.left+X,J==="near")Y="left";else if(J==="center")Y="center",U+=K/2;else Y="right",U=this.right;else Y="right";return{textAlign:Y,x:U}}_computeLabelArea(){if(this.options.ticks.mirror)return;let $=this.chart,Q=this.options.position;if(Q==="left"||Q==="right")return{top:0,left:this.left,bottom:$.height,right:this.right};if(Q==="top"||Q==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:$.width}}drawBackground(){let{ctx:$,options:{backgroundColor:Q},left:J,top:Z,width:q,height:G}=this;if(Q)$.save(),$.fillStyle=Q,$.fillRect(J,Z,q,G),$.restore()}getLineWidthForValue($){let Q=this.options.grid;if(!this._isVisible()||!Q.display)return 0;let Z=this.ticks.findIndex((q)=>q.value===$);if(Z>=0)return Q.setContext(this.getContext(Z)).lineWidth;return 0}drawGrid($){let Q=this.options.grid,J=this.ctx,Z=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems($)),q,G,X=(K,Y,U)=>{if(!U.width||!U.color)return;J.save(),J.lineWidth=U.width,J.strokeStyle=U.color,J.setLineDash(U.borderDash||[]),J.lineDashOffset=U.borderDashOffset,J.beginPath(),J.moveTo(K.x,K.y),J.lineTo(Y.x,Y.y),J.stroke(),J.restore()};if(Q.display)for(q=0,G=Z.length;q<G;++q){let K=Z[q];if(Q.drawOnChartArea)X({x:K.x1,y:K.y1},{x:K.x2,y:K.y2},K);if(Q.drawTicks)X({x:K.tx1,y:K.ty1},{x:K.tx2,y:K.ty2},{color:K.tickColor,width:K.tickWidth,borderDash:K.tickBorderDash,borderDashOffset:K.tickBorderDashOffset})}}drawBorder(){let{chart:$,ctx:Q,options:{border:J,grid:Z}}=this,q=J.setContext(this.getContext()),G=J.display?q.width:0;if(!G)return;let X=Z.setContext(this.getContext(0)).lineWidth,K=this._borderValue,Y,U,N,H;if(this.isHorizontal())Y=S1($,this.left,G)-G/2,U=S1($,this.right,X)+X/2,N=H=K;else N=S1($,this.top,G)-G/2,H=S1($,this.bottom,X)+X/2,Y=U=K;Q.save(),Q.lineWidth=q.width,Q.strokeStyle=q.color,Q.beginPath(),Q.moveTo(Y,N),Q.lineTo(U,H),Q.stroke(),Q.restore()}drawLabels($){if(!this.options.ticks.display)return;let J=this.ctx,Z=this._computeLabelArea();if(Z)G9(J,Z);let q=this.getLabelItems($);for(let G of q){let{options:X,font:K,label:Y,textOffset:U}=G;k1(J,Y,0,U,K,X)}if(Z)X9(J)}drawTitle(){let{ctx:$,options:{position:Q,title:J,reverse:Z}}=this;if(!J.display)return;let q=j0(J.font),G=w0(J.padding),X=J.align,K=q.lineHeight/2;if(Q==="bottom"||Q==="center"||p(Q)){if(K+=G.bottom,J0(J.text))K+=q.lineHeight*(J.text.length-1)}else K+=G.top;let{titleX:Y,titleY:U,maxWidth:N,rotation:H}=N3(this,K,Q,X);k1($,J.text,0,0,q,{color:J.color,maxWidth:N,rotation:H,textAlign:U3(X,Q,Z),textBaseline:"middle",translation:[Y,U]})}draw($){if(!this._isVisible())return;this.drawBackground(),this.drawGrid($),this.drawBorder(),this.drawTitle(),this.drawLabels($)}_layers(){let $=this.options,Q=$.ticks&&$.ticks.z||0,J=h($.grid&&$.grid.z,-1),Z=h($.border&&$.border.z,0);if(!this._isVisible()||this.draw!==h1.prototype.draw)return[{z:Q,draw:(q)=>{this.draw(q)}}];return[{z:J,draw:(q)=>{this.drawBackground(),this.drawGrid(q),this.drawTitle()}},{z:Z,draw:()=>{this.drawBorder()}},{z:Q,draw:(q)=>{this.drawLabels(q)}}]}getMatchingVisibleMetas($){let Q=this.chart.getSortedVisibleDatasetMetas(),J=this.axis+"AxisID",Z=[],q,G;for(q=0,G=Q.length;q<G;++q){let X=Q[q];if(X[J]===this.id&&(!$||X.type===$))Z.push(X)}return Z}_resolveTickFontOptions($){let Q=this.options.ticks.setContext(this.getContext($));return j0(Q.font)}_maxDigits(){let $=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/$}};r0=new oZ;GZ=new Map,tZ=new Set;O3=["top","bottom","left","right","chartArea"];d8={};u7=class u7{static defaults=q0;static instances=d8;static overrides=A1;static registry=r0;static version=C3;static getChart=NZ;static register(...$){r0.add(...$),HZ()}static unregister(...$){r0.remove(...$),HZ()}constructor($,Q){let J=this.config=new eZ(Q),Z=$2($),q=NZ(Z);if(q)throw Error("Canvas is already in use. Chart with ID '"+q.id+"' must be destroyed before the canvas with ID '"+q.canvas.id+"' can be reused.");let G=J.createResolver(J.chartOptionScopes(),this.getContext());this.platform=new(J.platform||sZ(Z)),this.platform.updateConfig(J);let X=this.platform.acquireContext(Z,G.aspectRatio),K=X&&X.canvas,Y=K&&K.height,U=K&&K.width;if(this.id=KJ(),this.ctx=X,this.canvas=K,this.width=U,this.height=Y,this._options=G,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nZ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=VJ((N)=>this.update(N),G.resizeDelay||0),this._dataChanges=[],d8[this.id]=this,!X||!K){console.error("Failed to create chart: can't acquire context from the given item");return}if(J1.listen(this,"complete",UZ),J1.listen(this,"progress",z3),this._initialize(),this.attached)this.update()}get aspectRatio(){let{options:{aspectRatio:$,maintainAspectRatio:Q},width:J,height:Z,_aspectRatio:q}=this;if(!u($))return $;if(Q&&q)return q;return Z?J/Z:null}get data(){return this.config.data}set data($){this.config.data=$}get options(){return this._options}set options($){this.config.options=$}get registry(){return r0}_initialize(){if(this.notifyPlugins("beforeInit"),this.options.responsive)this.resize();else G7(this,this.options.devicePixelRatio);return this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return t4(this.canvas,this.ctx),this}stop(){return J1.stop(this),this}resize($,Q){if(!J1.running(this))this._resize($,Q);else this._resizeBeforeDraw={width:$,height:Q}}_resize($,Q){let J=this.options,Z=this.canvas,q=J.maintainAspectRatio&&this.aspectRatio,G=this.platform.getMaximumSize(Z,$,Q,q),X=J.devicePixelRatio||this.platform.getDevicePixelRatio(),K=this.width?"resize":"attach";if(this.width=G.width,this.height=G.height,this._aspectRatio=this.aspectRatio,!G7(this,X,!0))return;if(this.notifyPlugins("resize",{size:G}),$0(J.onResize,[this,G],this),this.attached){if(this._doResize(K))this.render()}}ensureScalesHaveIDs(){let Q=this.options.scales||{};i(Q,(J,Z)=>{J.id=Z})}buildOrUpdateScales(){let $=this.options,Q=$.scales,J=this.scales,Z=Object.keys(J).reduce((G,X)=>{return G[X]=!1,G},{}),q=[];if(Q)q=q.concat(Object.keys(Q).map((G)=>{let X=Q[G],K=P7(G,X),Y=K==="r",U=K==="x";return{options:X,dposition:Y?"chartArea":U?"bottom":"left",dtype:Y?"radialLinear":U?"category":"linear"}}));i(q,(G)=>{let X=G.options,K=X.id,Y=P7(K,X),U=h(X.type,G.dtype);if(X.position===void 0||KZ(X.position,Y)!==KZ(G.dposition))X.position=G.dposition;Z[K]=!0;let N=null;if(K in J&&J[K].type===U)N=J[K];else N=new(r0.getScale(U))({id:K,type:U,ctx:this.ctx,chart:this}),J[N.id]=N;N.init(X,$)}),i(Z,(G,X)=>{if(!G)delete J[X]}),i(J,(G)=>{E0.configure(this,G,G.options),E0.addBox(this,G)})}_updateMetasets(){let $=this._metasets,Q=this.data.datasets.length,J=$.length;if($.sort((Z,q)=>Z.index-q.index),J>Q){for(let Z=Q;Z<J;++Z)this._destroyDatasetMeta(Z);$.splice(Q,J-Q)}this._sortedMetasets=$.slice(0).sort(YZ("order","index"))}_removeUnreferencedMetasets(){let{_metasets:$,data:{datasets:Q}}=this;if($.length>Q.length)delete this._stacks;$.forEach((J,Z)=>{if(Q.filter((q)=>q===J._dataset).length===0)this._destroyDatasetMeta(Z)})}buildOrUpdateControllers(){let $=[],Q=this.data.datasets,J,Z;this._removeUnreferencedMetasets();for(J=0,Z=Q.length;J<Z;J++){let q=Q[J],G=this.getDatasetMeta(J),X=q.type||this.config.type;if(G.type&&G.type!==X)this._destroyDatasetMeta(J),G=this.getDatasetMeta(J);if(G.type=X,G.indexAxis=q.indexAxis||D7(X,this.options),G.order=q.order||0,G.index=J,G.label=""+q.label,G.visible=this.isDatasetVisible(J),G.controller)G.controller.updateIndex(J),G.controller.linkScales();else{let K=r0.getController(X),{datasetElementType:Y,dataElementType:U}=q0.datasets[X];Object.assign(K,{dataElementType:r0.getElement(U),datasetElementType:Y&&r0.getElement(Y)}),G.controller=new K(this,J),$.push(G.controller)}}return this._updateMetasets(),$}_resetElements(){i(this.data.datasets,($,Q)=>{this.getDatasetMeta(Q).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update($){let Q=this.config;Q.update();let J=this._options=Q.createResolver(Q.chartOptionScopes(),this.getContext()),Z=this._animationsDisabled=!J.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:$,cancelable:!0})===!1)return;let q=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let G=0;for(let Y=0,U=this.data.datasets.length;Y<U;Y++){let{controller:N}=this.getDatasetMeta(Y),H=!Z&&q.indexOf(N)===-1;N.buildOrUpdateElements(H),G=Math.max(+N.getMaxOverflow(),G)}if(G=this._minPadding=J.layout.autoPadding?G:0,this._updateLayout(G),!Z)i(q,(Y)=>{Y.reset()});this._updateDatasets($),this.notifyPlugins("afterUpdate",{mode:$}),this._layers.sort(YZ("z","_idx"));let{_active:X,_lastEvent:K}=this;if(K)this._eventHandler(K,!0);else if(X.length)this._updateHoverStyles(X,X,!0);this.render()}_updateScales(){i(this.scales,($)=>{E0.removeBox(this,$)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let $=this.options,Q=new Set(Object.keys(this._listeners)),J=new Set($.events);if(!g4(Q,J)||!!this._responsiveListeners!==$.responsive)this.unbindEvents(),this.bindEvents()}_updateHiddenIndices(){let{_hiddenIndices:$}=this,Q=this._getUniformDataChanges()||[];for(let{method:J,start:Z,count:q}of Q){let G=J==="_removeElements"?-q:q;I3($,Z,G)}}_getUniformDataChanges(){let $=this._dataChanges;if(!$||!$.length)return;this._dataChanges=[];let Q=this.data.datasets.length,J=(q)=>new Set($.filter((G)=>G[0]===q).map((G,X)=>X+","+G.splice(1).join(","))),Z=J(0);for(let q=1;q<Q;q++)if(!g4(Z,J(q)))return;return Array.from(Z).map((q)=>q.split(",")).map((q)=>({method:q[1],start:+q[2],count:+q[3]}))}_updateLayout($){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;E0.update(this,this.width,this.height,$);let Q=this.chartArea,J=Q.width<=0||Q.height<=0;this._layers=[],i(this.boxes,(Z)=>{if(J&&Z.position==="chartArea")return;if(Z.configure)Z.configure();this._layers.push(...Z._layers())},this),this._layers.forEach((Z,q)=>{Z._idx=q}),this.notifyPlugins("afterLayout")}_updateDatasets($){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:$,cancelable:!0})===!1)return;for(let Q=0,J=this.data.datasets.length;Q<J;++Q)this.getDatasetMeta(Q).controller.configure();for(let Q=0,J=this.data.datasets.length;Q<J;++Q)this._updateDataset(Q,j1($)?$({datasetIndex:Q}):$);this.notifyPlugins("afterDatasetsUpdate",{mode:$})}_updateDataset($,Q){let J=this.getDatasetMeta($),Z={meta:J,index:$,mode:Q,cancelable:!0};if(this.notifyPlugins("beforeDatasetUpdate",Z)===!1)return;J.controller._update(Q),Z.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",Z)}render(){if(this.notifyPlugins("beforeRender",{cancelable:!0})===!1)return;if(J1.has(this)){if(this.attached&&!J1.running(this))J1.start(this)}else this.draw(),UZ({chart:this})}draw(){let $;if(this._resizeBeforeDraw){let{width:J,height:Z}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(J,Z)}if(this.clear(),this.width<=0||this.height<=0)return;if(this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let Q=this._layers;for($=0;$<Q.length&&Q[$].z<=0;++$)Q[$].draw(this.chartArea);this._drawDatasets();for(;$<Q.length;++$)Q[$].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas($){let Q=this._sortedMetasets,J=[],Z,q;for(Z=0,q=Q.length;Z<q;++Z){let G=Q[Z];if(!$||G.visible)J.push(G)}return J}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let $=this.getSortedVisibleDatasetMetas();for(let Q=$.length-1;Q>=0;--Q)this._drawDataset($[Q]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset($){let Q=this.ctx,J={meta:$,index:$.index,cancelable:!0},Z=H7(this,$);if(this.notifyPlugins("beforeDatasetDraw",J)===!1)return;if(Z)G9(Q,Z);if($.controller.draw(),Z)X9(Q);J.cancelable=!1,this.notifyPlugins("afterDatasetDraw",J)}isPointInArea($){return t0($,this.chartArea,this._minPadding)}getElementsAtEventForMode($,Q,J,Z){let q=pZ.modes[Q];if(typeof q==="function")return q(this,$,J,Z);return[]}getDatasetMeta($){let Q=this.data.datasets[$],J=this._metasets,Z=J.filter((q)=>q&&q._dataset===Q).pop();if(!Z)Z={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:Q&&Q.order||0,index:$,_dataset:Q,_parsed:[],_sorted:!1},J.push(Z);return Z}getContext(){return this.$context||(this.$context=V1(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible($){let Q=this.data.datasets[$];if(!Q)return!1;let J=this.getDatasetMeta($);return typeof J.hidden==="boolean"?!J.hidden:!Q.hidden}setDatasetVisibility($,Q){let J=this.getDatasetMeta($);J.hidden=!Q}toggleDataVisibility($){this._hiddenIndices[$]=!this._hiddenIndices[$]}getDataVisibility($){return!this._hiddenIndices[$]}_updateVisibility($,Q,J){let Z=J?"show":"hide",q=this.getDatasetMeta($),G=q.controller._resolveAnimations(void 0,Z);if(O5(Q))q.data[Q].hidden=!J,this.update();else this.setDatasetVisibility($,J),G.update(q,{visible:J}),this.update((X)=>X.datasetIndex===$?Z:void 0)}hide($,Q){this._updateVisibility($,Q,!1)}show($,Q){this._updateVisibility($,Q,!0)}_destroyDatasetMeta($){let Q=this._metasets[$];if(Q&&Q.controller)Q.controller._destroy();delete this._metasets[$]}_stop(){let $,Q;this.stop(),J1.remove(this);for($=0,Q=this.data.datasets.length;$<Q;++$)this._destroyDatasetMeta($)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:$,ctx:Q}=this;if(this._stop(),this.config.clearCache(),$)this.unbindEvents(),t4($,Q),this.platform.releaseContext(Q),this.canvas=null,this.ctx=null;delete d8[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...$){return this.canvas.toDataURL(...$)}bindEvents(){if(this.bindUserEvents(),this.options.responsive)this.bindResponsiveEvents();else this.attached=!0}bindUserEvents(){let $=this._listeners,Q=this.platform,J=(q,G)=>{Q.addEventListener(this,q,G),$[q]=G},Z=(q,G,X)=>{q.offsetX=G,q.offsetY=X,this._eventHandler(q)};i(this.options.events,(q)=>J(q,Z))}bindResponsiveEvents(){if(!this._responsiveListeners)this._responsiveListeners={};let $=this._responsiveListeners,Q=this.platform,J=(K,Y)=>{Q.addEventListener(this,K,Y),$[K]=Y},Z=(K,Y)=>{if($[K])Q.removeEventListener(this,K,Y),delete $[K]},q=(K,Y)=>{if(this.canvas)this.resize(K,Y)},G,X=()=>{Z("attach",X),this.attached=!0,this.resize(),J("resize",q),J("detach",G)};if(G=()=>{this.attached=!1,Z("resize",q),this._stop(),this._resize(0,0),J("attach",X)},Q.isAttached(this.canvas))X();else G()}unbindEvents(){i(this._listeners,($,Q)=>{this.platform.removeEventListener(this,Q,$)}),this._listeners={},i(this._responsiveListeners,($,Q)=>{this.platform.removeEventListener(this,Q,$)}),this._responsiveListeners=void 0}updateHoverStyle($,Q,J){let Z=J?"set":"remove",q,G,X,K;if(Q==="dataset")q=this.getDatasetMeta($[0].datasetIndex),q.controller["_"+Z+"DatasetHoverStyle"]();for(X=0,K=$.length;X<K;++X){G=$[X];let Y=G&&this.getDatasetMeta(G.datasetIndex).controller;if(Y)Y[Z+"HoverStyle"](G.element,G.datasetIndex,G.index)}}getActiveElements(){return this._active||[]}setActiveElements($){let Q=this._active||[],J=$.map(({datasetIndex:q,index:G})=>{let X=this.getDatasetMeta(q);if(!X)throw Error("No dataset found at index "+q);return{datasetIndex:q,element:X.data[G],index:G}});if(!q9(J,Q))this._active=J,this._lastEvent=null,this._updateHoverStyles(J,Q)}notifyPlugins($,Q,J){return this._plugins.notify(this,$,Q,J)}isPluginEnabled($){return this._plugins._cache.filter((Q)=>Q.plugin.id===$).length===1}_updateHoverStyles($,Q,J){let Z=this.options.hover,q=(K,Y)=>K.filter((U)=>!Y.some((N)=>U.datasetIndex===N.datasetIndex&&U.index===N.index)),G=q(Q,$),X=J?$:q($,Q);if(G.length)this.updateHoverStyle(G,Z.mode,!1);if(X.length&&Z.mode)this.updateHoverStyle(X,Z.mode,!0)}_eventHandler($,Q){let J={event:$,replay:Q,cancelable:!0,inChartArea:this.isPointInArea($)},Z=(G)=>(G.options.events||this.options.events).includes($.native.type);if(this.notifyPlugins("beforeEvent",J,Z)===!1)return;let q=this._handleEvent($,Q,J.inChartArea);if(J.cancelable=!1,this.notifyPlugins("afterEvent",J,Z),q||J.changed)this.render();return this}_handleEvent($,Q,J){let{_active:Z=[],options:q}=this,G=Q,X=this._getActiveElements($,Z,J,G),K=NJ($),Y=A3($,this._lastEvent,J,K);if(J){if(this._lastEvent=null,$0(q.onHover,[$,X,this],this),K)$0(q.onClick,[$,X,this],this)}let U=!q9(X,Z);if(U||Q)this._active=X,this._updateHoverStyles(X,Z,Q);return this._lastEvent=Y,U}_getActiveElements($,Q,J,Z){if($.type==="mouseout")return[];if(!J)return Q;let q=this.options.hover;return this.getElementsAtEventForMode($,q.mode,q,Z)}};p7=class p7 extends s0{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:($)=>$!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor($){super();if(this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,$)Object.assign(this,$)}inRange($,Q,J){let Z=this.getProps(["x","y"],J),{angle:q,distance:G}=d4(Z,{x:$,y:Q}),{startAngle:X,endAngle:K,innerRadius:Y,outerRadius:U,circumference:N}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],J),H=(this.options.spacing+this.options.borderWidth)/2,M=h(N,K-X),B=I5(q,X,K)&&X!==K,j=M>=Z0||B,L=$1(G,Y+H,U+H);return j&&L}getCenterPoint($){let{x:Q,y:J,startAngle:Z,endAngle:q,innerRadius:G,outerRadius:X}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],$),{offset:K,spacing:Y}=this.options,U=(Z+q)/2,N=(G+X+Y+K)/2;return{x:Q+Math.cos(U)*N,y:J+Math.sin(U)*N}}tooltipPosition($){return this.getCenterPoint($)}draw($){let{options:Q,circumference:J}=this,Z=(Q.offset||0)/4,q=(Q.spacing||0)/2,G=Q.circular;if(this.pixelMargin=Q.borderAlign==="inner"?0.33:0,this.fullCircles=J>Z0?Math.floor(J/Z0):0,J===0||this.innerRadius<0||this.outerRadius<0)return;$.save();let X=(this.startAngle+this.endAngle)/2;$.translate(Math.cos(X)*Z,Math.sin(X)*Z);let K=1-Math.sin(Math.min(o,J||0)),Y=Z*K;$.fillStyle=Q.backgroundColor,$.strokeStyle=Q.borderColor,v3($,this,Y,q,G),h3($,this,Y,q,G),$.restore()}};c3=typeof Path2D==="function";v5=class v5 extends s0{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:($)=>$!=="borderDash"&&$!=="fill"};constructor($){super();if(this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,$)Object.assign(this,$)}updateControlPoints($,Q){let J=this.options;if((J.tension||J.cubicInterpolationMode==="monotone")&&!J.stepped&&!this._pointsUpdated){let Z=J.spanGaps?this._loop:this._fullLoop;AJ(this._points,J,$,Z,Q),this._pointsUpdated=!0}}set points($){this._points=$,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hJ(this,this.options.segment))}first(){let $=this.segments,Q=this.points;return $.length&&Q[$[0].start]}last(){let $=this.segments,Q=this.points,J=$.length;return J&&Q[$[J-1].end]}interpolate($,Q){let J=this.options,Z=$[Q],q=this.points,G=N7(this,{property:Q,start:Z,end:Z});if(!G.length)return;let X=[],K=u3(J),Y,U;for(Y=0,U=G.length;Y<U;++Y){let{start:N,end:H}=G[Y],M=q[N],B=q[H];if(M===B){X.push(M);continue}let j=Math.abs((Z-M[Q])/(B[Q]-M[Q])),L=K(M,B,j,J.stepped);L[Q]=$[Q],X.push(L)}return X.length===1?X[0]:X}pathSegment($,Q,J){return T7(this)($,this,Q,J)}path($,Q,J){let Z=this.segments,q=T7(this),G=this._loop;Q=Q||0,J=J||this.points.length-Q;for(let X of Z)G&=q($,this,X,{start:Q,end:Q+J-1});return!!G}draw($,Q,J,Z){let q=this.options||{};if((this.points||[]).length&&q.borderWidth)$.save(),l3($,this,J,Z),$.restore();if(this.animated)this._pointsUpdated=!1,this._path=void 0}};d7=class d7 extends s0{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor($){super();if(this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,$)Object.assign(this,$)}inRange($,Q,J){let Z=this.options,{x:q,y:G}=this.getProps(["x","y"],J);return Math.pow($-q,2)+Math.pow(Q-G,2)<Math.pow(Z.hitRadius+Z.radius,2)}inXRange($,Q){return MZ(this,$,"x",Q)}inYRange($,Q){return MZ(this,$,"y",Q)}getCenterPoint($){let{x:Q,y:J}=this.getProps(["x","y"],$);return{x:Q,y:J}}size($){$=$||this.options||{};let Q=$.radius||0;Q=Math.max(Q,Q&&$.hoverRadius||0);let J=Q&&$.borderWidth||0;return(Q+J)*2}draw($,Q){let J=this.options;if(this.skip||J.radius<0.1||!t0(this,Q,this.size(J)/2))return;$.strokeStyle=J.borderColor,$.lineWidth=J.borderWidth,$.fillStyle=J.backgroundColor,A8($,J,this.x,this.y)}getRange(){let $=this.options||{};return $.radius+$.hitRadius}};c7=class c7 extends s0{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor($){super();if(this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,$)Object.assign(this,$)}draw($){let{inflateAmount:Q,options:{borderColor:J,backgroundColor:Z}}=this,{inner:q,outer:G}=o3(this),X=n3(G.radius)?k5:i3;if($.save(),G.w!==q.w||G.h!==q.h)$.beginPath(),X($,R7(G,Q,q)),$.clip(),X($,R7(q,-Q,G)),$.fillStyle=J,$.fill("evenodd");$.beginPath(),X($,R7(q,Q)),$.fillStyle=Z,$.fill(),$.restore()}inRange($,Q,J){return _7(this,$,Q,J)}inXRange($,Q){return _7(this,$,null,Q)}inYRange($,Q){return _7(this,null,$,Q)}getCenterPoint($){let{x:Q,y:J,base:Z,horizontal:q}=this.getProps(["x","y","base","horizontal"],$);return{x:q?(Q+Z)/2:Q,y:q?J:(J+Z)/2}}getRange($){return $==="x"?this.width/2:this.height/2}};q2=Object.freeze({__proto__:null,ArcElement:p7,BarElement:c7,LineElement:v5,PointElement:d7}),C7=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],BZ=C7.map(($)=>$.replace("rgb(","rgba(").replace(")",", 0.5)"));K2={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout($,Q,J){if(!J.enabled)return;let{data:{datasets:Z},options:q}=$.config,{elements:G}=q,X=WZ(Z)||QY(q)||G&&WZ(G)||JY();if(!J.forceOverride&&X)return;let K=$Y($);Z.forEach(K)}};U2={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:($,Q,J)=>{if(!J.enabled){jZ($);return}let Z=$.width;$.data.datasets.forEach((q,G)=>{let{_data:X,indexAxis:K}=q,Y=$.getDatasetMeta(G),U=X||q.data;if(b5([K,$.options.indexAxis])==="y")return;if(!Y.controller.supportsDecimation)return;let N=$.scales[Y.xAxisID];if(N.type!=="linear"&&N.type!=="time")return;if($.options.parsing)return;let{start:H,count:M}=GY(Y,U),B=J.threshold||4*Z;if(M<=B){Y2(q);return}if(u(X))q._data=U,delete q.data,Object.defineProperty(q,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(L){this._data=L}});let j;switch(J.algorithm){case"lttb":j=ZY(U,H,M,Z,J);break;case"min-max":j=qY(U,H,M,Z);break;default:throw Error(`Unsupported decimation algorithm '${J.algorithm}'`)}q._decimated=j})},destroy($){jZ($)}};H2={id:"filler",afterDatasetsUpdate($,Q,J){let Z=($.data.datasets||[]).length,q=[],G,X,K,Y;for(X=0;X<Z;++X){if(G=$.getDatasetMeta(X),K=G.dataset,Y=null,K&&K.options&&K instanceof v5)Y={visible:$.isDatasetVisible(X),index:X,fill:UY(K,X,Z),chart:$,axis:G.controller.options.indexAxis,scale:G.vScale,line:K};G.$filler=Y,q.push(Y)}for(X=0;X<Z;++X){if(Y=q[X],!Y||Y.fill===!1)continue;Y.fill=YY(q,X,J.propagate)}},beforeDraw($,Q,J){let Z=J.drawTime==="beforeDraw",q=$.getSortedVisibleDatasetMetas(),G=$.chartArea;for(let X=q.length-1;X>=0;--X){let K=q[X].$filler;if(!K)continue;if(K.line.updateControlPoints(G,K.axis),Z&&K.fill)w7($.ctx,K,G)}},beforeDatasetsDraw($,Q,J){if(J.drawTime!=="beforeDatasetsDraw")return;let Z=$.getSortedVisibleDatasetMetas();for(let q=Z.length-1;q>=0;--q){let G=Z[q].$filler;if(FZ(G))w7($.ctx,G,$.chartArea)}},beforeDatasetDraw($,Q,J){let Z=Q.meta.$filler;if(!FZ(Z)||J.drawTime!=="beforeDatasetDraw")return;w7($.ctx,Z,$.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};z7=class z7 extends s0{constructor($){super();this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=$.chart,this.options=$.options,this.ctx=$.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update($,Q,J){this.maxWidth=$,this.maxHeight=Q,this._margins=J,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){if(this.isHorizontal())this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width;else this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height}buildLabels(){let $=this.options.labels||{},Q=$0($.generateLabels,[this.chart],this)||[];if($.filter)Q=Q.filter((J)=>$.filter(J,this.chart.data));if($.sort)Q=Q.sort((J,Z)=>$.sort(J,Z,this.chart.data));if(this.options.reverse)Q.reverse();this.legendItems=Q}fit(){let{options:$,ctx:Q}=this;if(!$.display){this.width=this.height=0;return}let J=$.labels,Z=j0(J.font),q=Z.size,G=this._computeTitleHeight(),{boxWidth:X,itemHeight:K}=wZ(J,q),Y,U;if(Q.font=Z.string,this.isHorizontal())Y=this.maxWidth,U=this._fitRows(G,q,X,K)+10;else U=this.maxHeight,Y=this._fitCols(G,Z,X,K)+10;this.width=Math.min(Y,$.maxWidth||this.maxWidth),this.height=Math.min(U,$.maxHeight||this.maxHeight)}_fitRows($,Q,J,Z){let{ctx:q,maxWidth:G,options:{labels:{padding:X}}}=this,K=this.legendHitBoxes=[],Y=this.lineWidths=[0],U=Z+X,N=$;q.textAlign="left",q.textBaseline="middle";let H=-1,M=-U;return this.legendItems.forEach((B,j)=>{let L=J+Q/2+q.measureText(B.text).width;if(j===0||Y[Y.length-1]+L+2*X>G)N+=U,Y[Y.length-(j>0?0:1)]=0,M+=U,H++;K[j]={left:0,top:M,row:H,width:L,height:Z},Y[Y.length-1]+=L+X}),N}_fitCols($,Q,J,Z){let{ctx:q,maxHeight:G,options:{labels:{padding:X}}}=this,K=this.legendHitBoxes=[],Y=this.columnSizes=[],U=G-$,N=X,H=0,M=0,B=0,j=0;return this.legendItems.forEach((L,W)=>{let{itemWidth:V,itemHeight:_}=CY(J,Q,q,L,Z);if(W>0&&M+_+2*X>U)N+=H+X,Y.push({width:H,height:M}),B+=H+X,j++,H=M=0;K[W]={left:B,top:M,col:j,width:V,height:_},H=Math.max(H,V),M+=_+X}),N+=H,Y.push({width:H,height:M}),N}adjustHitBoxes(){if(!this.options.display)return;let $=this._computeTitleHeight(),{legendHitBoxes:Q,options:{align:J,labels:{padding:Z},rtl:q}}=this,G=Q5(q,this.left,this.width);if(this.isHorizontal()){let X=0,K=R0(J,this.left+Z,this.right-this.lineWidths[X]);for(let Y of Q){if(X!==Y.row)X=Y.row,K=R0(J,this.left+Z,this.right-this.lineWidths[X]);Y.top+=this.top+$+Z,Y.left=G.leftForLtr(G.x(K),Y.width),K+=Y.width+Z}}else{let X=0,K=R0(J,this.top+$+Z,this.bottom-this.columnSizes[X].height);for(let Y of Q){if(Y.col!==X)X=Y.col,K=R0(J,this.top+$+Z,this.bottom-this.columnSizes[X].height);Y.top=K,Y.left+=this.left+Z,Y.left=G.leftForLtr(G.x(Y.left),Y.width),K+=Y.height+Z}}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let $=this.ctx;G9($,this),this._draw(),X9($)}}_draw(){let{options:$,columnSizes:Q,lineWidths:J,ctx:Z}=this,{align:q,labels:G}=$,X=q0.color,K=Q5($.rtl,this.left,this.width),Y=j0(G.font),{padding:U}=G,N=Y.size,H=N/2,M;this.drawTitle(),Z.textAlign=K.textAlign("left"),Z.textBaseline="middle",Z.lineWidth=0.5,Z.font=Y.string;let{boxWidth:B,boxHeight:j,itemHeight:L}=wZ(G,N),W=function(w,P,T){if(isNaN(B)||B<=0||isNaN(j)||j<0)return;Z.save();let A=h(T.lineWidth,1);if(Z.fillStyle=h(T.fillStyle,X),Z.lineCap=h(T.lineCap,"butt"),Z.lineDashOffset=h(T.lineDashOffset,0),Z.lineJoin=h(T.lineJoin,"miter"),Z.lineWidth=A,Z.strokeStyle=h(T.strokeStyle,X),Z.setLineDash(h(T.lineDash,[])),G.usePointStyle){let z={radius:j*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:A},g=K.xPlus(w,B/2),x=P+H;e4(Z,z,g,x,G.pointStyleWidth&&B)}else{let z=P+Math.max((N-j)/2,0),g=K.leftForLtr(w,B),x=b1(T.borderRadius);if(Z.beginPath(),Object.values(x).some((X0)=>X0!==0))k5(Z,{x:g,y:z,w:B,h:j,radius:x});else Z.rect(g,z,B,j);if(Z.fill(),A!==0)Z.stroke()}Z.restore()},V=function(w,P,T){k1(Z,T.text,w,P+L/2,Y,{strikethrough:T.hidden,textAlign:K.textAlign(T.textAlign)})},_=this.isHorizontal(),D=this._computeTitleHeight();if(_)M={x:R0(q,this.left+U,this.right-J[0]),y:this.top+U+D,line:0};else M={x:this.left+U,y:R0(q,this.top+D+U,this.bottom-Q[0].height),line:0};K7(this.ctx,$.textDirection);let E=L+U;this.legendItems.forEach((w,P)=>{Z.strokeStyle=w.fontColor,Z.fillStyle=w.fontColor;let T=Z.measureText(w.text).width,A=K.textAlign(w.textAlign||(w.textAlign=G.textAlign)),z=B+H+T,g=M.x,x=M.y;if(K.setWidth(this.width),_){if(P>0&&g+z+U>this.right)x=M.y+=E,M.line++,g=M.x=R0(q,this.left+U,this.right-J[M.line])}else if(P>0&&x+E>this.bottom)g=M.x=g+Q[M.line].width+U,M.line++,x=M.y=R0(q,this.top+D+U,this.bottom-Q[M.line].height);let X0=K.x(g);if(W(X0,x,w),g=_J(A,g+B+H,_?g+z:this.right,$.rtl),V(K.x(g),x,w),_)M.x+=z+U;else if(typeof w.text!=="string"){let D0=Y.lineHeight;M.y+=M2(w,D0)+U}else M.y+=E}),Y7(this.ctx,$.textDirection)}drawTitle(){let $=this.options,Q=$.title,J=j0(Q.font),Z=w0(Q.padding);if(!Q.display)return;let q=Q5($.rtl,this.left,this.width),G=this.ctx,X=Q.position,K=J.size/2,Y=Z.top+K,U,N=this.left,H=this.width;if(this.isHorizontal())H=Math.max(...this.lineWidths),U=this.top+Y,N=R0($.align,N,this.right-H);else{let B=this.columnSizes.reduce((j,L)=>Math.max(j,L.height),0);U=Y+R0($.align,this.top,this.bottom-B-$.labels.padding-this._computeTitleHeight())}let M=R0(X,N,N+H);G.textAlign=q.textAlign(z8(X)),G.textBaseline="middle",G.strokeStyle=Q.color,G.fillStyle=Q.color,G.font=J.string,k1(G,Q.text,M,U,J)}_computeTitleHeight(){let $=this.options.title,Q=j0($.font),J=w0($.padding);return $.display?Q.lineHeight+J.height:0}_getLegendItemAt($,Q){let J,Z,q;if($1($,this.left,this.right)&&$1(Q,this.top,this.bottom)){q=this.legendHitBoxes;for(J=0;J<q.length;++J)if(Z=q[J],$1($,Z.left,Z.left+Z.width)&&$1(Q,Z.top,Z.top+Z.height))return this.legendItems[J]}return null}handleEvent($){let Q=this.options;if(!IY($.type,Q))return;let J=this._getLegendItemAt($.x,$.y);if($.type==="mousemove"||$.type==="mouseout"){let Z=this._hoveredItem,q=TY(Z,J);if(Z&&!q)$0(Q.onLeave,[$,Z,this],this);if(this._hoveredItem=J,J&&!q)$0(Q.onHover,[$,J,this],this)}else if(J)$0(Q.onClick,[$,J,this],this)}};B2={id:"legend",_element:z7,start($,Q,J){let Z=$.legend=new z7({ctx:$.ctx,options:J,chart:$});E0.configure($,Z,J),E0.addBox($,Z)},stop($){E0.removeBox($,$.legend),delete $.legend},beforeUpdate($,Q,J){let Z=$.legend;E0.configure($,Z,J),Z.options=J},afterUpdate($){let Q=$.legend;Q.buildLabels(),Q.adjustHitBoxes()},afterEvent($,Q){if(!Q.replay)$.legend.handleEvent(Q.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1000,onClick($,Q,J){let Z=Q.datasetIndex,q=J.chart;if(q.isDatasetVisible(Z))q.hide(Z),Q.hidden=!0;else q.show(Z),Q.hidden=!1},onHover:null,onLeave:null,labels:{color:($)=>$.chart.options.color,boxWidth:40,padding:10,generateLabels($){let Q=$.data.datasets,{labels:{usePointStyle:J,pointStyle:Z,textAlign:q,color:G,useBorderRadius:X,borderRadius:K}}=$.legend.options;return $._getSortedDatasetMetas().map((Y)=>{let U=Y.controller.getStyle(J?0:void 0),N=w0(U.borderWidth);return{text:Q[Y.index].label,fillStyle:U.backgroundColor,fontColor:G,hidden:!Y.visible,lineCap:U.borderCapStyle,lineDash:U.borderDash,lineDashOffset:U.borderDashOffset,lineJoin:U.borderJoinStyle,lineWidth:(N.width+N.height)/4,strokeStyle:U.borderColor,pointStyle:Z||U.pointStyle,rotation:U.rotation,textAlign:q||U.textAlign,borderRadius:X&&(K||U.borderRadius),datasetIndex:Y.index}},this)}},title:{color:($)=>$.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:($)=>!$.startsWith("on"),labels:{_scriptable:($)=>!["generateLabels","filter","sort"].includes($)}}};i8=class i8 extends s0{constructor($){super();this.chart=$.chart,this.options=$.options,this.ctx=$.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update($,Q){let J=this.options;if(this.left=0,this.top=0,!J.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=$,this.height=this.bottom=Q;let Z=J0(J.text)?J.text.length:1;this._padding=w0(J.padding);let q=Z*j0(J.font).lineHeight+this._padding.height;if(this.isHorizontal())this.height=q;else this.width=q}isHorizontal(){let $=this.options.position;return $==="top"||$==="bottom"}_drawArgs($){let{top:Q,left:J,bottom:Z,right:q,options:G}=this,X=G.align,K=0,Y,U,N;if(this.isHorizontal())U=R0(X,J,q),N=Q+$,Y=q-J;else{if(G.position==="left")U=J+$,N=R0(X,Z,Q),K=o*-0.5;else U=q-$,N=R0(X,Q,Z),K=o*0.5;Y=Z-Q}return{titleX:U,titleY:N,maxWidth:Y,rotation:K}}draw(){let $=this.ctx,Q=this.options;if(!Q.display)return;let J=j0(Q.font),q=J.lineHeight/2+this._padding.top,{titleX:G,titleY:X,maxWidth:K,rotation:Y}=this._drawArgs(q);k1($,Q.text,0,0,J,{color:Q.color,maxWidth:K,rotation:Y,textAlign:z8(Q.align),textBaseline:"middle",translation:[G,X]})}};W2={id:"title",_element:i8,start($,Q,J){AY($,J)},stop($){let Q=$.titleBlock;E0.removeBox($,Q),delete $.titleBlock},beforeUpdate($,Q,J){let Z=$.titleBlock;E0.configure($,Z,J),Z.options=J},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2000},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},g8=new WeakMap,j2={id:"subtitle",start($,Q,J){let Z=new i8({ctx:$.ctx,options:J,chart:$});E0.configure($,Z,J),E0.addBox($,Z),g8.set($,Z)},stop($){E0.removeBox($,g8.get($)),g8.delete($)},beforeUpdate($,Q,J){let Z=g8.get($);E0.configure($,Z,J),Z.options=J},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},W9={average($){if(!$.length)return!1;let Q,J,Z=new Set,q=0,G=0;for(Q=0,J=$.length;Q<J;++Q){let K=$[Q].element;if(K&&K.hasValue()){let Y=K.tooltipPosition();Z.add(Y.x),q+=Y.y,++G}}if(G===0||Z.size===0)return!1;return{x:[...Z].reduce((K,Y)=>K+Y)/Z.size,y:q/G}},nearest($,Q){if(!$.length)return!1;let{x:J,y:Z}=Q,q=Number.POSITIVE_INFINITY,G,X,K;for(G=0,X=$.length;G<X;++G){let Y=$[G].element;if(Y&&Y.hasValue()){let U=Y.getCenterPoint(),N=D8(Q,U);if(N<q)q=N,K=Y}}if(K){let Y=K.tooltipPosition();J=Y.x,Z=Y.y}return{x:J,y:Z}}};L2={beforeTitle:e0,title($){if($.length>0){let Q=$[0],J=Q.chart.data.labels,Z=J?J.length:0;if(this&&this.options&&this.options.mode==="dataset")return Q.dataset.label||"";else if(Q.label)return Q.label;else if(Z>0&&Q.dataIndex<Z)return J[Q.dataIndex]}return""},afterTitle:e0,beforeBody:e0,beforeLabel:e0,label($){if(this&&this.options&&this.options.mode==="dataset")return $.label+": "+$.formattedValue||$.formattedValue;let Q=$.dataset.label||"";if(Q)Q+=": ";let J=$.formattedValue;if(!u(J))Q+=J;return Q},labelColor($){let J=$.chart.getDatasetMeta($.datasetIndex).controller.getStyle($.dataIndex);return{borderColor:J.borderColor,backgroundColor:J.backgroundColor,borderWidth:J.borderWidth,borderDash:J.borderDash,borderDashOffset:J.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle($){let J=$.chart.getDatasetMeta($.datasetIndex).controller.getStyle($.dataIndex);return{pointStyle:J.pointStyle,rotation:J.rotation}},afterLabel:e0,afterBody:e0,beforeFooter:e0,footer:e0,afterFooter:e0};I7=class I7 extends s0{static positioners=W9;constructor($){super();this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=$.chart,this.options=$.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize($){this.options=$,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let $=this._cachedAnimations;if($)return $;let Q=this.chart,J=this.options.setContext(this.getContext()),Z=J.enabled&&Q.options.animation&&J.animations,q=new r8(this.chart,Z);if(Z._cacheable)this._cachedAnimations=Object.freeze(q);return q}getContext(){return this.$context||(this.$context=fY(this.chart.getContext(),this,this._tooltipItems))}getTitle($,Q){let{callbacks:J}=Q,Z=z0(J,"beforeTitle",this,$),q=z0(J,"title",this,$),G=z0(J,"afterTitle",this,$),X=[];return X=Q1(X,_1(Z)),X=Q1(X,_1(q)),X=Q1(X,_1(G)),X}getBeforeBody($,Q){return TZ(z0(Q.callbacks,"beforeBody",this,$))}getBody($,Q){let{callbacks:J}=Q,Z=[];return i($,(q)=>{let G={before:[],lines:[],after:[]},X=CZ(J,q);Q1(G.before,_1(z0(X,"beforeLabel",this,q))),Q1(G.lines,z0(X,"label",this,q)),Q1(G.after,_1(z0(X,"afterLabel",this,q))),Z.push(G)}),Z}getAfterBody($,Q){return TZ(z0(Q.callbacks,"afterBody",this,$))}getFooter($,Q){let{callbacks:J}=Q,Z=z0(J,"beforeFooter",this,$),q=z0(J,"footer",this,$),G=z0(J,"afterFooter",this,$),X=[];return X=Q1(X,_1(Z)),X=Q1(X,_1(q)),X=Q1(X,_1(G)),X}_createItems($){let Q=this._active,J=this.chart.data,Z=[],q=[],G=[],X=[],K,Y;for(K=0,Y=Q.length;K<Y;++K)X.push(SY(this.chart,Q[K]));if($.filter)X=X.filter((U,N,H)=>$.filter(U,N,H,J));if($.itemSort)X=X.sort((U,N)=>$.itemSort(U,N,J));return i(X,(U)=>{let N=CZ($.callbacks,U);Z.push(z0(N,"labelColor",this,U)),q.push(z0(N,"labelPointStyle",this,U)),G.push(z0(N,"labelTextColor",this,U))}),this.labelColors=Z,this.labelPointStyles=q,this.labelTextColors=G,this.dataPoints=X,X}update($,Q){let J=this.options.setContext(this.getContext()),Z=this._active,q,G=[];if(!Z.length){if(this.opacity!==0)q={opacity:0}}else{let X=W9[J.position].call(this,Z,this._eventPosition);G=this._createItems(J),this.title=this.getTitle(G,J),this.beforeBody=this.getBeforeBody(G,J),this.body=this.getBody(G,J),this.afterBody=this.getAfterBody(G,J),this.footer=this.getFooter(G,J);let K=this._size=EZ(this,J),Y=Object.assign({},X,K),U=DZ(this.chart,J,Y),N=PZ(J,Y,U,this.chart);this.xAlign=U.xAlign,this.yAlign=U.yAlign,q={opacity:1,x:N.x,y:N.y,width:K.width,height:K.height,caretX:X.x,caretY:X.y}}if(this._tooltipItems=G,this.$context=void 0,q)this._resolveAnimations().update(this,q);if($&&J.external)J.external.call(this,{chart:this.chart,tooltip:this,replay:Q})}drawCaret($,Q,J,Z){let q=this.getCaretPosition($,J,Z);Q.lineTo(q.x1,q.y1),Q.lineTo(q.x2,q.y2),Q.lineTo(q.x3,q.y3)}getCaretPosition($,Q,J){let{xAlign:Z,yAlign:q}=this,{caretSize:G,cornerRadius:X}=J,{topLeft:K,topRight:Y,bottomLeft:U,bottomRight:N}=b1(X),{x:H,y:M}=$,{width:B,height:j}=Q,L,W,V,_,D,E;if(q==="center"){if(D=M+j/2,Z==="left")L=H,W=L-G,_=D+G,E=D-G;else L=H+B,W=L+G,_=D-G,E=D+G;V=L}else{if(Z==="left")W=H+Math.max(K,U)+G;else if(Z==="right")W=H+B-Math.max(Y,N)-G;else W=this.caretX;if(q==="top")_=M,D=_-G,L=W-G,V=W+G;else _=M+j,D=_+G,L=W+G,V=W-G;E=_}return{x1:L,x2:W,x3:V,y1:_,y2:D,y3:E}}drawTitle($,Q,J){let Z=this.title,q=Z.length,G,X,K;if(q){let Y=Q5(J.rtl,this.x,this.width);$.x=m8(this,J.titleAlign,J),Q.textAlign=Y.textAlign(J.titleAlign),Q.textBaseline="middle",G=j0(J.titleFont),X=J.titleSpacing,Q.fillStyle=J.titleColor,Q.font=G.string;for(K=0;K<q;++K)if(Q.fillText(Z[K],Y.x($.x),$.y+G.lineHeight/2),$.y+=G.lineHeight+X,K+1===q)$.y+=J.titleMarginBottom-X}}_drawColorBox($,Q,J,Z,q){let G=this.labelColors[J],X=this.labelPointStyles[J],{boxHeight:K,boxWidth:Y}=q,U=j0(q.bodyFont),N=m8(this,"left",q),H=Z.x(N),M=K<U.lineHeight?(U.lineHeight-K)/2:0,B=Q.y+M;if(q.usePointStyle){let j={radius:Math.min(Y,K)/2,pointStyle:X.pointStyle,rotation:X.rotation,borderWidth:1},L=Z.leftForLtr(H,Y)+Y/2,W=B+K/2;$.strokeStyle=q.multiKeyBackground,$.fillStyle=q.multiKeyBackground,A8($,j,L,W),$.strokeStyle=G.borderColor,$.fillStyle=G.backgroundColor,A8($,j,L,W)}else{$.lineWidth=p(G.borderWidth)?Math.max(...Object.values(G.borderWidth)):G.borderWidth||1,$.strokeStyle=G.borderColor,$.setLineDash(G.borderDash||[]),$.lineDashOffset=G.borderDashOffset||0;let j=Z.leftForLtr(H,Y),L=Z.leftForLtr(Z.xPlus(H,1),Y-2),W=b1(G.borderRadius);if(Object.values(W).some((V)=>V!==0))$.beginPath(),$.fillStyle=q.multiKeyBackground,k5($,{x:j,y:B,w:Y,h:K,radius:W}),$.fill(),$.stroke(),$.fillStyle=G.backgroundColor,$.beginPath(),k5($,{x:L,y:B+1,w:Y-2,h:K-2,radius:W}),$.fill();else $.fillStyle=q.multiKeyBackground,$.fillRect(j,B,Y,K),$.strokeRect(j,B,Y,K),$.fillStyle=G.backgroundColor,$.fillRect(L,B+1,Y-2,K-2)}$.fillStyle=this.labelTextColors[J]}drawBody($,Q,J){let{body:Z}=this,{bodySpacing:q,bodyAlign:G,displayColors:X,boxHeight:K,boxWidth:Y,boxPadding:U}=J,N=j0(J.bodyFont),H=N.lineHeight,M=0,B=Q5(J.rtl,this.x,this.width),j=function(T){Q.fillText(T,B.x($.x+M),$.y+H/2),$.y+=H+q},L=B.textAlign(G),W,V,_,D,E,w,P;Q.textAlign=G,Q.textBaseline="middle",Q.font=N.string,$.x=m8(this,L,J),Q.fillStyle=J.bodyColor,i(this.beforeBody,j),M=X&&L!=="right"?G==="center"?Y/2+U:Y+2+U:0;for(D=0,w=Z.length;D<w;++D){if(W=Z[D],V=this.labelTextColors[D],Q.fillStyle=V,i(W.before,j),_=W.lines,X&&_.length)this._drawColorBox(Q,$,D,B,J),H=Math.max(N.lineHeight,K);for(E=0,P=_.length;E<P;++E)j(_[E]),H=N.lineHeight;i(W.after,j)}M=0,H=N.lineHeight,i(this.afterBody,j),$.y-=q}drawFooter($,Q,J){let Z=this.footer,q=Z.length,G,X;if(q){let K=Q5(J.rtl,this.x,this.width);$.x=m8(this,J.footerAlign,J),$.y+=J.footerMarginTop,Q.textAlign=K.textAlign(J.footerAlign),Q.textBaseline="middle",G=j0(J.footerFont),Q.fillStyle=J.footerColor,Q.font=G.string;for(X=0;X<q;++X)Q.fillText(Z[X],K.x($.x),$.y+G.lineHeight/2),$.y+=G.lineHeight+J.footerSpacing}}drawBackground($,Q,J,Z){let{xAlign:q,yAlign:G}=this,{x:X,y:K}=$,{width:Y,height:U}=J,{topLeft:N,topRight:H,bottomLeft:M,bottomRight:B}=b1(Z.cornerRadius);if(Q.fillStyle=Z.backgroundColor,Q.strokeStyle=Z.borderColor,Q.lineWidth=Z.borderWidth,Q.beginPath(),Q.moveTo(X+N,K),G==="top")this.drawCaret($,Q,J,Z);if(Q.lineTo(X+Y-H,K),Q.quadraticCurveTo(X+Y,K,X+Y,K+H),G==="center"&&q==="right")this.drawCaret($,Q,J,Z);if(Q.lineTo(X+Y,K+U-B),Q.quadraticCurveTo(X+Y,K+U,X+Y-B,K+U),G==="bottom")this.drawCaret($,Q,J,Z);if(Q.lineTo(X+M,K+U),Q.quadraticCurveTo(X,K+U,X,K+U-M),G==="center"&&q==="left")this.drawCaret($,Q,J,Z);if(Q.lineTo(X,K+N),Q.quadraticCurveTo(X,K,X+N,K),Q.closePath(),Q.fill(),Z.borderWidth>0)Q.stroke()}_updateAnimationTarget($){let Q=this.chart,J=this.$animations,Z=J&&J.x,q=J&&J.y;if(Z||q){let G=W9[$.position].call(this,this._active,this._eventPosition);if(!G)return;let X=this._size=EZ(this,$),K=Object.assign({},G,this._size),Y=DZ(Q,$,K),U=PZ($,K,Y,Q);if(Z._to!==U.x||q._to!==U.y)this.xAlign=Y.xAlign,this.yAlign=Y.yAlign,this.width=X.width,this.height=X.height,this.caretX=G.x,this.caretY=G.y,this._resolveAnimations().update(this,U)}}_willRender(){return!!this.opacity}draw($){let Q=this.options.setContext(this.getContext()),J=this.opacity;if(!J)return;this._updateAnimationTarget(Q);let Z={width:this.width,height:this.height},q={x:this.x,y:this.y};J=Math.abs(J)<0.001?0:J;let G=w0(Q.padding),X=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;if(Q.enabled&&X)$.save(),$.globalAlpha=J,this.drawBackground(q,$,Z,Q),K7($,Q.textDirection),q.y+=G.top,this.drawTitle(q,$,Q),this.drawBody(q,$,Q),this.drawFooter(q,$,Q),Y7($,Q.textDirection),$.restore()}getActiveElements(){return this._active||[]}setActiveElements($,Q){let J=this._active,Z=$.map(({datasetIndex:X,index:K})=>{let Y=this.chart.getDatasetMeta(X);if(!Y)throw Error("Cannot find a dataset at index "+X);return{datasetIndex:X,element:Y.data[K],index:K}}),q=!q9(J,Z),G=this._positionChanged(Z,Q);if(q||G)this._active=Z,this._eventPosition=Q,this._ignoreReplayEvents=!0,this.update(!0)}handleEvent($,Q,J=!0){if(Q&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let Z=this.options,q=this._active||[],G=this._getActiveElements($,q,Q,J),X=this._positionChanged(G,$),K=Q||!q9(G,q)||X;if(K){if(this._active=G,Z.enabled||Z.external)this._eventPosition={x:$.x,y:$.y},this.update(!0,Q)}return K}_getActiveElements($,Q,J,Z){let q=this.options;if($.type==="mouseout")return[];if(!Z)return Q.filter((X)=>this.chart.data.datasets[X.datasetIndex]&&this.chart.getDatasetMeta(X.datasetIndex).controller.getParsed(X.index)!==void 0);let G=this.chart.getElementsAtEventForMode($,q.mode,q,J);if(q.reverse)G.reverse();return G}_positionChanged($,Q){let{caretX:J,caretY:Z,options:q}=this,G=W9[q.position].call(this,$,Q);return G!==!1&&(J!==G.x||Z!==G.y)}};F2={id:"tooltip",_element:I7,positioners:W9,afterInit($,Q,J){if(J)$.tooltip=new I7({chart:$,options:J})},beforeUpdate($,Q,J){if($.tooltip)$.tooltip.initialize(J)},reset($,Q,J){if($.tooltip)$.tooltip.initialize(J)},afterDraw($){let Q=$.tooltip;if(Q&&Q._willRender()){let J={tooltip:Q};if($.notifyPlugins("beforeTooltipDraw",{...J,cancelable:!0})===!1)return;Q.draw($.ctx),$.notifyPlugins("afterTooltipDraw",J)}},afterEvent($,Q){if($.tooltip){let J=Q.replay;if($.tooltip.handleEvent(Q.event,J,Q.inChartArea))Q.changed=!0}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:($,Q)=>Q.bodyFont.size,boxWidth:($,Q)=>Q.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:L2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:($)=>$!=="filter"&&$!=="itemSort"&&$!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},V2=Object.freeze({__proto__:null,Colors:K2,Decimation:U2,Filler:H2,Legend:B2,SubTitle:j2,Title:W2,Tooltip:F2});r7=class r7 extends h1{static id="category";static defaults={ticks:{callback:OZ}};constructor($){super($);this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init($){let Q=this._addedLabels;if(Q.length){let J=this.getLabels();for(let{index:Z,label:q}of Q)if(J[Z]===q)J.splice(Z,1);this._addedLabels=[]}super.init($)}parse($,Q){if(u($))return null;let J=this.getLabels();return Q=isFinite(Q)&&J[Q]===$?Q:gY(J,$,h(Q,$),this._addedLabels),mY(Q,J.length-1)}determineDataLimits(){let{minDefined:$,maxDefined:Q}=this.getUserBounds(),{min:J,max:Z}=this.getMinMax(!0);if(this.options.bounds==="ticks"){if(!$)J=0;if(!Q)Z=this.getLabels().length-1}this.min=J,this.max=Z}buildTicks(){let $=this.min,Q=this.max,J=this.options.offset,Z=[],q=this.getLabels();q=$===0&&Q===q.length-1?q:q.slice($,Q+1),this._valueRange=Math.max(q.length-(J?0:1),1),this._startValue=this.min-(J?0.5:0);for(let G=$;G<=Q;G++)Z.push({value:G});return Z}getLabelForValue($){return OZ.call(this,$)}configure(){if(super.configure(),!this.isHorizontal())this._reversePixels=!this._reversePixels}getPixelForValue($){if(typeof $!=="number")$=this.parse($);return $===null?NaN:this.getPixelForDecimal(($-this._startValue)/this._valueRange)}getPixelForTick($){let Q=this.ticks;if($<0||$>Q.length-1)return null;return this.getPixelForValue(Q[$].value)}getValueForPixel($){return Math.round(this._startValue+this.getDecimalForPixel($)*this._valueRange)}getBasePixel(){return this.bottom}};L9=class L9 extends h1{constructor($){super($);this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse($,Q){if(u($))return null;if((typeof $==="number"||$ instanceof Number)&&!isFinite(+$))return null;return+$}handleTickRangeOptions(){let{beginAtZero:$}=this.options,{minDefined:Q,maxDefined:J}=this.getUserBounds(),{min:Z,max:q}=this,G=(K)=>Z=Q?Z:K,X=(K)=>q=J?q:K;if($){let K=l0(Z),Y=l0(q);if(K<0&&Y<0)X(0);else if(K>0&&Y>0)G(0)}if(Z===q){let K=q===0?1:Math.abs(q*0.05);if(X(q+K),!$)G(Z-K)}this.min=Z,this.max=q}getTickLimit(){let $=this.options.ticks,{maxTicksLimit:Q,stepSize:J}=$,Z;if(J){if(Z=Math.ceil(this.max/J)-Math.floor(this.min/J)+1,Z>1000)console.warn(`scales.${this.id}.ticks.stepSize: ${J} would result generating up to ${Z} ticks. Limiting to 1000.`),Z=1000}else Z=this.computeTickLimit(),Q=Q||11;if(Q)Z=Math.min(Q,Z);return Z}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let $=this.options,Q=$.ticks,J=this.getTickLimit();J=Math.max(2,J);let Z={maxTicks:J,bounds:$.bounds,min:$.min,max:$.max,precision:Q.precision,step:Q.stepSize,count:Q.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:Q.minRotation||0,includeBounds:Q.includeBounds!==!1},q=this._range||this,G=uY(Z,q);if($.bounds==="ticks")u4(G,this,"value");if($.reverse)G.reverse(),this.start=this.max,this.end=this.min;else this.start=this.min,this.end=this.max;return G}configure(){let $=this.ticks,Q=this.min,J=this.max;if(super.configure(),this.options.offset&&$.length){let Z=(J-Q)/Math.max($.length-1,1)/2;Q-=Z,J+=Z}this._startValue=Q,this._endValue=J,this._valueRange=J-Q}getLabelForValue($){return A5($,this.chart.options.locale,this.options.ticks.format)}};s7=class s7 extends L9{static id="linear";static defaults={ticks:{callback:S5.formatters.numeric}};determineDataLimits(){let{min:$,max:Q}=this.getMinMax(!0);this.min=Y0($)?$:0,this.max=Y0(Q)?Q:1,this.handleTickRangeOptions()}computeTickLimit(){let $=this.isHorizontal(),Q=$?this.width:this.height,J=x0(this.options.ticks.minRotation),Z=($?Math.sin(J):Math.cos(J))||0.001,q=this._resolveTickFontOptions(0);return Math.ceil(Q/Math.min(40,q.lineHeight/Z))}getPixelForValue($){return $===null?NaN:this.getPixelForDecimal(($-this._startValue)/this._valueRange)}getValueForPixel($){return this._startValue+this.getDecimalForPixel($)*this._valueRange}};o7=class o7 extends h1{static id="logarithmic";static defaults={ticks:{callback:S5.formatters.logarithmic,major:{enabled:!0}}};constructor($){super($);this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse($,Q){let J=L9.prototype.parse.apply(this,[$,Q]);if(J===0){this._zero=!0;return}return Y0(J)&&J>0?J:null}determineDataLimits(){let{min:$,max:Q}=this.getMinMax(!0);if(this.min=Y0($)?Math.max(0,$):null,this.max=Y0(Q)?Math.max(0,Q):null,this.options.beginAtZero)this._zero=!0;if(this._zero&&this.min!==this._suggestedMin&&!Y0(this._userMin))this.min=$===Z5(this.min,0)?Z5(this.min,-1):Z5(this.min,0);this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:$,maxDefined:Q}=this.getUserBounds(),J=this.min,Z=this.max,q=(X)=>J=$?J:X,G=(X)=>Z=Q?Z:X;if(J===Z)if(J<=0)q(1),G(10);else q(Z5(J,-1)),G(Z5(Z,1));if(J<=0)q(Z5(Z,-1));if(Z<=0)G(Z5(J,1));this.min=J,this.max=Z}buildTicks(){let $=this.options,Q={min:this._userMin,max:this._userMax},J=dY(Q,this);if($.bounds==="ticks")u4(J,this,"value");if($.reverse)J.reverse(),this.start=this.max,this.end=this.min;else this.start=this.min,this.end=this.max;return J}getLabelForValue($){return $===void 0?"0":A5($,this.chart.options.locale,this.options.ticks.format)}configure(){let $=this.min;super.configure(),this._startValue=L1($),this._valueRange=L1(this.max)-L1($)}getPixelForValue($){if($===void 0||$===0)$=this.min;if($===null||isNaN($))return NaN;return this.getPixelForDecimal($===this.min?0:(L1($)-this._startValue)/this._valueRange)}getValueForPixel($){let Q=this.getDecimalForPixel($);return Math.pow(10,this._startValue+Q*this._valueRange)}};n7=class n7 extends L9{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:S5.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback($){return $},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor($){super($);this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let $=this._padding=w0(A7(this.options)/2),Q=this.width=this.maxWidth-$.width,J=this.height=this.maxHeight-$.height;this.xCenter=Math.floor(this.left+Q/2+$.left),this.yCenter=Math.floor(this.top+J/2+$.top),this.drawingArea=Math.floor(Math.min(Q,J)/2)}determineDataLimits(){let{min:$,max:Q}=this.getMinMax(!1);this.min=Y0($)&&!isNaN($)?$:0,this.max=Y0(Q)&&!isNaN(Q)?Q:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/A7(this.options))}generateTickLabels($){L9.prototype.generateTickLabels.call(this,$),this._pointLabels=this.getLabels().map((Q,J)=>{let Z=$0(this.options.pointLabels.callback,[Q,J],this);return Z||Z===0?Z:""}).filter((Q,J)=>this.chart.getDataVisibility(J))}fit(){let $=this.options;if($.display&&$.pointLabels.display)lY(this);else this.setCenterPoint(0,0,0,0)}setCenterPoint($,Q,J,Z){this.xCenter+=Math.floor(($-Q)/2),this.yCenter+=Math.floor((J-Z)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max($,Q,J,Z))}getIndexAngle($){let Q=Z0/(this._pointLabels.length||1),J=this.options.startAngle||0;return _0($*Q+x0(J))}getDistanceFromCenterForValue($){if(u($))return NaN;let Q=this.drawingArea/(this.max-this.min);if(this.options.reverse)return(this.max-$)*Q;return($-this.min)*Q}getValueForDistanceFromCenter($){if(u($))return NaN;let Q=$/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-Q:this.min+Q}getPointLabelContext($){let Q=this._pointLabels||[];if($>=0&&$<Q.length){let J=Q[$];return JU(this.getContext(),$,J)}}getPointPosition($,Q,J=0){let Z=this.getIndexAngle($)-B0+J;return{x:Math.cos(Z)*Q+this.xCenter,y:Math.sin(Z)*Q+this.yCenter,angle:Z}}getPointPositionForValue($,Q){return this.getPointPosition($,this.getDistanceFromCenterForValue(Q))}getBasePosition($){return this.getPointPositionForValue($||0,this.getBaseValue())}getPointLabelPosition($){let{left:Q,top:J,right:Z,bottom:q}=this._pointLabelItems[$];return{left:Q,top:J,right:Z,bottom:q}}drawBackground(){let{backgroundColor:$,grid:{circular:Q}}=this.options;if($){let J=this.ctx;J.save(),J.beginPath(),_2(this,this.getDistanceFromCenterForValue(this._endValue),Q,this._pointLabels.length),J.closePath(),J.fillStyle=$,J.fill(),J.restore()}}drawGrid(){let $=this.ctx,Q=this.options,{angleLines:J,grid:Z,border:q}=Q,G=this._pointLabels.length,X,K,Y;if(Q.pointLabels.display)$U(this,G);if(Z.display)this.ticks.forEach((U,N)=>{if(N!==0||N===0&&this.min<0){K=this.getDistanceFromCenterForValue(U.value);let H=this.getContext(N),M=Z.setContext(H),B=q.setContext(H);QU(this,M,K,G,B)}});if(J.display){$.save();for(X=G-1;X>=0;X--){let U=J.setContext(this.getPointLabelContext(X)),{color:N,lineWidth:H}=U;if(!H||!N)continue;$.lineWidth=H,$.strokeStyle=N,$.setLineDash(U.borderDash),$.lineDashOffset=U.borderDashOffset,K=this.getDistanceFromCenterForValue(Q.reverse?this.min:this.max),Y=this.getPointPosition(X,K),$.beginPath(),$.moveTo(this.xCenter,this.yCenter),$.lineTo(Y.x,Y.y),$.stroke()}$.restore()}}drawBorder(){}drawLabels(){let $=this.ctx,Q=this.options,J=Q.ticks;if(!J.display)return;let Z=this.getIndexAngle(0),q,G;$.save(),$.translate(this.xCenter,this.yCenter),$.rotate(Z),$.textAlign="center",$.textBaseline="middle",this.ticks.forEach((X,K)=>{if(K===0&&this.min>=0&&!Q.reverse)return;let Y=J.setContext(this.getContext(K)),U=j0(Y.font);if(q=this.getDistanceFromCenterForValue(this.ticks[K].value),Y.showLabelBackdrop){$.font=U.string,G=$.measureText(X.label).width,$.fillStyle=Y.backdropColor;let N=w0(Y.backdropPadding);$.fillRect(-G/2-N.left,-q-U.size/2-N.top,G+N.width,U.size+N.height)}k1($,X.label,0,-q,U,{color:Y.color,strokeColor:Y.textStrokeColor,strokeWidth:Y.textStrokeWidth})}),$.restore()}drawTitle(){}};a8={millisecond:{common:!0,size:1,steps:1000},second:{common:!0,size:1000,steps:60},minute:{common:!0,size:60000,steps:60},hour:{common:!0,size:3600000,steps:24},day:{common:!0,size:86400000,steps:30},week:{common:!1,size:604800000,steps:4},month:{common:!0,size:2628000000,steps:12},quarter:{common:!1,size:7884000000,steps:4},year:{common:!0,size:31540000000}},I0=Object.keys(a8);V9=class V9 extends h1{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor($){super($);this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init($,Q={}){let J=$.time||($.time={}),Z=this._adapter=new uZ._date($.adapters.date);Z.init(Q),C5(J.displayFormats,Z.formats()),this._parseOpts={parser:J.parser,round:J.round,isoWeekday:J.isoWeekday},super.init($),this._normalized=Q.normalized}parse($,Q){if($===void 0)return null;return bZ(this,$)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let $=this.options,Q=this._adapter,J=$.time.unit||"day",{min:Z,max:q,minDefined:G,maxDefined:X}=this.getUserBounds();function K(Y){if(!G&&!isNaN(Y.min))Z=Math.min(Z,Y.min);if(!X&&!isNaN(Y.max))q=Math.max(q,Y.max)}if(!G||!X){if(K(this._getLabelBounds()),$.bounds!=="ticks"||$.ticks.source!=="labels")K(this.getMinMax(!1))}Z=Y0(Z)&&!isNaN(Z)?Z:+Q.startOf(Date.now(),J),q=Y0(q)&&!isNaN(q)?q:+Q.endOf(Date.now(),J)+1,this.min=Math.min(Z,q-1),this.max=Math.max(Z+1,q)}_getLabelBounds(){let $=this.getLabelTimestamps(),Q=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY;if($.length)Q=$[0],J=$[$.length-1];return{min:Q,max:J}}buildTicks(){let $=this.options,Q=$.time,J=$.ticks,Z=J.source==="labels"?this.getLabelTimestamps():this._generate();if($.bounds==="ticks"&&Z.length)this.min=this._userMin||Z[0],this.max=this._userMax||Z[Z.length-1];let q=this.min,G=this.max,X=jJ(Z,q,G);if(this._unit=Q.unit||(J.autoSkip?yZ(Q.minUnit,this.min,this.max,this._getLabelCapacity(q)):ZU(this,X.length,Q.minUnit,this.min,this.max)),this._majorUnit=!J.major.enabled||this._unit==="year"?void 0:qU(this._unit),this.initOffsets(Z),$.reverse)X.reverse();return hZ(this,X,this._majorUnit)}afterAutoSkip(){if(this.options.offsetAfterAutoskip)this.initOffsets(this.ticks.map(($)=>+$.value))}initOffsets($=[]){let Q=0,J=0,Z,q;if(this.options.offset&&$.length){if(Z=this.getDecimalForValue($[0]),$.length===1)Q=1-Z;else Q=(this.getDecimalForValue($[1])-Z)/2;if(q=this.getDecimalForValue($[$.length-1]),$.length===1)J=q;else J=(q-this.getDecimalForValue($[$.length-2]))/2}let G=$.length<3?0.5:0.25;Q=L0(Q,0,G),J=L0(J,0,G),this._offsets={start:Q,end:J,factor:1/(Q+1+J)}}_generate(){let $=this._adapter,Q=this.min,J=this.max,Z=this.options,q=Z.time,G=q.unit||yZ(q.minUnit,Q,J,this._getLabelCapacity(Q)),X=h(Z.ticks.stepSize,1),K=G==="week"?q.isoWeekday:!1,Y=$5(K)||K===!0,U={},N=Q,H,M;if(Y)N=+$.startOf(N,"isoWeek",K);if(N=+$.startOf(N,Y?"day":G),$.diff(J,Q,G)>1e5*X)throw Error(Q+" and "+J+" are too far apart with stepSize of "+X+" "+G);let B=Z.ticks.source==="data"&&this.getDataTimestamps();for(H=N,M=0;H<J;H=+$.add(H,X,G),M++)vZ(U,H,B);if(H===J||Z.bounds==="ticks"||M===1)vZ(U,H,B);return Object.keys(U).sort(kZ).map((j)=>+j)}getLabelForValue($){let Q=this._adapter,J=this.options.time;if(J.tooltipFormat)return Q.format($,J.tooltipFormat);return Q.format($,J.displayFormats.datetime)}format($,Q){let Z=this.options.time.displayFormats,q=this._unit,G=Q||Z[q];return this._adapter.format($,G)}_tickFormatFunction($,Q,J,Z){let q=this.options,G=q.ticks.callback;if(G)return $0(G,[$,Q,J],this);let X=q.time.displayFormats,K=this._unit,Y=this._majorUnit,U=K&&X[K],N=Y&&X[Y],H=J[Q],M=Y&&N&&H&&H.major;return this._adapter.format($,Z||(M?N:U))}generateTickLabels($){let Q,J,Z;for(Q=0,J=$.length;Q<J;++Q)Z=$[Q],Z.label=this._tickFormatFunction(Z.value,Q,$)}getDecimalForValue($){return $===null?NaN:($-this.min)/(this.max-this.min)}getPixelForValue($){let Q=this._offsets,J=this.getDecimalForValue($);return this.getPixelForDecimal((Q.start+J)*Q.factor)}getValueForPixel($){let Q=this._offsets,J=this.getDecimalForPixel($)/Q.factor-Q.end;return this.min+J*(this.max-this.min)}_getLabelSize($){let Q=this.options.ticks,J=this.ctx.measureText($).width,Z=x0(this.isHorizontal()?Q.maxRotation:Q.minRotation),q=Math.cos(Z),G=Math.sin(Z),X=this._resolveTickFontOptions(0).size;return{w:J*q+X*G,h:J*G+X*q}}_getLabelCapacity($){let Q=this.options.time,J=Q.displayFormats,Z=J[Q.unit]||J.millisecond,q=this._tickFormatFunction($,0,hZ(this,[$],this._majorUnit),Z),G=this._getLabelSize(q),X=Math.floor(this.isHorizontal()?this.width/G.w:this.height/G.h)-1;return X>0?X:1}getDataTimestamps(){let $=this._cache.data||[],Q,J;if($.length)return $;let Z=this.getMatchingVisibleMetas();if(this._normalized&&Z.length)return this._cache.data=Z[0].controller.getAllParsedValues(this);for(Q=0,J=Z.length;Q<J;++Q)$=$.concat(Z[Q].controller.getAllParsedValues(this));return this._cache.data=this.normalize($)}getLabelTimestamps(){let $=this._cache.labels||[],Q,J;if($.length)return $;let Z=this.getLabels();for(Q=0,J=Z.length;Q<J;++Q)$.push(bZ(this,Z[Q]));return this._cache.labels=this._normalized?$:this.normalize($)}normalize($){return l4($.sort(kZ))}};i7=class i7 extends V9{static id="timeseries";static defaults=V9.defaults;constructor($){super($);this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let $=this._getTimestampsForTable(),Q=this._table=this.buildLookupTable($);this._minPos=u8(Q,this.min),this._tableRange=u8(Q,this.max)-this._minPos,super.initOffsets($)}buildLookupTable($){let{min:Q,max:J}=this,Z=[],q=[],G,X,K,Y,U;for(G=0,X=$.length;G<X;++G)if(Y=$[G],Y>=Q&&Y<=J)Z.push(Y);if(Z.length<2)return[{time:Q,pos:0},{time:J,pos:1}];for(G=0,X=Z.length;G<X;++G)if(U=Z[G+1],K=Z[G-1],Y=Z[G],Math.round((U+K)/2)!==Y)q.push({time:Y,pos:G/(X-1)});return q}_generate(){let $=this.min,Q=this.max,J=super.getDataTimestamps();if(!J.includes($)||!J.length)J.splice(0,0,$);if(!J.includes(Q)||J.length===1)J.push(Q);return J.sort((Z,q)=>Z-q)}_getTimestampsForTable(){let $=this._cache.all||[];if($.length)return $;let Q=this.getDataTimestamps(),J=this.getLabelTimestamps();if(Q.length&&J.length)$=this.normalize(Q.concat(J));else $=Q.length?Q:J;return $=this._cache.all=$,$}getDecimalForValue($){return(u8(this._table,$)-this._minPos)/this._tableRange}getValueForPixel($){let Q=this._offsets,J=this.getDecimalForPixel($)/Q.factor-Q.end;return u8(this._table,J*this._tableRange+this._minPos,!0)}};R2=Object.freeze({__proto__:null,CategoryScale:r7,LinearScale:s7,LogarithmicScale:o7,RadialLinearScale:n7,TimeScale:V9,TimeSeriesScale:i7}),XU=[mZ,q2,V2,R2]});var v2=t2((q_,y2)=>{(function $(Q,J,Z,q){var G=!!(Q.Worker&&Q.Blob&&Q.Promise&&Q.OffscreenCanvas&&Q.OffscreenCanvasRenderingContext2D&&Q.HTMLCanvasElement&&Q.HTMLCanvasElement.prototype.transferControlToOffscreen&&Q.URL&&Q.URL.createObjectURL),X=typeof Path2D==="function"&&typeof DOMMatrix==="function",K=function(){if(!Q.OffscreenCanvas)return!1;try{var R=new OffscreenCanvas(1,1),F=R.getContext("2d");F.fillRect(0,0,1,1);var I=R.transferToImageBitmap();F.createPattern(I,"no-repeat")}catch(S){return!1}return!0}();function Y(){}function U(R){var F=J.exports.Promise,I=F!==void 0?F:Q.Promise;if(typeof I==="function")return new I(R);return R(Y,Y),null}var N=function(R,F){return{transform:function(I){if(R)return I;if(F.has(I))return F.get(I);var S=new OffscreenCanvas(I.width,I.height),v=S.getContext("2d");return v.drawImage(I,0,0),F.set(I,S),S},clear:function(){F.clear()}}}(K,new Map),H=function(){var R=Math.floor(16.666666666666668),F,I,S={},v=0;if(typeof requestAnimationFrame==="function"&&typeof cancelAnimationFrame==="function")F=function(b){var d=Math.random();return S[d]=requestAnimationFrame(function k(c){if(v===c||v+R-1<c)v=c,delete S[d],b();else S[d]=requestAnimationFrame(k)}),d},I=function(b){if(S[b])cancelAnimationFrame(S[b])};else F=function(b){return setTimeout(b,R)},I=function(b){return clearTimeout(b)};return{frame:F,cancel:I}}(),M=function(){var R,F,I={};function S(v){function b(d,k){v.postMessage({options:d||{},callback:k})}v.init=function(k){var c=k.transferControlToOffscreen();v.postMessage({canvas:c},[c])},v.fire=function(k,c,Q0){if(F)return b(k,null),F;var N0=Math.random().toString(36).slice(2);return F=U(function(G0){function H0(F0){if(F0.data.callback!==N0)return;delete I[N0],v.removeEventListener("message",H0),F=null,N.clear(),Q0(),G0()}v.addEventListener("message",H0),b(k,N0),I[N0]=H0.bind(null,{data:{callback:N0}})}),F},v.reset=function(){v.postMessage({reset:!0});for(var k in I)I[k](),delete I[k]}}return function(){if(R)return R;if(!Z&&G){var v=["var CONFETTI, SIZE = {}, module = {};","("+$.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{R=new Worker(URL.createObjectURL(new Blob([v])))}catch(b){return typeof console<"u"&&typeof console.warn==="function"&&console.warn("\uD83C\uDF8A Could not load worker",b),null}S(R)}return R}}(),B={particleCount:50,angle:90,spread:45,startVelocity:45,decay:0.9,gravity:1,drift:0,ticks:200,x:0.5,y:0.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function j(R,F){return F?F(R):R}function L(R){return!(R===null||R===void 0)}function W(R,F,I){return j(R&&L(R[F])?R[F]:B[F],I)}function V(R){return R<0?0:Math.floor(R)}function _(R,F){return Math.floor(Math.random()*(F-R))+R}function D(R){return parseInt(R,16)}function E(R){return R.map(w)}function w(R){var F=String(R).replace(/[^0-9a-f]/gi,"");if(F.length<6)F=F[0]+F[0]+F[1]+F[1]+F[2]+F[2];return{r:D(F.substring(0,2)),g:D(F.substring(2,4)),b:D(F.substring(4,6))}}function P(R){var F=W(R,"origin",Object);return F.x=W(F,"x",Number),F.y=W(F,"y",Number),F}function T(R){R.width=document.documentElement.clientWidth,R.height=document.documentElement.clientHeight}function A(R){var F=R.getBoundingClientRect();R.width=F.width,R.height=F.height}function z(R){var F=document.createElement("canvas");return F.style.position="fixed",F.style.top="0px",F.style.left="0px",F.style.pointerEvents="none",F.style.zIndex=R,F}function g(R,F,I,S,v,b,d,k,c){R.save(),R.translate(F,I),R.rotate(b),R.scale(S,v),R.arc(0,0,1,d,k,c),R.restore()}function x(R){var F=R.angle*(Math.PI/180),I=R.spread*(Math.PI/180);return{x:R.x,y:R.y,wobble:Math.random()*10,wobbleSpeed:Math.min(0.11,Math.random()*0.1+0.05),velocity:R.startVelocity*0.5+Math.random()*R.startVelocity,angle2D:-F+(0.5*I-Math.random()*I),tiltAngle:(Math.random()*0.5+0.25)*Math.PI,color:R.color,shape:R.shape,tick:0,totalTicks:R.ticks,decay:R.decay,drift:R.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:R.gravity*3,ovalScalar:0.6,scalar:R.scalar,flat:R.flat}}function X0(R,F){if(F.x+=Math.cos(F.angle2D)*F.velocity+F.drift,F.y+=Math.sin(F.angle2D)*F.velocity+F.gravity,F.velocity*=F.decay,F.flat)F.wobble=0,F.wobbleX=F.x+10*F.scalar,F.wobbleY=F.y+10*F.scalar,F.tiltSin=0,F.tiltCos=0,F.random=1;else F.wobble+=F.wobbleSpeed,F.wobbleX=F.x+10*F.scalar*Math.cos(F.wobble),F.wobbleY=F.y+10*F.scalar*Math.sin(F.wobble),F.tiltAngle+=0.1,F.tiltSin=Math.sin(F.tiltAngle),F.tiltCos=Math.cos(F.tiltAngle),F.random=Math.random()+2;var I=F.tick++/F.totalTicks,S=F.x+F.random*F.tiltCos,v=F.y+F.random*F.tiltSin,b=F.wobbleX+F.random*F.tiltCos,d=F.wobbleY+F.random*F.tiltSin;if(R.fillStyle="rgba("+F.color.r+", "+F.color.g+", "+F.color.b+", "+(1-I)+")",R.beginPath(),X&&F.shape.type==="path"&&typeof F.shape.path==="string"&&Array.isArray(F.shape.matrix))R.fill(P0(F.shape.path,F.shape.matrix,F.x,F.y,Math.abs(b-S)*0.1,Math.abs(d-v)*0.1,Math.PI/10*F.wobble));else if(F.shape.type==="bitmap"){var k=Math.PI/10*F.wobble,c=Math.abs(b-S)*0.1,Q0=Math.abs(d-v)*0.1,N0=F.shape.bitmap.width*F.scalar,G0=F.shape.bitmap.height*F.scalar,H0=new DOMMatrix([Math.cos(k)*c,Math.sin(k)*c,-Math.sin(k)*Q0,Math.cos(k)*Q0,F.x,F.y]);H0.multiplySelf(new DOMMatrix(F.shape.matrix));var F0=R.createPattern(N.transform(F.shape.bitmap),"no-repeat");F0.setTransform(H0),R.globalAlpha=1-I,R.fillStyle=F0,R.fillRect(F.x-N0/2,F.y-G0/2,N0,G0),R.globalAlpha=1}else if(F.shape==="circle")R.ellipse?R.ellipse(F.x,F.y,Math.abs(b-S)*F.ovalScalar,Math.abs(d-v)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI):g(R,F.x,F.y,Math.abs(b-S)*F.ovalScalar,Math.abs(d-v)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI);else if(F.shape==="star"){var s=Math.PI/2*3,C0=4*F.scalar,m0=8*F.scalar,u0=F.x,X1=F.y,f1=5,o0=Math.PI/f1;while(f1--)u0=F.x+Math.cos(s)*m0,X1=F.y+Math.sin(s)*m0,R.lineTo(u0,X1),s+=o0,u0=F.x+Math.cos(s)*C0,X1=F.y+Math.sin(s)*C0,R.lineTo(u0,X1),s+=o0}else R.moveTo(Math.floor(F.x),Math.floor(F.y)),R.lineTo(Math.floor(F.wobbleX),Math.floor(v)),R.lineTo(Math.floor(b),Math.floor(d)),R.lineTo(Math.floor(S),Math.floor(F.wobbleY));return R.closePath(),R.fill(),F.tick<F.totalTicks}function D0(R,F,I,S,v){var b=F.slice(),d=R.getContext("2d"),k,c,Q0=U(function(N0){function G0(){k=c=null,d.clearRect(0,0,S.width,S.height),N.clear(),v(),N0()}function H0(){if(Z&&!(S.width===q.width&&S.height===q.height))S.width=R.width=q.width,S.height=R.height=q.height;if(!S.width&&!S.height)I(R),S.width=R.width,S.height=R.height;if(d.clearRect(0,0,S.width,S.height),b=b.filter(function(F0){return X0(d,F0)}),b.length)k=H.frame(H0);else G0()}k=H.frame(H0),c=G0});return{addFettis:function(N0){return b=b.concat(N0),Q0},canvas:R,promise:Q0,reset:function(){if(k)H.cancel(k);if(c)c()}}}function e(R,F){var I=!R,S=!!W(F||{},"resize"),v=!1,b=W(F,"disableForReducedMotion",Boolean),d=G&&!!W(F||{},"useWorker"),k=d?M():null,c=I?T:A,Q0=R&&k?!!R.__confetti_initialized:!1,N0=typeof matchMedia==="function"&&matchMedia("(prefers-reduced-motion)").matches,G0;function H0(s,C0,m0){var u0=W(s,"particleCount",V),X1=W(s,"angle",Number),f1=W(s,"spread",Number),o0=W(s,"startVelocity",Number),g2=W(s,"decay",Number),m2=W(s,"gravity",Number),u2=W(s,"drift",Number),F$=W(s,"colors",E),p2=W(s,"ticks",Number),V$=W(s,"shapes"),d2=W(s,"scalar"),c2=!!W(s,"flat"),_$=P(s),R$=u0,J6=[],l2=R.width*_$.x,r2=R.height*_$.y;while(R$--)J6.push(x({x:l2,y:r2,angle:X1,spread:f1,startVelocity:o0,color:F$[R$%F$.length],shape:V$[_(0,V$.length)],ticks:p2,decay:g2,gravity:m2,drift:u2,scalar:d2,flat:c2}));if(G0)return G0.addFettis(J6);return G0=D0(R,J6,c,C0,m0),G0.promise}function F0(s){var C0=b||W(s,"disableForReducedMotion",Boolean),m0=W(s,"zIndex",Number);if(C0&&N0)return U(function(o0){o0()});if(I&&G0)R=G0.canvas;else if(I&&!R)R=z(m0),document.body.appendChild(R);if(S&&!Q0)c(R);var u0={width:R.width,height:R.height};if(k&&!Q0)k.init(R);if(Q0=!0,k)R.__confetti_initialized=!0;function X1(){if(k){var o0={getBoundingClientRect:function(){if(!I)return R.getBoundingClientRect()}};c(o0),k.postMessage({resize:{width:o0.width,height:o0.height}});return}u0.width=u0.height=null}function f1(){if(G0=null,S)v=!1,Q.removeEventListener("resize",X1);if(I&&R){if(document.body.contains(R))document.body.removeChild(R);R=null,Q0=!1}}if(S&&!v)v=!0,Q.addEventListener("resize",X1,!1);if(k)return k.fire(s,u0,f1);return H0(s,u0,f1)}return F0.reset=function(){if(k)k.reset();if(G0)G0.reset()},F0}var t;function U0(){if(!t)t=e(null,{useWorker:!0,resize:!0});return t}function P0(R,F,I,S,v,b,d){var k=new Path2D(R),c=new Path2D;c.addPath(k,new DOMMatrix(F));var Q0=new Path2D;return Q0.addPath(c,new DOMMatrix([Math.cos(d)*v,Math.sin(d)*v,-Math.sin(d)*b,Math.cos(d)*b,I,S])),Q0}function A0(R){if(!X)throw Error("path confetti are not supported in this browser");var F,I;if(typeof R==="string")F=R;else F=R.path,I=R.matrix;var S=new Path2D(F),v=document.createElement("canvas"),b=v.getContext("2d");if(!I){var d=1000,k=d,c=d,Q0=0,N0=0,G0,H0;for(var F0=0;F0<d;F0+=2)for(var s=0;s<d;s+=2)if(b.isPointInPath(S,F0,s,"nonzero"))k=Math.min(k,F0),c=Math.min(c,s),Q0=Math.max(Q0,F0),N0=Math.max(N0,s);G0=Q0-k,H0=N0-c;var C0=10,m0=Math.min(C0/G0,C0/H0);I=[m0,0,0,m0,-Math.round(G0/2+k)*m0,-Math.round(H0/2+c)*m0]}return{type:"path",path:F,matrix:I}}function W0(R){var F,I=1,S="#000000",v='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';if(typeof R==="string")F=R;else F=R.text,I="scalar"in R?R.scalar:I,v="fontFamily"in R?R.fontFamily:v,S="color"in R?R.color:S;var b=10*I,d=""+b+"px "+v,k=new OffscreenCanvas(b,b),c=k.getContext("2d");c.font=d;var Q0=c.measureText(F),N0=Math.ceil(Q0.actualBoundingBoxRight+Q0.actualBoundingBoxLeft),G0=Math.ceil(Q0.actualBoundingBoxAscent+Q0.actualBoundingBoxDescent),H0=2,F0=Q0.actualBoundingBoxLeft+H0,s=Q0.actualBoundingBoxAscent+H0;N0+=H0+H0,G0+=H0+H0,k=new OffscreenCanvas(N0,G0),c=k.getContext("2d"),c.font=d,c.fillStyle=S,c.fillText(F,F0,s);var C0=1/I;return{type:"bitmap",bitmap:k.transferToImageBitmap(),matrix:[C0,0,0,C0,-N0*C0/2,-G0*C0/2]}}J.exports=function(){return U0().apply(this,arguments)},J.exports.reset=function(){U0().reset()},J.exports.create=e,J.exports.shapeFromPath=A0,J.exports.shapeFromText=W0})(function(){if(typeof window<"u")return window;if(typeof self<"u")return self;return this||{}}(),y2,!1)});var WU={};P$(WU,{default:()=>jU});module.exports=a2(WU);var x2=require("obsidian");var P9=[{type:"heatmap",label:"Heatmap",icon:"flame"},{type:"bar-chart",label:"Bar Chart",icon:"bar-chart-2"},{type:"line-chart",label:"Line Chart",icon:"trending-up"},{type:"area-chart",label:"Area Chart",icon:"area-chart"},{type:"pie-chart",label:"Pie Chart",icon:"pie-chart"},{type:"doughnut-chart",label:"Doughnut Chart",icon:"circle"},{type:"radar-chart",label:"Radar Chart",icon:"hexagon"},{type:"polar-area-chart",label:"Polar Area Chart",icon:"target"},{type:"scatter-chart",label:"Scatter Chart",icon:"scatter-chart"},{type:"bubble-chart",label:"Bubble Chart",icon:"circle-dot"},{type:"tag-cloud",label:"Cloud",icon:"cloud"},{type:"timeline",label:"Timeline",icon:"calendar"}],T9=[{type:"heatmap",label:"Heatmap",icon:"flame",description:"GitHub-style intensity grid"},{type:"bar-chart",label:"Bar Chart",icon:"bar-chart-2",description:"Vertical bars over time"},{type:"line-chart",label:"Line Chart",icon:"trending-up",description:"Connected line over time"},{type:"area-chart",label:"Area Chart",icon:"area-chart",description:"Filled area under line"},{type:"pie-chart",label:"Pie Chart",icon:"pie-chart",description:"Value distribution as slices"},{type:"doughnut-chart",label:"Doughnut Chart",icon:"circle",description:"Pie chart with center cutout"},{type:"radar-chart",label:"Radar Chart",icon:"hexagon",description:"Multi-axis comparison"},{type:"polar-area-chart",label:"Polar Area Chart",icon:"target",description:"Radial segments by value"},{type:"scatter-chart",label:"Scatter Chart",icon:"scatter-chart",description:"Individual data points"},{type:"bubble-chart",label:"Bubble Chart",icon:"circle-dot",description:"Points with size dimension"},{type:"tag-cloud",label:"Cloud",icon:"cloud",description:"Frequency-sized items"},{type:"timeline",label:"Timeline",icon:"calendar",description:"Date distribution"}],C9={heatmap:"Heatmap","bar-chart":"Bar Chart","line-chart":"Line Chart","area-chart":"Area Chart","pie-chart":"Pie Chart","doughnut-chart":"Doughnut Chart","radar-chart":"Radar Chart","polar-area-chart":"Polar Area Chart","scatter-chart":"Scatter Chart","bubble-chart":"Bubble Chart","tag-cloud":"Cloud",timeline:"Timeline"},x1=[{label:"0-1",min:0,max:1},{label:"0-5",min:0,max:5},{label:"1-5",min:1,max:5},{label:"0-10",min:0,max:10},{label:"1-10",min:1,max:10},{label:"0-100",min:0,max:100}],G5={auto:null,...Object.fromEntries(x1.map(($)=>[$.label,{min:$.min,max:$.max}]))};var q6=["heatmap","bar-chart","line-chart","area-chart","radar-chart","scatter-chart","bubble-chart"];function K1($){return q6.includes($)}var O9=["text","number","checkbox","date","datetime","list","tags"],z9={text:"Text",number:"Number",checkbox:"Checkbox",date:"Date",datetime:"Date & Time",list:"List",tags:"Tags"};function I9($,Q){return{id:$,name:"",displayName:"",type:"text",allowedValues:[],numberRange:null,defaultValue:null,required:!1,description:"",order:Q,mappings:[]}}var A9={tag:"Tag",folder:"Folder",regex:"Regex",formula:"Formula"};function S9($="folder"){return{type:$,value:"",enabled:!0}}var m1={visualizationPresets:[],animationDuration:3000,propertyDefinitions:[],showConfettiOnCapture:!0};var Y1="required",X5={required:"All required properties filled",all:"All properties filled",never:"Never"};var K0=require("obsidian");var k9=require("obsidian");class G6 extends k9.AbstractInputSuggest{inputEl;constructor($,Q){super(Q,$);this.inputEl=$}getSuggestions($){let Q=this.app.vault.getAllLoadedFiles(),J=[],Z=$.toLowerCase();return Q.forEach((q)=>{if(q instanceof k9.TFolder&&q.path.toLowerCase().contains(Z))J.push(q)}),J}renderSuggestion($,Q){Q.setText($.path)}selectSuggestion($){this.inputEl.value=$.path,this.inputEl.trigger("input"),this.close()}}var T$={empty:"var(--background-modifier-border)",levels:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"]};var b9={green:T$,blue:{empty:"var(--background-modifier-border)",levels:["#ebedf0","#c6e6ff","#79c0ff","#388bfd","#1f6feb"]},purple:{empty:"var(--background-modifier-border)",levels:["#ebedf0","#d8b9ff","#b87fff","#8957e5","#6e40c9"]},orange:{empty:"var(--background-modifier-border)",levels:["#ebedf0","#ffdfb6","#ffc680","#ffa657","#f0883e"]},red:{empty:"var(--background-modifier-border)",levels:["#ebedf0","#ffc1c1","#ff8080","#ff4040","#da3633"]}};function p1($,Q,J){if($===null||$===void 0)return 0;if(J===Q)return $>0?4:0;let Z=($-Q)/(J-Q);if(Z<=0)return 0;if(Z<=0.25)return 1;if(Z<=0.5)return 2;if(Z<=0.75)return 3;return 4}var b0=["#4c8bf5","#34a853","#fbbc05","#9334e6","#ea4335","#00bcd4","#ffeb3b","#e91e63"];function R1($,Q){if($.startsWith("var("))return $;if($.startsWith("#")){let J=$.slice(1),Z=parseInt(J.slice(0,2),16),q=parseInt(J.slice(2,4),16),G=parseInt(J.slice(4,6),16);return`rgba(${Z}, ${q}, ${G}, ${Q})`}if($.startsWith("rgb")){let J=$.match(/\d+/g);if(J&&J.length>=3){let[Z,q,G]=J;return`rgba(${Z}, ${q}, ${G}, ${Q})`}}return $}var u1={EMPTY:"--lt-heatmap-empty",LEVEL_0:"--lt-heatmap-level-0",LEVEL_1:"--lt-heatmap-level-1",LEVEL_2:"--lt-heatmap-level-2",LEVEL_3:"--lt-heatmap-level-3",LEVEL_4:"--lt-heatmap-level-4"};function X6($,Q){if(!Q)return;$.style.setProperty(u1.EMPTY,Q.empty),$.style.setProperty(u1.LEVEL_0,Q.levels[0]??""),$.style.setProperty(u1.LEVEL_1,Q.levels[1]??""),$.style.setProperty(u1.LEVEL_2,Q.levels[2]??""),$.style.setProperty(u1.LEVEL_3,Q.levels[3]??""),$.style.setProperty(u1.LEVEL_4,Q.levels[4]??"")}var Qq=Math.pow(10,8)*24*60*60*1000,oU=-Qq,y9=604800000,C$=86400000,x5=60000,g5=3600000,O$=1000;var K6=Symbol.for("constructDateFrom");function y($,Q){if(typeof $==="function")return $(Q);if($&&typeof $==="object"&&K6 in $)return $[K6](Q);if($ instanceof Date)return new $.constructor(Q);return new Date(Q)}function C($,Q){return y(Q||$,$)}function w1($,Q,J){let Z=C($,J?.in);if(isNaN(Q))return y(J?.in||$,NaN);if(!Q)return Z;return Z.setDate(Z.getDate()+Q),Z}function z$($,Q,J){let Z=C($,J?.in);if(isNaN(Q))return y(J?.in||$,NaN);if(!Q)return Z;let q=Z.getDate(),G=y(J?.in||$,Z.getTime());G.setMonth(Z.getMonth()+Q+1,0);let X=G.getDate();if(q>=X)return G;else return Z.setFullYear(G.getFullYear(),G.getMonth(),q),Z}var Jq={};function y0(){return Jq}function M0($,Q){let J=y0(),Z=Q?.weekStartsOn??Q?.locale?.options?.weekStartsOn??J.weekStartsOn??J.locale?.options?.weekStartsOn??0,q=C($,Q?.in),G=q.getDay(),X=(G<Z?7:0)+G-Z;return q.setDate(q.getDate()-X),q.setHours(0,0,0,0),q}function p0($,Q){return M0($,{...Q,weekStartsOn:1})}function v9($,Q){let J=C($,Q?.in),Z=J.getFullYear(),q=y(J,0);q.setFullYear(Z+1,0,4),q.setHours(0,0,0,0);let G=p0(q),X=y(J,0);X.setFullYear(Z,0,4),X.setHours(0,0,0,0);let K=p0(X);if(J.getTime()>=G.getTime())return Z+1;else if(J.getTime()>=K.getTime())return Z;else return Z-1}function d1($){let Q=C($),J=new Date(Date.UTC(Q.getFullYear(),Q.getMonth(),Q.getDate(),Q.getHours(),Q.getMinutes(),Q.getSeconds(),Q.getMilliseconds()));return J.setUTCFullYear(Q.getFullYear()),+$-+J}function K5($,...Q){let J=y.bind(null,$||Q.find((Z)=>typeof Z==="object"));return Q.map(J)}function E1($,Q){let J=C($,Q?.in);return J.setHours(0,0,0,0),J}function I$($,Q,J){let[Z,q]=K5(J?.in,$,Q),G=E1(Z),X=E1(q),K=+G-d1(G),Y=+X-d1(X);return Math.round((K-Y)/C$)}function A$($,Q){let J=v9($,Q),Z=y(Q?.in||$,0);return Z.setFullYear(J,0,4),Z.setHours(0,0,0,0),p0(Z)}function h9($,Q,J){return w1($,Q*7,J)}function S$($,Q){let J,Z=Q?.in;return $.forEach((q)=>{if(!Z&&typeof q==="object")Z=y.bind(null,q);let G=C(q,Z);if(!J||J<G||isNaN(+G))J=G}),y(Z,J||NaN)}function k$($,Q){let J,Z=Q?.in;return $.forEach((q)=>{if(!Z&&typeof q==="object")Z=y.bind(null,q);let G=C(q,Z);if(!J||J>G||isNaN(+G))J=G}),y(Z,J||NaN)}function n0($,Q){let J=+C($)-+C(Q);if(J<0)return-1;else if(J>0)return 1;return J}function f9($,Q,J){let[Z,q]=K5(J?.in,$,Q);return+E1(Z)===+E1(q)}function b$($){return $ instanceof Date||typeof $==="object"&&Object.prototype.toString.call($)==="[object Date]"}function c1($){return!(!b$($)&&typeof $!=="number"||isNaN(+C($)))}function Y6($,Q){let J=C($,Q?.in);return Math.trunc(J.getMonth()/3)+1}function U6($,Q){return+C($)-+C(Q)}function y$($,Q){let[J,Z]=K5($,Q.start,Q.end);return{start:J,end:Z}}function v$($,Q){let J=C($,Q?.in),Z=J.getMonth(),q=Z-Z%3;return J.setMonth(q,1),J.setHours(0,0,0,0),J}function h$($,Q){let{start:J,end:Z}=y$(Q?.in,$),q=+J>+Z,G=q?M0(Z,Q):M0(J,Q),X=q?M0(J,Q):M0(Z,Q);G.setHours(15),X.setHours(15);let K=+X.getTime(),Y=G,U=Q?.step??1;if(!U)return[];if(U<0)U=-U,q=!q;let N=[];while(+Y<=K)Y.setHours(0),N.push(y(J,Y)),Y=h9(Y,U),Y.setHours(15);return q?N.reverse():N}function f$($,Q){let J=C($,Q?.in);return J.setDate(1),J.setHours(0,0,0,0),J}function x9($,Q){let J=C($,Q?.in);return J.setFullYear(J.getFullYear(),0,1),J.setHours(0,0,0,0),J}var Zq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},x$=($,Q,J)=>{let Z,q=Zq[$];if(typeof q==="string")Z=q;else if(Q===1)Z=q.one;else Z=q.other.replace("{{count}}",Q.toString());if(J?.addSuffix)if(J.comparison&&J.comparison>0)return"in "+Z;else return Z+" ago";return Z};function g9($){return(Q={})=>{let J=Q.width?String(Q.width):$.defaultWidth;return $.formats[J]||$.formats[$.defaultWidth]}}var qq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Gq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},g$={date:g9({formats:qq,defaultWidth:"full"}),time:g9({formats:Gq,defaultWidth:"full"}),dateTime:g9({formats:Xq,defaultWidth:"full"})};var Kq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},m$=($,Q,J,Z)=>Kq[$];function Y5($){return(Q,J)=>{let Z=J?.context?String(J.context):"standalone",q;if(Z==="formatting"&&$.formattingValues){let X=$.defaultFormattingWidth||$.defaultWidth,K=J?.width?String(J.width):X;q=$.formattingValues[K]||$.formattingValues[X]}else{let X=$.defaultWidth,K=J?.width?String(J.width):$.defaultWidth;q=$.values[K]||$.values[X]}let G=$.argumentCallback?$.argumentCallback(Q):Q;return q[G]}}var Yq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Uq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Nq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Hq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wq=($,Q)=>{let J=Number($),Z=J%100;if(Z>20||Z<10)switch(Z%10){case 1:return J+"st";case 2:return J+"nd";case 3:return J+"rd"}return J+"th"},u$={ordinalNumber:Wq,era:Y5({values:Yq,defaultWidth:"wide"}),quarter:Y5({values:Uq,defaultWidth:"wide",argumentCallback:($)=>$-1}),month:Y5({values:Nq,defaultWidth:"wide"}),day:Y5({values:Hq,defaultWidth:"wide"}),dayPeriod:Y5({values:Mq,defaultWidth:"wide",formattingValues:Bq,defaultFormattingWidth:"wide"})};function U5($){return(Q,J={})=>{let Z=J.width,q=Z&&$.matchPatterns[Z]||$.matchPatterns[$.defaultMatchWidth],G=Q.match(q);if(!G)return null;let X=G[0],K=Z&&$.parsePatterns[Z]||$.parsePatterns[$.defaultParseWidth],Y=Array.isArray(K)?Lq(K,(H)=>H.test(X)):jq(K,(H)=>H.test(X)),U;U=$.valueCallback?$.valueCallback(Y):Y,U=J.valueCallback?J.valueCallback(U):U;let N=Q.slice(X.length);return{value:U,rest:N}}}function jq($,Q){for(let J in $)if(Object.prototype.hasOwnProperty.call($,J)&&Q($[J]))return J;return}function Lq($,Q){for(let J=0;J<$.length;J++)if(Q($[J]))return J;return}function p$($){return(Q,J={})=>{let Z=Q.match($.matchPattern);if(!Z)return null;let q=Z[0],G=Q.match($.parsePattern);if(!G)return null;let X=$.valueCallback?$.valueCallback(G[0]):G[0];X=J.valueCallback?J.valueCallback(X):X;let K=Q.slice(q.length);return{value:X,rest:K}}}var Fq=/^(\d+)(th|st|nd|rd)?/i,Vq=/\d+/i,_q={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Rq={any:[/^b/i,/^(a|c)/i]},wq={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Eq={any:[/1/i,/2/i,/3/i,/4/i]},Dq={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pq={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tq={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Cq={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Oq={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zq={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},d$={ordinalNumber:p$({matchPattern:Fq,parsePattern:Vq,valueCallback:($)=>parseInt($,10)}),era:U5({matchPatterns:_q,defaultMatchWidth:"wide",parsePatterns:Rq,defaultParseWidth:"any"}),quarter:U5({matchPatterns:wq,defaultMatchWidth:"wide",parsePatterns:Eq,defaultParseWidth:"any",valueCallback:($)=>$+1}),month:U5({matchPatterns:Dq,defaultMatchWidth:"wide",parsePatterns:Pq,defaultParseWidth:"any"}),day:U5({matchPatterns:Tq,defaultMatchWidth:"wide",parsePatterns:Cq,defaultParseWidth:"any"}),dayPeriod:U5({matchPatterns:Oq,defaultMatchWidth:"any",parsePatterns:zq,defaultParseWidth:"any"})};var m5={code:"en-US",formatDistance:x$,formatLong:g$,formatRelative:m$,localize:u$,match:d$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function c$($,Q){let J=C($,Q?.in);return I$(J,x9(J))+1}function N5($,Q){let J=C($,Q?.in),Z=+p0(J)-+A$(J);return Math.round(Z/y9)+1}function H5($,Q){let J=C($,Q?.in),Z=J.getFullYear(),q=y0(),G=Q?.firstWeekContainsDate??Q?.locale?.options?.firstWeekContainsDate??q.firstWeekContainsDate??q.locale?.options?.firstWeekContainsDate??1,X=y(Q?.in||$,0);X.setFullYear(Z+1,0,G),X.setHours(0,0,0,0);let K=M0(X,Q),Y=y(Q?.in||$,0);Y.setFullYear(Z,0,G),Y.setHours(0,0,0,0);let U=M0(Y,Q);if(+J>=+K)return Z+1;else if(+J>=+U)return Z;else return Z-1}function l$($,Q){let J=y0(),Z=Q?.firstWeekContainsDate??Q?.locale?.options?.firstWeekContainsDate??J.firstWeekContainsDate??J.locale?.options?.firstWeekContainsDate??1,q=H5($,Q),G=y(Q?.in||$,0);return G.setFullYear(q,0,Z),G.setHours(0,0,0,0),M0(G,Q)}function m9($,Q){let J=C($,Q?.in),Z=+M0(J,Q)-+l$(J,Q);return Math.round(Z/y9)+1}function n($,Q){let J=$<0?"-":"",Z=Math.abs($).toString().padStart(Q,"0");return J+Z}var U1={y($,Q){let J=$.getFullYear(),Z=J>0?J:1-J;return n(Q==="yy"?Z%100:Z,Q.length)},M($,Q){let J=$.getMonth();return Q==="M"?String(J+1):n(J+1,2)},d($,Q){return n($.getDate(),Q.length)},a($,Q){let J=$.getHours()/12>=1?"pm":"am";switch(Q){case"a":case"aa":return J.toUpperCase();case"aaa":return J;case"aaaaa":return J[0];case"aaaa":default:return J==="am"?"a.m.":"p.m."}},h($,Q){return n($.getHours()%12||12,Q.length)},H($,Q){return n($.getHours(),Q.length)},m($,Q){return n($.getMinutes(),Q.length)},s($,Q){return n($.getSeconds(),Q.length)},S($,Q){let J=Q.length,Z=$.getMilliseconds(),q=Math.trunc(Z*Math.pow(10,J-3));return n(q,Q.length)}};var M5={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},N6={G:function($,Q,J){let Z=$.getFullYear()>0?1:0;switch(Q){case"G":case"GG":case"GGG":return J.era(Z,{width:"abbreviated"});case"GGGGG":return J.era(Z,{width:"narrow"});case"GGGG":default:return J.era(Z,{width:"wide"})}},y:function($,Q,J){if(Q==="yo"){let Z=$.getFullYear(),q=Z>0?Z:1-Z;return J.ordinalNumber(q,{unit:"year"})}return U1.y($,Q)},Y:function($,Q,J,Z){let q=H5($,Z),G=q>0?q:1-q;if(Q==="YY"){let X=G%100;return n(X,2)}if(Q==="Yo")return J.ordinalNumber(G,{unit:"year"});return n(G,Q.length)},R:function($,Q){let J=v9($);return n(J,Q.length)},u:function($,Q){let J=$.getFullYear();return n(J,Q.length)},Q:function($,Q,J){let Z=Math.ceil(($.getMonth()+1)/3);switch(Q){case"Q":return String(Z);case"QQ":return n(Z,2);case"Qo":return J.ordinalNumber(Z,{unit:"quarter"});case"QQQ":return J.quarter(Z,{width:"abbreviated",context:"formatting"});case"QQQQQ":return J.quarter(Z,{width:"narrow",context:"formatting"});case"QQQQ":default:return J.quarter(Z,{width:"wide",context:"formatting"})}},q:function($,Q,J){let Z=Math.ceil(($.getMonth()+1)/3);switch(Q){case"q":return String(Z);case"qq":return n(Z,2);case"qo":return J.ordinalNumber(Z,{unit:"quarter"});case"qqq":return J.quarter(Z,{width:"abbreviated",context:"standalone"});case"qqqqq":return J.quarter(Z,{width:"narrow",context:"standalone"});case"qqqq":default:return J.quarter(Z,{width:"wide",context:"standalone"})}},M:function($,Q,J){let Z=$.getMonth();switch(Q){case"M":case"MM":return U1.M($,Q);case"Mo":return J.ordinalNumber(Z+1,{unit:"month"});case"MMM":return J.month(Z,{width:"abbreviated",context:"formatting"});case"MMMMM":return J.month(Z,{width:"narrow",context:"formatting"});case"MMMM":default:return J.month(Z,{width:"wide",context:"formatting"})}},L:function($,Q,J){let Z=$.getMonth();switch(Q){case"L":return String(Z+1);case"LL":return n(Z+1,2);case"Lo":return J.ordinalNumber(Z+1,{unit:"month"});case"LLL":return J.month(Z,{width:"abbreviated",context:"standalone"});case"LLLLL":return J.month(Z,{width:"narrow",context:"standalone"});case"LLLL":default:return J.month(Z,{width:"wide",context:"standalone"})}},w:function($,Q,J,Z){let q=m9($,Z);if(Q==="wo")return J.ordinalNumber(q,{unit:"week"});return n(q,Q.length)},I:function($,Q,J){let Z=N5($);if(Q==="Io")return J.ordinalNumber(Z,{unit:"week"});return n(Z,Q.length)},d:function($,Q,J){if(Q==="do")return J.ordinalNumber($.getDate(),{unit:"date"});return U1.d($,Q)},D:function($,Q,J){let Z=c$($);if(Q==="Do")return J.ordinalNumber(Z,{unit:"dayOfYear"});return n(Z,Q.length)},E:function($,Q,J){let Z=$.getDay();switch(Q){case"E":case"EE":case"EEE":return J.day(Z,{width:"abbreviated",context:"formatting"});case"EEEEE":return J.day(Z,{width:"narrow",context:"formatting"});case"EEEEEE":return J.day(Z,{width:"short",context:"formatting"});case"EEEE":default:return J.day(Z,{width:"wide",context:"formatting"})}},e:function($,Q,J,Z){let q=$.getDay(),G=(q-Z.weekStartsOn+8)%7||7;switch(Q){case"e":return String(G);case"ee":return n(G,2);case"eo":return J.ordinalNumber(G,{unit:"day"});case"eee":return J.day(q,{width:"abbreviated",context:"formatting"});case"eeeee":return J.day(q,{width:"narrow",context:"formatting"});case"eeeeee":return J.day(q,{width:"short",context:"formatting"});case"eeee":default:return J.day(q,{width:"wide",context:"formatting"})}},c:function($,Q,J,Z){let q=$.getDay(),G=(q-Z.weekStartsOn+8)%7||7;switch(Q){case"c":return String(G);case"cc":return n(G,Q.length);case"co":return J.ordinalNumber(G,{unit:"day"});case"ccc":return J.day(q,{width:"abbreviated",context:"standalone"});case"ccccc":return J.day(q,{width:"narrow",context:"standalone"});case"cccccc":return J.day(q,{width:"short",context:"standalone"});case"cccc":default:return J.day(q,{width:"wide",context:"standalone"})}},i:function($,Q,J){let Z=$.getDay(),q=Z===0?7:Z;switch(Q){case"i":return String(q);case"ii":return n(q,Q.length);case"io":return J.ordinalNumber(q,{unit:"day"});case"iii":return J.day(Z,{width:"abbreviated",context:"formatting"});case"iiiii":return J.day(Z,{width:"narrow",context:"formatting"});case"iiiiii":return J.day(Z,{width:"short",context:"formatting"});case"iiii":default:return J.day(Z,{width:"wide",context:"formatting"})}},a:function($,Q,J){let q=$.getHours()/12>=1?"pm":"am";switch(Q){case"a":case"aa":return J.dayPeriod(q,{width:"abbreviated",context:"formatting"});case"aaa":return J.dayPeriod(q,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return J.dayPeriod(q,{width:"narrow",context:"formatting"});case"aaaa":default:return J.dayPeriod(q,{width:"wide",context:"formatting"})}},b:function($,Q,J){let Z=$.getHours(),q;if(Z===12)q=M5.noon;else if(Z===0)q=M5.midnight;else q=Z/12>=1?"pm":"am";switch(Q){case"b":case"bb":return J.dayPeriod(q,{width:"abbreviated",context:"formatting"});case"bbb":return J.dayPeriod(q,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return J.dayPeriod(q,{width:"narrow",context:"formatting"});case"bbbb":default:return J.dayPeriod(q,{width:"wide",context:"formatting"})}},B:function($,Q,J){let Z=$.getHours(),q;if(Z>=17)q=M5.evening;else if(Z>=12)q=M5.afternoon;else if(Z>=4)q=M5.morning;else q=M5.night;switch(Q){case"B":case"BB":case"BBB":return J.dayPeriod(q,{width:"abbreviated",context:"formatting"});case"BBBBB":return J.dayPeriod(q,{width:"narrow",context:"formatting"});case"BBBB":default:return J.dayPeriod(q,{width:"wide",context:"formatting"})}},h:function($,Q,J){if(Q==="ho"){let Z=$.getHours()%12;if(Z===0)Z=12;return J.ordinalNumber(Z,{unit:"hour"})}return U1.h($,Q)},H:function($,Q,J){if(Q==="Ho")return J.ordinalNumber($.getHours(),{unit:"hour"});return U1.H($,Q)},K:function($,Q,J){let Z=$.getHours()%12;if(Q==="Ko")return J.ordinalNumber(Z,{unit:"hour"});return n(Z,Q.length)},k:function($,Q,J){let Z=$.getHours();if(Z===0)Z=24;if(Q==="ko")return J.ordinalNumber(Z,{unit:"hour"});return n(Z,Q.length)},m:function($,Q,J){if(Q==="mo")return J.ordinalNumber($.getMinutes(),{unit:"minute"});return U1.m($,Q)},s:function($,Q,J){if(Q==="so")return J.ordinalNumber($.getSeconds(),{unit:"second"});return U1.s($,Q)},S:function($,Q){return U1.S($,Q)},X:function($,Q,J){let Z=$.getTimezoneOffset();if(Z===0)return"Z";switch(Q){case"X":return s$(Z);case"XXXX":case"XX":return l1(Z);case"XXXXX":case"XXX":default:return l1(Z,":")}},x:function($,Q,J){let Z=$.getTimezoneOffset();switch(Q){case"x":return s$(Z);case"xxxx":case"xx":return l1(Z);case"xxxxx":case"xxx":default:return l1(Z,":")}},O:function($,Q,J){let Z=$.getTimezoneOffset();switch(Q){case"O":case"OO":case"OOO":return"GMT"+r$(Z,":");case"OOOO":default:return"GMT"+l1(Z,":")}},z:function($,Q,J){let Z=$.getTimezoneOffset();switch(Q){case"z":case"zz":case"zzz":return"GMT"+r$(Z,":");case"zzzz":default:return"GMT"+l1(Z,":")}},t:function($,Q,J){let Z=Math.trunc(+$/1000);return n(Z,Q.length)},T:function($,Q,J){return n(+$,Q.length)}};function r$($,Q=""){let J=$>0?"-":"+",Z=Math.abs($),q=Math.trunc(Z/60),G=Z%60;if(G===0)return J+String(q);return J+String(q)+Q+n(G,2)}function s$($,Q){if($%60===0)return($>0?"-":"+")+n(Math.abs($)/60,2);return l1($,Q)}function l1($,Q=""){let J=$>0?"-":"+",Z=Math.abs($),q=n(Math.trunc(Z/60),2),G=n(Z%60,2);return J+q+Q+G}var o$=($,Q)=>{switch($){case"P":return Q.date({width:"short"});case"PP":return Q.date({width:"medium"});case"PPP":return Q.date({width:"long"});case"PPPP":default:return Q.date({width:"full"})}},n$=($,Q)=>{switch($){case"p":return Q.time({width:"short"});case"pp":return Q.time({width:"medium"});case"ppp":return Q.time({width:"long"});case"pppp":default:return Q.time({width:"full"})}},Iq=($,Q)=>{let J=$.match(/(P+)(p+)?/)||[],Z=J[1],q=J[2];if(!q)return o$($,Q);let G;switch(Z){case"P":G=Q.dateTime({width:"short"});break;case"PP":G=Q.dateTime({width:"medium"});break;case"PPP":G=Q.dateTime({width:"long"});break;case"PPPP":default:G=Q.dateTime({width:"full"});break}return G.replace("{{date}}",o$(Z,Q)).replace("{{time}}",n$(q,Q))},u5={p:n$,P:Iq};var Aq=/^D+$/,Sq=/^Y+$/,kq=["D","DD","YY","YYYY"];function u9($){return Aq.test($)}function p9($){return Sq.test($)}function p5($,Q,J){let Z=bq($,Q,J);if(console.warn(Z),kq.includes($))throw RangeError(Z)}function bq($,Q,J){let Z=$[0]==="Y"?"years":"days of the month";return`Use \`${$.toLowerCase()}\` instead of \`${$}\` (in \`${Q}\`) for formatting ${Z} to the input \`${J}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var yq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hq=/^'([^]*?)'?$/,fq=/''/g,xq=/[a-zA-Z]/;function V0($,Q,J){let Z=y0(),q=J?.locale??Z.locale??m5,G=J?.firstWeekContainsDate??J?.locale?.options?.firstWeekContainsDate??Z.firstWeekContainsDate??Z.locale?.options?.firstWeekContainsDate??1,X=J?.weekStartsOn??J?.locale?.options?.weekStartsOn??Z.weekStartsOn??Z.locale?.options?.weekStartsOn??0,K=C($,J?.in);if(!c1(K))throw RangeError("Invalid time value");let Y=Q.match(vq).map((N)=>{let H=N[0];if(H==="p"||H==="P"){let M=u5[H];return M(N,q.formatLong)}return N}).join("").match(yq).map((N)=>{if(N==="''")return{isToken:!1,value:"'"};let H=N[0];if(H==="'")return{isToken:!1,value:gq(N)};if(N6[H])return{isToken:!0,value:N};if(H.match(xq))throw RangeError("Format string contains an unescaped latin alphabet character `"+H+"`");return{isToken:!1,value:N}});if(q.localize.preprocessor)Y=q.localize.preprocessor(K,Y);let U={firstWeekContainsDate:G,weekStartsOn:X,locale:q};return Y.map((N)=>{if(!N.isToken)return N.value;let H=N.value;if(!J?.useAdditionalWeekYearTokens&&p9(H)||!J?.useAdditionalDayOfYearTokens&&u9(H))p5(H,Q,String($));let M=N6[H[0]];return M(K,H,q.localize,U)}).join("")}function gq($){let Q=$.match(hq);if(!Q)return $;return Q[1].replace(fq,"'")}function i$(){return Object.assign({},y0())}function a$($,Q){let J=C($,Q?.in).getDay();return J===0?7:J}function t$($,Q){return C($,Q?.in).getMonth()}function H6($,Q){return C($,Q?.in).getFullYear()}function e$($,Q){let J=mq(Q)?new Q(0):y(Q,0);return J.setFullYear($.getFullYear(),$.getMonth(),$.getDate()),J.setHours($.getHours(),$.getMinutes(),$.getSeconds(),$.getMilliseconds()),J}function mq($){return typeof $==="function"&&$.prototype?.constructor===$}var uq=10;class M6{subPriority=0;validate($,Q){return!0}}class B6 extends M6{constructor($,Q,J,Z,q){super();if(this.value=$,this.validateValue=Q,this.setValue=J,this.priority=Z,q)this.subPriority=q}validate($,Q){return this.validateValue($,this.value,Q)}set($,Q,J){return this.setValue($,Q,this.value,J)}}class W6 extends M6{priority=uq;subPriority=-1;constructor($,Q){super();this.context=$||((J)=>y(Q,J))}set($,Q){if(Q.timestampIsSet)return $;return y($,e$($,this.context))}}class O{run($,Q,J,Z){let q=this.parse($,Q,J,Z);if(!q)return null;return{setter:new B6(q.value,this.validate,this.set,this.priority,this.subPriority),rest:q.rest}}validate($,Q,J){return!0}}class j6 extends O{priority=140;parse($,Q,J){switch(Q){case"G":case"GG":case"GGG":return J.era($,{width:"abbreviated"})||J.era($,{width:"narrow"});case"GGGGG":return J.era($,{width:"narrow"});case"GGGG":default:return J.era($,{width:"wide"})||J.era($,{width:"abbreviated"})||J.era($,{width:"narrow"})}}set($,Q,J){return Q.era=J,$.setFullYear(J,0,1),$.setHours(0,0,0,0),$}incompatibleTokens=["R","u","t","T"]}var r={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},v0={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function a($,Q){if(!$)return $;return{value:Q($.value),rest:$.rest}}function l($,Q){let J=Q.match($);if(!J)return null;return{value:parseInt(J[0],10),rest:Q.slice(J[0].length)}}function h0($,Q){let J=Q.match($);if(!J)return null;if(J[0]==="Z")return{value:0,rest:Q.slice(1)};let Z=J[1]==="+"?1:-1,q=J[2]?parseInt(J[2],10):0,G=J[3]?parseInt(J[3],10):0,X=J[5]?parseInt(J[5],10):0;return{value:Z*(q*g5+G*x5+X*O$),rest:Q.slice(J[0].length)}}function d9($){return l(r.anyDigitsSigned,$)}function f($,Q){switch($){case 1:return l(r.singleDigit,Q);case 2:return l(r.twoDigits,Q);case 3:return l(r.threeDigits,Q);case 4:return l(r.fourDigits,Q);default:return l(new RegExp("^\\d{1,"+$+"}"),Q)}}function B5($,Q){switch($){case 1:return l(r.singleDigitSigned,Q);case 2:return l(r.twoDigitsSigned,Q);case 3:return l(r.threeDigitsSigned,Q);case 4:return l(r.fourDigitsSigned,Q);default:return l(new RegExp("^-?\\d{1,"+$+"}"),Q)}}function W5($){switch($){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function c9($,Q){let J=Q>0,Z=J?Q:1-Q,q;if(Z<=50)q=$||100;else{let G=Z+50,X=Math.trunc(G/100)*100,K=$>=G%100;q=$+X-(K?100:0)}return J?q:1-q}function l9($){return $%400===0||$%4===0&&$%100!==0}class L6 extends O{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse($,Q,J){let Z=(q)=>({year:q,isTwoDigitYear:Q==="yy"});switch(Q){case"y":return a(f(4,$),Z);case"yo":return a(J.ordinalNumber($,{unit:"year"}),Z);default:return a(f(Q.length,$),Z)}}validate($,Q){return Q.isTwoDigitYear||Q.year>0}set($,Q,J){let Z=$.getFullYear();if(J.isTwoDigitYear){let G=c9(J.year,Z);return $.setFullYear(G,0,1),$.setHours(0,0,0,0),$}let q=!("era"in Q)||Q.era===1?J.year:1-J.year;return $.setFullYear(q,0,1),$.setHours(0,0,0,0),$}}class F6 extends O{priority=130;parse($,Q,J){let Z=(q)=>({year:q,isTwoDigitYear:Q==="YY"});switch(Q){case"Y":return a(f(4,$),Z);case"Yo":return a(J.ordinalNumber($,{unit:"year"}),Z);default:return a(f(Q.length,$),Z)}}validate($,Q){return Q.isTwoDigitYear||Q.year>0}set($,Q,J,Z){let q=H5($,Z);if(J.isTwoDigitYear){let X=c9(J.year,q);return $.setFullYear(X,0,Z.firstWeekContainsDate),$.setHours(0,0,0,0),M0($,Z)}let G=!("era"in Q)||Q.era===1?J.year:1-J.year;return $.setFullYear(G,0,Z.firstWeekContainsDate),$.setHours(0,0,0,0),M0($,Z)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class V6 extends O{priority=130;parse($,Q){if(Q==="R")return B5(4,$);return B5(Q.length,$)}set($,Q,J){let Z=y($,0);return Z.setFullYear(J,0,4),Z.setHours(0,0,0,0),p0(Z)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class _6 extends O{priority=130;parse($,Q){if(Q==="u")return B5(4,$);return B5(Q.length,$)}set($,Q,J){return $.setFullYear(J,0,1),$.setHours(0,0,0,0),$}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class R6 extends O{priority=120;parse($,Q,J){switch(Q){case"Q":case"QQ":return f(Q.length,$);case"Qo":return J.ordinalNumber($,{unit:"quarter"});case"QQQ":return J.quarter($,{width:"abbreviated",context:"formatting"})||J.quarter($,{width:"narrow",context:"formatting"});case"QQQQQ":return J.quarter($,{width:"narrow",context:"formatting"});case"QQQQ":default:return J.quarter($,{width:"wide",context:"formatting"})||J.quarter($,{width:"abbreviated",context:"formatting"})||J.quarter($,{width:"narrow",context:"formatting"})}}validate($,Q){return Q>=1&&Q<=4}set($,Q,J){return $.setMonth((J-1)*3,1),$.setHours(0,0,0,0),$}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class w6 extends O{priority=120;parse($,Q,J){switch(Q){case"q":case"qq":return f(Q.length,$);case"qo":return J.ordinalNumber($,{unit:"quarter"});case"qqq":return J.quarter($,{width:"abbreviated",context:"standalone"})||J.quarter($,{width:"narrow",context:"standalone"});case"qqqqq":return J.quarter($,{width:"narrow",context:"standalone"});case"qqqq":default:return J.quarter($,{width:"wide",context:"standalone"})||J.quarter($,{width:"abbreviated",context:"standalone"})||J.quarter($,{width:"narrow",context:"standalone"})}}validate($,Q){return Q>=1&&Q<=4}set($,Q,J){return $.setMonth((J-1)*3,1),$.setHours(0,0,0,0),$}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class E6 extends O{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse($,Q,J){let Z=(q)=>q-1;switch(Q){case"M":return a(l(r.month,$),Z);case"MM":return a(f(2,$),Z);case"Mo":return a(J.ordinalNumber($,{unit:"month"}),Z);case"MMM":return J.month($,{width:"abbreviated",context:"formatting"})||J.month($,{width:"narrow",context:"formatting"});case"MMMMM":return J.month($,{width:"narrow",context:"formatting"});case"MMMM":default:return J.month($,{width:"wide",context:"formatting"})||J.month($,{width:"abbreviated",context:"formatting"})||J.month($,{width:"narrow",context:"formatting"})}}validate($,Q){return Q>=0&&Q<=11}set($,Q,J){return $.setMonth(J,1),$.setHours(0,0,0,0),$}}class D6 extends O{priority=110;parse($,Q,J){let Z=(q)=>q-1;switch(Q){case"L":return a(l(r.month,$),Z);case"LL":return a(f(2,$),Z);case"Lo":return a(J.ordinalNumber($,{unit:"month"}),Z);case"LLL":return J.month($,{width:"abbreviated",context:"standalone"})||J.month($,{width:"narrow",context:"standalone"});case"LLLLL":return J.month($,{width:"narrow",context:"standalone"});case"LLLL":default:return J.month($,{width:"wide",context:"standalone"})||J.month($,{width:"abbreviated",context:"standalone"})||J.month($,{width:"narrow",context:"standalone"})}}validate($,Q){return Q>=0&&Q<=11}set($,Q,J){return $.setMonth(J,1),$.setHours(0,0,0,0),$}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function $Q($,Q,J){let Z=C($,J?.in),q=m9(Z,J)-Q;return Z.setDate(Z.getDate()-q*7),C(Z,J?.in)}class P6 extends O{priority=100;parse($,Q,J){switch(Q){case"w":return l(r.week,$);case"wo":return J.ordinalNumber($,{unit:"week"});default:return f(Q.length,$)}}validate($,Q){return Q>=1&&Q<=53}set($,Q,J,Z){return M0($Q($,J,Z),Z)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function r9($,Q,J){let Z=C($,J?.in),q=N5(Z,J)-Q;return Z.setDate(Z.getDate()-q*7),Z}class T6 extends O{priority=100;parse($,Q,J){switch(Q){case"I":return l(r.week,$);case"Io":return J.ordinalNumber($,{unit:"week"});default:return f(Q.length,$)}}validate($,Q){return Q>=1&&Q<=53}set($,Q,J){return p0(r9($,J))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}var pq=[31,28,31,30,31,30,31,31,30,31,30,31],dq=[31,29,31,30,31,30,31,31,30,31,30,31];class C6 extends O{priority=90;subPriority=1;parse($,Q,J){switch(Q){case"d":return l(r.date,$);case"do":return J.ordinalNumber($,{unit:"date"});default:return f(Q.length,$)}}validate($,Q){let J=$.getFullYear(),Z=l9(J),q=$.getMonth();if(Z)return Q>=1&&Q<=dq[q];else return Q>=1&&Q<=pq[q]}set($,Q,J){return $.setDate(J),$.setHours(0,0,0,0),$}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class O6 extends O{priority=90;subpriority=1;parse($,Q,J){switch(Q){case"D":case"DD":return l(r.dayOfYear,$);case"Do":return J.ordinalNumber($,{unit:"date"});default:return f(Q.length,$)}}validate($,Q){let J=$.getFullYear();if(l9(J))return Q>=1&&Q<=366;else return Q>=1&&Q<=365}set($,Q,J){return $.setMonth(0,J),$.setHours(0,0,0,0),$}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function j5($,Q,J){let Z=y0(),q=J?.weekStartsOn??J?.locale?.options?.weekStartsOn??Z.weekStartsOn??Z.locale?.options?.weekStartsOn??0,G=C($,J?.in),X=G.getDay(),Y=(Q%7+7)%7,U=7-q,N=Q<0||Q>6?Q-(X+U)%7:(Y+U)%7-(X+U)%7;return w1(G,N,J)}class z6 extends O{priority=90;parse($,Q,J){switch(Q){case"E":case"EE":case"EEE":return J.day($,{width:"abbreviated",context:"formatting"})||J.day($,{width:"short",context:"formatting"})||J.day($,{width:"narrow",context:"formatting"});case"EEEEE":return J.day($,{width:"narrow",context:"formatting"});case"EEEEEE":return J.day($,{width:"short",context:"formatting"})||J.day($,{width:"narrow",context:"formatting"});case"EEEE":default:return J.day($,{width:"wide",context:"formatting"})||J.day($,{width:"abbreviated",context:"formatting"})||J.day($,{width:"short",context:"formatting"})||J.day($,{width:"narrow",context:"formatting"})}}validate($,Q){return Q>=0&&Q<=6}set($,Q,J,Z){return $=j5($,J,Z),$.setHours(0,0,0,0),$}incompatibleTokens=["D","i","e","c","t","T"]}class I6 extends O{priority=90;parse($,Q,J,Z){let q=(G)=>{let X=Math.floor((G-1)/7)*7;return(G+Z.weekStartsOn+6)%7+X};switch(Q){case"e":case"ee":return a(f(Q.length,$),q);case"eo":return a(J.ordinalNumber($,{unit:"day"}),q);case"eee":return J.day($,{width:"abbreviated",context:"formatting"})||J.day($,{width:"short",context:"formatting"})||J.day($,{width:"narrow",context:"formatting"});case"eeeee":return J.day($,{width:"narrow",context:"formatting"});case"eeeeee":return J.day($,{width:"short",context:"formatting"})||J.day($,{width:"narrow",context:"formatting"});case"eeee":default:return J.day($,{width:"wide",context:"formatting"})||J.day($,{width:"abbreviated",context:"formatting"})||J.day($,{width:"short",context:"formatting"})||J.day($,{width:"narrow",context:"formatting"})}}validate($,Q){return Q>=0&&Q<=6}set($,Q,J,Z){return $=j5($,J,Z),$.setHours(0,0,0,0),$}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class A6 extends O{priority=90;parse($,Q,J,Z){let q=(G)=>{let X=Math.floor((G-1)/7)*7;return(G+Z.weekStartsOn+6)%7+X};switch(Q){case"c":case"cc":return a(f(Q.length,$),q);case"co":return a(J.ordinalNumber($,{unit:"day"}),q);case"ccc":return J.day($,{width:"abbreviated",context:"standalone"})||J.day($,{width:"short",context:"standalone"})||J.day($,{width:"narrow",context:"standalone"});case"ccccc":return J.day($,{width:"narrow",context:"standalone"});case"cccccc":return J.day($,{width:"short",context:"standalone"})||J.day($,{width:"narrow",context:"standalone"});case"cccc":default:return J.day($,{width:"wide",context:"standalone"})||J.day($,{width:"abbreviated",context:"standalone"})||J.day($,{width:"short",context:"standalone"})||J.day($,{width:"narrow",context:"standalone"})}}validate($,Q){return Q>=0&&Q<=6}set($,Q,J,Z){return $=j5($,J,Z),$.setHours(0,0,0,0),$}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function QQ($,Q,J){let Z=C($,J?.in),q=a$(Z,J),G=Q-q;return w1(Z,G,J)}class S6 extends O{priority=90;parse($,Q,J){let Z=(q)=>{if(q===0)return 7;return q};switch(Q){case"i":case"ii":return f(Q.length,$);case"io":return J.ordinalNumber($,{unit:"day"});case"iii":return a(J.day($,{width:"abbreviated",context:"formatting"})||J.day($,{width:"short",context:"formatting"})||J.day($,{width:"narrow",context:"formatting"}),Z);case"iiiii":return a(J.day($,{width:"narrow",context:"formatting"}),Z);case"iiiiii":return a(J.day($,{width:"short",context:"formatting"})||J.day($,{width:"narrow",context:"formatting"}),Z);case"iiii":default:return a(J.day($,{width:"wide",context:"formatting"})||J.day($,{width:"abbreviated",context:"formatting"})||J.day($,{width:"short",context:"formatting"})||J.day($,{width:"narrow",context:"formatting"}),Z)}}validate($,Q){return Q>=1&&Q<=7}set($,Q,J){return $=QQ($,J),$.setHours(0,0,0,0),$}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class k6 extends O{priority=80;parse($,Q,J){switch(Q){case"a":case"aa":case"aaa":return J.dayPeriod($,{width:"abbreviated",context:"formatting"})||J.dayPeriod($,{width:"narrow",context:"formatting"});case"aaaaa":return J.dayPeriod($,{width:"narrow",context:"formatting"});case"aaaa":default:return J.dayPeriod($,{width:"wide",context:"formatting"})||J.dayPeriod($,{width:"abbreviated",context:"formatting"})||J.dayPeriod($,{width:"narrow",context:"formatting"})}}set($,Q,J){return $.setHours(W5(J),0,0,0),$}incompatibleTokens=["b","B","H","k","t","T"]}class b6 extends O{priority=80;parse($,Q,J){switch(Q){case"b":case"bb":case"bbb":return J.dayPeriod($,{width:"abbreviated",context:"formatting"})||J.dayPeriod($,{width:"narrow",context:"formatting"});case"bbbbb":return J.dayPeriod($,{width:"narrow",context:"formatting"});case"bbbb":default:return J.dayPeriod($,{width:"wide",context:"formatting"})||J.dayPeriod($,{width:"abbreviated",context:"formatting"})||J.dayPeriod($,{width:"narrow",context:"formatting"})}}set($,Q,J){return $.setHours(W5(J),0,0,0),$}incompatibleTokens=["a","B","H","k","t","T"]}class y6 extends O{priority=80;parse($,Q,J){switch(Q){case"B":case"BB":case"BBB":return J.dayPeriod($,{width:"abbreviated",context:"formatting"})||J.dayPeriod($,{width:"narrow",context:"formatting"});case"BBBBB":return J.dayPeriod($,{width:"narrow",context:"formatting"});case"BBBB":default:return J.dayPeriod($,{width:"wide",context:"formatting"})||J.dayPeriod($,{width:"abbreviated",context:"formatting"})||J.dayPeriod($,{width:"narrow",context:"formatting"})}}set($,Q,J){return $.setHours(W5(J),0,0,0),$}incompatibleTokens=["a","b","t","T"]}class v6 extends O{priority=70;parse($,Q,J){switch(Q){case"h":return l(r.hour12h,$);case"ho":return J.ordinalNumber($,{unit:"hour"});default:return f(Q.length,$)}}validate($,Q){return Q>=1&&Q<=12}set($,Q,J){let Z=$.getHours()>=12;if(Z&&J<12)$.setHours(J+12,0,0,0);else if(!Z&&J===12)$.setHours(0,0,0,0);else $.setHours(J,0,0,0);return $}incompatibleTokens=["H","K","k","t","T"]}class h6 extends O{priority=70;parse($,Q,J){switch(Q){case"H":return l(r.hour23h,$);case"Ho":return J.ordinalNumber($,{unit:"hour"});default:return f(Q.length,$)}}validate($,Q){return Q>=0&&Q<=23}set($,Q,J){return $.setHours(J,0,0,0),$}incompatibleTokens=["a","b","h","K","k","t","T"]}class f6 extends O{priority=70;parse($,Q,J){switch(Q){case"K":return l(r.hour11h,$);case"Ko":return J.ordinalNumber($,{unit:"hour"});default:return f(Q.length,$)}}validate($,Q){return Q>=0&&Q<=11}set($,Q,J){if($.getHours()>=12&&J<12)$.setHours(J+12,0,0,0);else $.setHours(J,0,0,0);return $}incompatibleTokens=["h","H","k","t","T"]}class x6 extends O{priority=70;parse($,Q,J){switch(Q){case"k":return l(r.hour24h,$);case"ko":return J.ordinalNumber($,{unit:"hour"});default:return f(Q.length,$)}}validate($,Q){return Q>=1&&Q<=24}set($,Q,J){let Z=J<=24?J%24:J;return $.setHours(Z,0,0,0),$}incompatibleTokens=["a","b","h","H","K","t","T"]}class g6 extends O{priority=60;parse($,Q,J){switch(Q){case"m":return l(r.minute,$);case"mo":return J.ordinalNumber($,{unit:"minute"});default:return f(Q.length,$)}}validate($,Q){return Q>=0&&Q<=59}set($,Q,J){return $.setMinutes(J,0,0),$}incompatibleTokens=["t","T"]}class m6 extends O{priority=50;parse($,Q,J){switch(Q){case"s":return l(r.second,$);case"so":return J.ordinalNumber($,{unit:"second"});default:return f(Q.length,$)}}validate($,Q){return Q>=0&&Q<=59}set($,Q,J){return $.setSeconds(J,0),$}incompatibleTokens=["t","T"]}class u6 extends O{priority=30;parse($,Q){let J=(Z)=>Math.trunc(Z*Math.pow(10,-Q.length+3));return a(f(Q.length,$),J)}set($,Q,J){return $.setMilliseconds(J),$}incompatibleTokens=["t","T"]}class p6 extends O{priority=10;parse($,Q){switch(Q){case"X":return h0(v0.basicOptionalMinutes,$);case"XX":return h0(v0.basic,$);case"XXXX":return h0(v0.basicOptionalSeconds,$);case"XXXXX":return h0(v0.extendedOptionalSeconds,$);case"XXX":default:return h0(v0.extended,$)}}set($,Q,J){if(Q.timestampIsSet)return $;return y($,$.getTime()-d1($)-J)}incompatibleTokens=["t","T","x"]}class d6 extends O{priority=10;parse($,Q){switch(Q){case"x":return h0(v0.basicOptionalMinutes,$);case"xx":return h0(v0.basic,$);case"xxxx":return h0(v0.basicOptionalSeconds,$);case"xxxxx":return h0(v0.extendedOptionalSeconds,$);case"xxx":default:return h0(v0.extended,$)}}set($,Q,J){if(Q.timestampIsSet)return $;return y($,$.getTime()-d1($)-J)}incompatibleTokens=["t","T","X"]}class c6 extends O{priority=40;parse($){return d9($)}set($,Q,J){return[y($,J*1000),{timestampIsSet:!0}]}incompatibleTokens="*"}class l6 extends O{priority=20;parse($){return d9($)}set($,Q,J){return[y($,J),{timestampIsSet:!0}]}incompatibleTokens="*"}var JQ={G:new j6,y:new L6,Y:new F6,R:new V6,u:new _6,Q:new R6,q:new w6,M:new E6,L:new D6,w:new P6,I:new T6,d:new C6,D:new O6,E:new z6,e:new I6,c:new A6,i:new S6,a:new k6,b:new b6,B:new y6,h:new v6,H:new h6,K:new f6,k:new x6,m:new g6,s:new m6,S:new u6,X:new p6,x:new d6,t:new c6,T:new l6};var cq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rq=/^'([^]*?)'?$/,sq=/''/g,oq=/\S/,nq=/[a-zA-Z]/;function r6($,Q,J,Z){let q=()=>y(Z?.in||J,NaN),G=i$(),X=Z?.locale??G.locale??m5,K=Z?.firstWeekContainsDate??Z?.locale?.options?.firstWeekContainsDate??G.firstWeekContainsDate??G.locale?.options?.firstWeekContainsDate??1,Y=Z?.weekStartsOn??Z?.locale?.options?.weekStartsOn??G.weekStartsOn??G.locale?.options?.weekStartsOn??0;if(!Q)return $?q():C(J,Z?.in);let U={firstWeekContainsDate:K,weekStartsOn:Y,locale:X},N=[new W6(Z?.in,J)],H=Q.match(lq).map((W)=>{let V=W[0];if(V in u5){let _=u5[V];return _(W,X.formatLong)}return W}).join("").match(cq),M=[];for(let W of H){if(!Z?.useAdditionalWeekYearTokens&&p9(W))p5(W,Q,$);if(!Z?.useAdditionalDayOfYearTokens&&u9(W))p5(W,Q,$);let V=W[0],_=JQ[V];if(_){let{incompatibleTokens:D}=_;if(Array.isArray(D)){let w=M.find((P)=>D.includes(P.token)||P.token===V);if(w)throw RangeError(`The format string mustn't contain \`${w.fullToken}\` and \`${W}\` at the same time`)}else if(_.incompatibleTokens==="*"&&M.length>0)throw RangeError(`The format string mustn't contain \`${W}\` and any other token at the same time`);M.push({token:V,fullToken:W});let E=_.run($,W,X.match,U);if(!E)return q();N.push(E.setter),$=E.rest}else{if(V.match(nq))throw RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");if(W==="''")W="'";else if(V==="'")W=iq(W);if($.indexOf(W)===0)$=$.slice(W.length);else return q()}}if($.length>0&&oq.test($))return q();let B=N.map((W)=>W.priority).sort((W,V)=>V-W).filter((W,V,_)=>_.indexOf(W)===V).map((W)=>N.filter((V)=>V.priority===W).sort((V,_)=>_.subPriority-V.subPriority)).map((W)=>W[0]),j=C(J,Z?.in);if(isNaN(+j))return q();let L={};for(let W of B){if(!W.validate(j,U))return q();let V=W.set(j,L,U);if(Array.isArray(V))j=V[0],Object.assign(L,V[1]);else j=V}return j}function iq($){return $.match(rq)[1].replace(sq,"'")}function D1($,Q){let J=()=>y(Q?.in,NaN),Z=Q?.additionalDigits??2,q=$G($),G;if(q.date){let U=QG(q.date,Z);G=JG(U.restDateString,U.year)}if(!G||isNaN(+G))return J();let X=+G,K=0,Y;if(q.time){if(K=ZG(q.time),isNaN(K))return J()}if(q.timezone){if(Y=qG(q.timezone),isNaN(Y))return J()}else{let U=new Date(X+K),N=C(0,Q?.in);return N.setFullYear(U.getUTCFullYear(),U.getUTCMonth(),U.getUTCDate()),N.setHours(U.getUTCHours(),U.getUTCMinutes(),U.getUTCSeconds(),U.getUTCMilliseconds()),N}return C(X+K+Y,Q?.in)}var s9={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},aq=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,tq=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,eq=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $G($){let Q={},J=$.split(s9.dateTimeDelimiter),Z;if(J.length>2)return Q;if(/:/.test(J[0]))Z=J[0];else if(Q.date=J[0],Z=J[1],s9.timeZoneDelimiter.test(Q.date))Q.date=$.split(s9.timeZoneDelimiter)[0],Z=$.substr(Q.date.length,$.length);if(Z){let q=s9.timezone.exec(Z);if(q)Q.time=Z.replace(q[1],""),Q.timezone=q[1];else Q.time=Z}return Q}function QG($,Q){let J=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+Q)+"})|(\\d{2}|[+-]\\d{"+(2+Q)+"})$)"),Z=$.match(J);if(!Z)return{year:NaN,restDateString:""};let q=Z[1]?parseInt(Z[1]):null,G=Z[2]?parseInt(Z[2]):null;return{year:G===null?q:G*100,restDateString:$.slice((Z[1]||Z[2]).length)}}function JG($,Q){if(Q===null)return new Date(NaN);let J=$.match(aq);if(!J)return new Date(NaN);let Z=!!J[4],q=d5(J[1]),G=d5(J[2])-1,X=d5(J[3]),K=d5(J[4]),Y=d5(J[5])-1;if(Z){if(!UG(Q,K,Y))return new Date(NaN);return GG(Q,K,Y)}else{let U=new Date(0);if(!KG(Q,G,X)||!YG(Q,q))return new Date(NaN);return U.setUTCFullYear(Q,G,Math.max(q,X)),U}}function d5($){return $?parseInt($):1}function ZG($){let Q=$.match(tq);if(!Q)return NaN;let J=s6(Q[1]),Z=s6(Q[2]),q=s6(Q[3]);if(!NG(J,Z,q))return NaN;return J*g5+Z*x5+q*1000}function s6($){return $&&parseFloat($.replace(",","."))||0}function qG($){if($==="Z")return 0;let Q=$.match(eq);if(!Q)return 0;let J=Q[1]==="+"?-1:1,Z=parseInt(Q[2]),q=Q[3]&&parseInt(Q[3])||0;if(!HG(Z,q))return NaN;return J*(Z*g5+q*x5)}function GG($,Q,J){let Z=new Date(0);Z.setUTCFullYear($,0,4);let q=Z.getUTCDay()||7,G=(Q-1)*7+J+1-q;return Z.setUTCDate(Z.getUTCDate()+G),Z}var XG=[31,null,31,30,31,30,31,31,30,31,30,31];function ZQ($){return $%400===0||$%4===0&&$%100!==0}function KG($,Q,J){return Q>=0&&Q<=11&&J>=1&&J<=(XG[Q]||(ZQ($)?29:28))}function YG($,Q){return Q>=1&&Q<=(ZQ($)?366:365)}function UG($,Q,J){return Q>=1&&Q<=53&&J>=0&&J<=6}function NG($,Q,J){if($===24)return Q===0&&J===0;return J>=0&&J<60&&Q>=0&&Q<60&&$>=0&&$<25}function HG($,Q){return Q>=0&&Q<=59}var qQ=[{regex:/^(\d{4})-(\d{2})-(\d{2})$/,granularity:"daily",parser:($)=>{let Q=$[0];if(!Q)return null;let J=r6(Q,"yyyy-MM-dd",new Date);return L5(J)?J:null}},{regex:/^(\d{4})-W(\d{2})$/,granularity:"weekly",parser:($)=>{let Q=$[1],J=$[2];if(!Q||!J)return null;let Z=parseInt(Q,10),q=parseInt(J,10);return GQ(Z,q)}},{regex:/^(\d{4})-(\d{2})$/,granularity:"monthly",parser:($)=>{let Q=$[0];if(!Q)return null;let J=r6(Q,"yyyy-MM",new Date);return L5(J)?J:null}},{regex:/^(\d{4})-Q([1-4])$/,granularity:"quarterly",parser:($)=>{let Q=$[1],J=$[2];if(!Q||!J)return null;let Z=parseInt(Q,10),G=(parseInt(J,10)-1)*3,X=new Date(Z,G,1);return L5(X)?X:null}},{regex:/^(\d{4})$/,granularity:"yearly",parser:($)=>{let Q=$[1];if(!Q)return null;let J=parseInt(Q,10),Z=new Date(J,0,1);return L5(Z)?Z:null}}];function L5($){return c1($)}function o6($){for(let Q of qQ){let J=$.match(Q.regex);if(J){let Z=Q.parser(J);if(Z)return{date:Z,granularity:Q.granularity}}}return null}function GQ($,Q){if(Q<1||Q>53)return null;let J=new Date($,0,4),Z=r9(J,Q),q=M0(Z,{weekStartsOn:1});return L5(q)?q:null}function n6($){return Y6($)}function F5($,Q){return w1($,Q)}function i6($,Q){return h9($,Q)}function c5($,Q){return z$($,Q)}function o9($,Q){return f9($,Q)}function n9($){return E1($)}function i9($){return M0($,{weekStartsOn:1})}function a6($){return f$($)}function t6($){return v$($)}function e6($){return x9($)}function $4($,Q){return h$({start:$,end:Q},{weekStartsOn:1})}function d0($){return V0($,"yyyy-MM-dd")}function N1($,Q){switch(Q){case"daily":return V0($,"yyyy-MM-dd");case"weekly":{let J=V0($,"yyyy"),Z=String(N5($)).padStart(2,"0");return`${J}-W${Z}`}case"monthly":return V0($,"yyyy-MM");case"quarterly":{let J=V0($,"yyyy"),Z=Y6($);return`${J}-Q${Z}`}case"yearly":return V0($,"yyyy");default:return V0($,"yyyy-MM-dd")}}function Q4($,Q="short"){return V0($,Q==="short"?"MMM":"MMMM")}function l5($){let Q=/^(\d{4})-(\d{2})-(\d{2})$/.exec($);if(Q&&Q[1]&&Q[2]&&Q[3]){let J=parseInt(Q[1]),Z=parseInt(Q[2])-1,q=parseInt(Q[3]),G=new Date(J,Z,q);if(!isNaN(G.getTime())){let X=V0(G,"EEEE");return`${$} (${X})`}}return $}var r1={CARD:"lt-card",HIDDEN:"lt-hidden",HEATMAP_CELL:"lt-heatmap-cell",PROPERTY_DETAILS:"lt-property-details"},s1={CARD:`.${r1.CARD}`,HEATMAP_CELL:`.${r1.HEATMAP_CELL}`,PROPERTY_DETAILS:`.${r1.PROPERTY_DETAILS}`};var P1={PROPERTY_ID:"data-property-id",FILE_PATH:"data-file-path",ROW_INDEX:"data-row-index"};var XQ="Life Tracker";var KQ=`${XQ}:`,m=($,Q,...J)=>{let Z=`${KQ} ${$}`;switch(Q){case"debug":console.debug(Z,J);break;case"info":console.info(Z,J);break;case"warn":console.warn(Z,J);break;case"error":console.error(Z,J);break;default:console.debug(Z,J)}};function YQ($,Q){let J=$.key;if(J==="Backspace"||J==="Delete"||J==="Tab"||J==="Enter"||J==="Escape"||J==="ArrowLeft"||J==="ArrowRight"||J==="ArrowUp"||J==="ArrowDown"||J==="Home"||J==="End")return!0;if($.ctrlKey||$.metaKey)return!0;if(/^[0-9]$/.test(J))return!0;if(J==="-"){let Z=$.target;return(Z.selectionStart??0)===0||Z.selectionStart===0&&Z.selectionEnd===Q.length}if(J===".")return!Q.includes(".");return!1}function r5($,Q){let J=typeof $==="number"?$:parseFloat(String($));if(isNaN(J))return null;if(!Q)return J;return Math.max(Q.min,Math.min(Q.max,J))}function UQ($,Q,J,Z,q){let G=Q.slice(0,J),X=Q.slice(Z),K=G+$+X;if(!/^-?\d*\.?\d*$/.test(K))return null;if(K==="-"||K===""||K===".")return $;let U=parseFloat(K);if(isNaN(U))return null;if(q){let N=r5(U,q);if(N!==null&&N!==U)return String(N)}return $}function J4($,Q){if(Q.length===0)return!0;let J=$.toLowerCase().trim();return Q.some((Z)=>String(Z).toLowerCase()===J)}function Z4($,Q){if(Q.length===0)return!0;let J=$.toLowerCase().replace(/^#/,"").trim();return Q.some((Z)=>String(Z).toLowerCase().replace(/^#/,"")===J)}function a9($,Q,J){let Z=(X)=>{if(!YQ(X,$.value))X.preventDefault()},q=(X)=>{let K=X.clipboardData?.getData("text")??"",Y=$.selectionStart??0,U=$.selectionEnd??0,N=UQ(K,$.value,Y,U,Q);if(N===null)X.preventDefault();else if(N!==K){X.preventDefault();let H=$.value.slice(0,Y),M=$.value.slice(U),B=H+N+M;if($.value=B,$.dispatchEvent(new Event("input",{bubbles:!0})),J&&Q){let j=parseFloat(B);if(!isNaN(j))J(j)}}},G=()=>{if(Q&&$.value!==""&&$.value!=="-"){let X=parseFloat($.value);if(!isNaN(X)){let K=r5(X,Q);if(K!==null&&K!==X)$.value=String(K),J?.(K)}}};return $.addEventListener("keydown",Z),$.addEventListener("paste",q),$.addEventListener("input",G),()=>{$.removeEventListener("keydown",Z),$.removeEventListener("paste",q),$.removeEventListener("input",G)}}function i0($){return $===null||$===void 0||$===""}function q4($,Q){let J=String($);if(Q.allowedValues.length>0){let Z=J.toLowerCase();if(!Q.allowedValues.some((G)=>String(G).toLowerCase()===Z))return{valid:!1,error:`Value must be one of: ${Q.allowedValues.join(", ")}`}}return{valid:!0}}function G4($,Q){let J=typeof $==="number"?$:parseFloat(String($));if(isNaN(J))return{valid:!1,error:"Value must be a number"};let Z=Q.numberRange;if(Z){if(J<Z.min)return{valid:!1,error:`Value must be at least ${Z.min}`};if(J>Z.max)return{valid:!1,error:`Value must be at most ${Z.max}`}}return{valid:!0}}function X4($){if(typeof $==="boolean")return{valid:!0};let Q=String($).toLowerCase();if(["true","false","yes","no","1","0"].includes(Q))return{valid:!0};return{valid:!1,error:"Value must be true or false"}}function K4($){let Q=String($);if(!/^\d{4}-\d{2}-\d{2}$/.test(Q))return{valid:!1,error:"Date must be in YYYY-MM-DD format"};let Z=new Date(Q);if(isNaN(Z.getTime()))return{valid:!1,error:"Invalid date"};return{valid:!0}}function Y4($){let Q=String($),J=new Date(Q);if(isNaN(J.getTime()))return{valid:!1,error:"Invalid datetime"};return{valid:!0}}function U4($,Q){let J=t9($);if(Q.allowedValues.length>0){let Z=Q.allowedValues.map((q)=>String(q).toLowerCase());for(let q of J)if(!Z.includes(q.toLowerCase()))return{valid:!1,error:`"${q}" is not allowed. Allowed: ${Q.allowedValues.join(", ")}`}}return{valid:!0}}function N4($,Q){let J=e9($);for(let Z of J)if(!Z.startsWith("#")&&!Z.match(/^[a-zA-Z0-9_-]+$/))return{valid:!1,error:`Invalid tag format: "${Z}"`};if(Q.allowedValues.length>0){let Z=Q.allowedValues.map((q)=>String(q).toLowerCase().replace(/^#/,""));for(let q of J){let G=q.toLowerCase().replace(/^#/,"");if(!Z.includes(G))return{valid:!1,error:`"${q}" is not allowed. Allowed: ${Q.allowedValues.join(", ")}`}}}return{valid:!0}}function t9($){if(Array.isArray($))return $.map(String);return String($).split(",").map((Q)=>Q.trim()).filter(Boolean)}function e9($){if(Array.isArray($))return $.map(String);return String($).split(/[,\s]+/).filter(Boolean)}function H4($){if(!$)return null;let Q=$.toString(),J=parseFloat(Q);if(!isNaN(J))return J;let Z=Q.toLowerCase();if(Z==="true"||Z==="yes")return 1;if(Z==="false"||Z==="no")return 0;return null}function M4($){if(!$)return null;let Q=$.toString(),J=D1(Q);if(c1(J))return J;return null}function B4($){if(!$)return[];let Q=$.toString();if(Q.startsWith("[")&&Q.endsWith("]")){let Z=Q.slice(1,-1);return NQ(Z)}if(Q.includes(","))return NQ(Q);let J=Q.trim();return J?[J]:[]}function NQ($){return $.split(",").map((Q)=>Q.trim().replace(/^["']|["']$/g,"")).filter((Q)=>Q.length>0)}function $8($){if(!$)return!1;let Q=$.toString();if(/^\d{4}-\d{2}-\d{2}/.test(Q))return!0;let J=D1(Q);return c1(J)}class W4 extends K0.PluginSettingTab{plugin;activeTab="properties";expandedDefinitions=new Set;constructor($,Q){super($,Q);this.plugin=Q}display(){let{containerEl:$}=this;$.empty(),$.addClass("lt-settings"),this.renderTabNav($);let Q=$.createDiv({cls:"lt-settings-content"});switch(this.activeTab){case"properties":this.renderPropertiesTab(Q);break;case"visualizations":this.renderVisualizationsTab(Q);break;case"about":this.renderAboutTab(Q);break}}renderTabNav($){let Q=$.createDiv({cls:"lt-settings-nav"}),J=[{id:"properties",label:"Property definitions"},{id:"visualizations",label:"Visualizations"},{id:"about",label:"About"}];for(let Z of J){let q=Q.createDiv({cls:`lt-settings-nav-tab ${this.activeTab===Z.id?"lt-settings-nav-tab--active":""}`});q.textContent=Z.label,q.addEventListener("click",()=>{this.activeTab=Z.id,this.display()})}}renderPropertiesTab($){let Q=new DocumentFragment;Q.createDiv({text:"Define properties to track. These determine what appears in the capture dialog and editing views."}),new K0.Setting($).setDesc(Q),new K0.Setting($).setName("Confetti celebration").setDesc("Show confetti animation when completing property capture").addToggle((Z)=>{Z.setValue(this.plugin.settings.showConfettiOnCapture).onChange(async(q)=>{await this.plugin.updateSettings((G)=>{G.showConfettiOnCapture=q})})}),$.createEl("hr",{cls:"lt-settings-separator"}),$.createEl("h3",{text:"Property definitions"});let J=$.createDiv({cls:"lt-property-definitions-container"});this.renderPropertyDefinitionsList(J),new K0.Setting($).addButton((Z)=>{Z.setButtonText("Add property definition").setIcon("plus").onClick(async()=>{await this.addNewPropertyDefinition(),this.display()})})}renderPropertyDefinitionsList($){$.empty();let Q=this.plugin.settings.propertyDefinitions;if(Q.length===0){$.createDiv({cls:"lt-property-definitions-empty",text:"No property definitions configured. Add a definition to enable property capture and editing."});return}let J=[...Q].sort((Z,q)=>Z.order-q.order);for(let Z of J)this.renderPropertyDefinitionItem($,Z)}renderPropertyDefinitionItem($,Q,J=!1){let Z=$.createDiv({cls:"lt-property-definition-item"}),q=J||this.expandedDefinitions.has(Q.id),G=new K0.Setting(Z);G.settingEl.classList.add("lt-property-header"),G.addButton((K)=>{K.setIcon(q?"chevron-down":"chevron-right").setTooltip(q?"Collapse":"Expand").setClass("lt-property-chevron").onClick(()=>{if(this.expandedDefinitions.has(Q.id))this.expandedDefinitions.delete(Q.id);else this.expandedDefinitions.add(Q.id);let Y=Z.querySelector(s1.PROPERTY_DETAILS);if(Y){let U=this.expandedDefinitions.has(Q.id);Y.toggleClass("lt-hidden",!U),K.setIcon(U?"chevron-down":"chevron-right"),K.setTooltip(U?"Collapse":"Expand")}})}),G.addText((K)=>{K.setPlaceholder("Property name (frontmatter key)").setValue(Q.name).onChange(async(Y)=>{await this.plugin.updateSettings((U)=>{let N=U.propertyDefinitions.find((H)=>H.id===Q.id);if(N)N.name=Y})}),K.inputEl.classList.add("lt-property-name-input")}),G.addDropdown((K)=>{let Y={};for(let U of O9)Y[U]=z9[U];K.addOptions(Y).setValue(Q.type).onChange(async(U)=>{await this.plugin.updateSettings((N)=>{let H=N.propertyDefinitions.find((M)=>M.id===Q.id);if(H){if(H.type=U,U!=="number")H.numberRange=null;if(!["text","list","tags"].includes(U))H.allowedValues=[]}}),this.expandedDefinitions.add(Q.id),this.display()})}),G.addToggle((K)=>{K.setTooltip("Required").setValue(Q.required??!1).onChange(async(Y)=>{await this.plugin.updateSettings((U)=>{let N=U.propertyDefinitions.find((H)=>H.id===Q.id);if(N)N.required=Y})})}),G.addExtraButton((K)=>{K.setIcon("trash").setTooltip("Delete property definition").onClick(async()=>{this.expandedDefinitions.delete(Q.id),await this.deletePropertyDefinition(Q.id),this.display()})});let X=Z.createDiv({cls:`${r1.PROPERTY_DETAILS}${q?"":` ${r1.HIDDEN}`}`});this.renderPropertyTypeOptions(X,Q)}renderPropertyTypeOptions($,Q){let J=$.createDiv({cls:"lt-property-type-options"});if(new K0.Setting(J).setName("Display label").setDesc("Optional label shown in UI (defaults to property name)").addText((Z)=>{Z.setPlaceholder("Optional display label").setValue(Q.displayName).onChange(async(q)=>{await this.plugin.updateSettings((G)=>{let X=G.propertyDefinitions.find((K)=>K.id===Q.id);if(X)X.displayName=q})})}),Q.type==="number")this.renderNumberConstraints(J,Q);else if(["text","list","tags"].includes(Q.type))this.renderAllowedValues(J,Q);this.renderDefaultValue(J,Q),new K0.Setting(J).setName("Description").setDesc("Help text shown in capture dialog").addTextArea((Z)=>{Z.setPlaceholder("Optional description or help text").setValue(Q.description).onChange(async(q)=>{await this.plugin.updateSettings((G)=>{let X=G.propertyDefinitions.find((K)=>K.id===Q.id);if(X)X.description=q})}),Z.inputEl.rows=2}),this.renderMappings(J,Q)}renderMappings($,Q){let J=$.createDiv({cls:"lt-mappings-container"});if(new K0.Setting(J).setName("Note filtering").setDesc("Define which notes this property applies to. If no filters are set, property applies to all notes. Multiple filters use OR logic.").addButton((q)=>{q.setIcon("plus").setTooltip("Add filter").onClick(async()=>{await this.plugin.updateSettings((G)=>{let X=G.propertyDefinitions.find((K)=>K.id===Q.id);if(X)X.mappings.push(S9())}),this.display()})}),Q.mappings.length===0){J.createDiv({cls:"lt-mappings-empty",text:"No filters configured. This property applies to all notes."});return}let Z=J.createDiv({cls:"lt-mappings-list"});Q.mappings.forEach((q,G)=>{this.renderMappingItem(Z,Q,G)})}renderMappingItem($,Q,J){let Z=Q.mappings[J];if(!Z)return;let q=new K0.Setting($);q.settingEl.classList.add("lt-mapping-item"),q.addToggle((G)=>{G.setTooltip("Enable/disable filter").setValue(Z.enabled).onChange(async(X)=>{await this.plugin.updateSettings((K)=>{let U=K.propertyDefinitions.find((N)=>N.id===Q.id)?.mappings[J];if(U)U.enabled=X})})}),q.addDropdown((G)=>{G.addOptions(A9).setValue(Z.type).onChange(async(X)=>{await this.plugin.updateSettings((K)=>{let U=K.propertyDefinitions.find((N)=>N.id===Q.id)?.mappings[J];if(U)U.type=X,U.value=""}),this.display()})}),q.addText((G)=>{let X="Value";switch(Z.type){case"tag":X="tag-name (without #)";break;case"folder":X="Start typing to search folders...";break;case"regex":X="pattern (e.g., ^daily-)";break;case"formula":X="Formula (not yet supported)";break}if(G.setPlaceholder(X).setValue(Z.value).onChange(async(K)=>{await this.plugin.updateSettings((Y)=>{let N=Y.propertyDefinitions.find((H)=>H.id===Q.id)?.mappings[J];if(N)N.value=K})}),G.inputEl.classList.add("lt-mapping-value-input"),Z.type==="folder")new G6(G.inputEl,this.app)}),q.addExtraButton((G)=>{G.setIcon("trash").setTooltip("Remove filter").onClick(async()=>{await this.plugin.updateSettings((X)=>{let K=X.propertyDefinitions.find((Y)=>Y.id===Q.id);if(K)K.mappings.splice(J,1)}),this.display()})})}renderNumberConstraints($,Q){let J=Q.numberRange,Z=new K0.Setting($).setName("Number range").setDesc("Min and max values (leave both empty for no constraints)");Z.addText((q)=>{q.setPlaceholder("Min").setValue(J?.min?.toString()??"").onChange(async(G)=>{await this.plugin.updateSettings((X)=>{let K=X.propertyDefinitions.find((Y)=>Y.id===Q.id);if(K){let Y=G?parseFloat(G):null,U=K.numberRange?.max??null;if(Y!==null&&U!==null)K.numberRange={min:Y,max:U};else if(Y!==null)K.numberRange={min:Y,max:Y+100};else K.numberRange=null}})}),q.inputEl.type="number",q.inputEl.classList.add("lt-constraint-input")}),Z.addText((q)=>{q.setPlaceholder("Max").setValue(J?.max?.toString()??"").onChange(async(G)=>{await this.plugin.updateSettings((X)=>{let K=X.propertyDefinitions.find((Y)=>Y.id===Q.id);if(K){let Y=G?parseFloat(G):null,U=K.numberRange?.min??null;if(U!==null&&Y!==null)K.numberRange={min:U,max:Y};else if(Y!==null)K.numberRange={min:0,max:Y};else K.numberRange=null}})}),q.inputEl.type="number",q.inputEl.classList.add("lt-constraint-input")})}renderAllowedValues($,Q){new K0.Setting($).setName("Allowed values").setDesc("Comma-separated list of allowed values (leave empty for free input)").addTextArea((J)=>{J.setPlaceholder("value1, value2, value3").setValue(Q.allowedValues.join(", ")).onChange(async(Z)=>{await this.plugin.updateSettings((q)=>{let G=q.propertyDefinitions.find((X)=>X.id===Q.id);if(G)if(Z.trim())G.allowedValues=Z.split(",").map((X)=>X.trim()).filter(Boolean);else G.allowedValues=[]})}),J.inputEl.rows=2})}renderDefaultValue($,Q){let J=new K0.Setting($).setName("Default value").setDesc("Value used when creating or resetting");switch(Q.type){case"checkbox":J.addToggle((Z)=>{Z.setValue(Q.defaultValue===!0).onChange(async(q)=>{await this.plugin.updateSettings((G)=>{let X=G.propertyDefinitions.find((K)=>K.id===Q.id);if(X)X.defaultValue=q})})});break;case"number":J.addText((Z)=>{let q=typeof Q.defaultValue==="number"?Q.defaultValue.toString():"";Z.setPlaceholder("Default number").setValue(q).onChange(async(G)=>{await this.plugin.updateSettings((X)=>{let K=X.propertyDefinitions.find((Y)=>Y.id===Q.id);if(K)K.defaultValue=G?parseFloat(G):null})}),Z.inputEl.type="number"});break;case"text":if(Q.allowedValues.length>0)J.addDropdown((Z)=>{let q={"":"(none)"};for(let G of Q.allowedValues){let X=String(G);q[X]=X}Z.addOptions(q).setValue(String(Q.defaultValue??"")).onChange(async(G)=>{await this.plugin.updateSettings((X)=>{let K=X.propertyDefinitions.find((Y)=>Y.id===Q.id);if(K)K.defaultValue=G||null})})});else J.addText((Z)=>{Z.setPlaceholder("Default text").setValue(String(Q.defaultValue??"")).onChange(async(q)=>{await this.plugin.updateSettings((G)=>{let X=G.propertyDefinitions.find((K)=>K.id===Q.id);if(X)X.defaultValue=q||null})})});break;case"date":case"datetime":J.addText((Z)=>{Z.setPlaceholder(Q.type==="date"?"YYYY-MM-DD":"YYYY-MM-DDTHH:mm").setValue(String(Q.defaultValue??"")).onChange(async(q)=>{await this.plugin.updateSettings((G)=>{let X=G.propertyDefinitions.find((K)=>K.id===Q.id);if(X)X.defaultValue=q||null})}),Z.inputEl.type=Q.type==="date"?"date":"datetime-local"});break;case"list":case"tags":J.addTextArea((Z)=>{let q=Array.isArray(Q.defaultValue)?Q.defaultValue.join(", "):"";Z.setPlaceholder("value1, value2 (comma-separated)").setValue(q).onChange(async(G)=>{await this.plugin.updateSettings((X)=>{let K=X.propertyDefinitions.find((Y)=>Y.id===Q.id);if(K)if(G.trim())K.defaultValue=G.split(",").map((Y)=>Y.trim()).filter(Boolean);else K.defaultValue=null})}),Z.inputEl.rows=1});break}}async addNewPropertyDefinition(){let $=this.plugin.settings.propertyDefinitions.length,Q=I9(crypto.randomUUID(),$);this.expandedDefinitions.add(Q.id),await this.plugin.updateSettings((J)=>{J.propertyDefinitions.push(Q)})}async deletePropertyDefinition($){await this.plugin.updateSettings((Q)=>{Q.propertyDefinitions=Q.propertyDefinitions.filter((J)=>J.id!==$)})}renderVisualizationsTab($){new K0.Setting($).setName("Animation").setHeading(),new K0.Setting($).setName("Animation duration").setDesc("Duration of visualization animations in seconds").addSlider((Z)=>{Z.setLimits(1,10,0.5).setValue(this.plugin.settings.animationDuration/1000).setDynamicTooltip().onChange(async(q)=>{await this.plugin.updateSettings((G)=>{G.animationDuration=q*1000})})}),new K0.Setting($).setName("Visualization presets").setHeading();let Q=new DocumentFragment;Q.createDiv({text:"Configure default visualizations for property names. These are applied automatically when a property matches."}),new K0.Setting($).setDesc(Q);let J=$.createDiv({cls:"lt-presets-container"});this.renderPresetsList(J),new K0.Setting($).addButton((Z)=>{Z.setButtonText("Add preset").setIcon("plus").onClick(async()=>{await this.addNewPreset(),this.display()})})}renderPresetsList($){$.empty();let Q=this.plugin.settings.visualizationPresets;if(Q.length===0){$.createDiv({cls:"lt-presets-empty",text:"No presets configured. Add a preset to automatically configure visualizations for matching properties."});return}for(let J of Q)this.renderPresetItem($,J)}renderPresetItem($,Q){let J=new K0.Setting($);if(J.addText((Z)=>{Z.setPlaceholder("Property name").setValue(Q.propertyNamePattern).onChange(async(q)=>{await this.plugin.updateSettings((G)=>{let X=G.visualizationPresets.find((K)=>K.id===Q.id);if(X)X.propertyNamePattern=q})}),Z.inputEl.classList.add("lt-preset-name-input")}),J.addDropdown((Z)=>{Z.addOptions(C9).setValue(Q.visualizationType).onChange(async(q)=>{await this.plugin.updateSettings((G)=>{let X=G.visualizationPresets.find((K)=>K.id===Q.id);if(X){if(X.visualizationType=q,!K1(X.visualizationType))X.scale=void 0}}),this.display()})}),K1(Q.visualizationType))J.addDropdown((Z)=>{let q={auto:"Auto"};for(let X of Object.keys(G5))if(X!=="auto")q[X]=X;let G="auto";if(Q.scale){let X=Object.entries(G5).find(([K,Y])=>Y?.min===Q.scale?.min&&Y?.max===Q.scale?.max);if(X)G=X[0]}Z.addOptions(q).setValue(G).onChange(async(X)=>{let K=G5[X];await this.plugin.updateSettings((Y)=>{let U=Y.visualizationPresets.find((N)=>N.id===Q.id);if(U)U.scale=K?{min:K.min,max:K.max}:void 0})})});J.addExtraButton((Z)=>{Z.setIcon("trash").setTooltip("Delete preset").onClick(async()=>{await this.deletePreset(Q.id),this.display()})})}async addNewPreset(){let $={id:crypto.randomUUID(),propertyNamePattern:"",visualizationType:"heatmap"};await this.plugin.updateSettings((Q)=>{Q.visualizationPresets.push($)})}async deletePreset($){await this.plugin.updateSettings((Q)=>{Q.visualizationPresets=Q.visualizationPresets.filter((J)=>J.id!==$)})}renderAboutTab($){new K0.Setting($).setName("Follow me on X").setDesc("Sbastien Dubois (@dSebastien)").addButton((J)=>{J.setCta(),J.setButtonText("Follow me on X").onClick(()=>{window.open("https://x.com/dSebastien")})}),new K0.Setting($).setName("Support").setHeading();let Q=new DocumentFragment;Q.createDiv({text:"Buy me a coffee to support the development of this plugin"}),new K0.Setting($).setDesc(Q),this.renderBuyMeACoffeeBadge($)}renderBuyMeACoffeeBadge($,Q=175){let Z=$.createEl("a",{href:"https://www.buymeacoffee.com/dsebastien"}).createEl("img");Z.src="https://github.com/dsebastien/obsidian-plugin-template/blob/main/src/assets/buy-me-a-coffee.png?raw=true",Z.alt="Buy me a coffee",Z.width=Q}}var VQ=Symbol.for("immer-nothing"),HQ=Symbol.for("immer-draftable"),T0=Symbol.for("immer-state"),VG=[function($){return`The plugin for '${$}' has not been loaded into Immer. To enable the plugin, import and call \`enable${$}()\` when initializing your application.`},function($){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${$}'`},"This object has been frozen and should not be mutated",function($){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+$},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function($){return`'current' expects a draft, got: ${$}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function($){return`'original' expects a draft, got: ${$}`}];function S0($,...Q){{let J=VG[$],Z=o1(J)?J.apply(null,Q):J;throw Error(`[Immer] ${Z}`)}throw Error(`[Immer] minified error nr: ${$}. Full error at: https://bit.ly/3cXEKWf`)}var k0=Object,V5=k0.getPrototypeOf,q8="constructor",Y8="prototype",F4="configurable",G8="enumerable",J8="writable",s5="value",T1=($)=>!!$&&!!$[T0];function M1($){if(!$)return!1;return _Q($)||U8($)||!!$[HQ]||!!$[q8]?.[HQ]||N8($)||H8($)}var _G=k0[Y8][q8].toString(),MQ=new WeakMap;function _Q($){if(!$||!T4($))return!1;let Q=V5($);if(Q===null||Q===k0[Y8])return!0;let J=k0.hasOwnProperty.call(Q,q8)&&Q[q8];if(J===Object)return!0;if(!o1(J))return!1;let Z=MQ.get(J);if(Z===void 0)Z=Function.toString.call(J),MQ.set(J,Z);return Z===_G}function i5($,Q,J=!0){if(a5($)===0)(J?Reflect.ownKeys($):k0.keys($)).forEach((q)=>{Q(q,$[q],$)});else $.forEach((Z,q)=>Q(q,Z,$))}function a5($){let Q=$[T0];return Q?Q.type_:U8($)?1:N8($)?2:H8($)?3:0}var BQ=($,Q,J=a5($))=>J===2?$.has(Q):k0[Y8].hasOwnProperty.call($,Q),V4=($,Q,J=a5($))=>J===2?$.get(Q):$[Q],X8=($,Q,J,Z=a5($))=>{if(Z===2)$.set(Q,J);else if(Z===3)$.add(J);else $[Q]=J};function RG($,Q){if($===Q)return $!==0||1/$===1/Q;else return $!==$&&Q!==Q}var U8=Array.isArray,N8=($)=>$ instanceof Map,H8=($)=>$ instanceof Set,T4=($)=>typeof $==="object",o1=($)=>typeof $==="function",j4=($)=>typeof $==="boolean";var H1=($)=>$.copy_||$.base_;var C4=($)=>$.modified_?$.copy_:$.base_;function _4($,Q){if(N8($))return new Map($);if(H8($))return new Set($);if(U8($))return Array[Y8].slice.call($);let J=_Q($);if(Q===!0||Q==="class_only"&&!J){let Z=k0.getOwnPropertyDescriptors($);delete Z[T0];let q=Reflect.ownKeys(Z);for(let G=0;G<q.length;G++){let X=q[G],K=Z[X];if(K[J8]===!1)K[J8]=!0,K[F4]=!0;if(K.get||K.set)Z[X]={[F4]:!0,[J8]:!0,[G8]:K[G8],[s5]:$[X]}}return k0.create(V5($),Z)}else{let Z=V5($);if(Z!==null&&J)return{...$};let q=k0.create(Z);return k0.assign(q,$)}}function O4($,Q=!1){if(M8($)||T1($)||!M1($))return $;if(a5($)>1)k0.defineProperties($,{set:Q8,add:Q8,clear:Q8,delete:Q8});if(k0.freeze($),Q)i5($,(J,Z)=>{O4(Z,!0)},!1);return $}function wG(){S0(2)}var Q8={[s5]:wG};function M8($){if($===null||!T4($))return!0;return k0.isFrozen($)}var K8="MapSet",R4="Patches",RQ={};function _5($){let Q=RQ[$];if(!Q)S0(0,$);return Q}var EG=($)=>!!RQ[$];var o5,wQ=()=>o5,DG=($,Q)=>({drafts_:[],parent_:$,immer_:Q,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:EG(K8)?_5(K8):void 0});function WQ($,Q){if(Q)$.patchPlugin_=_5(R4),$.patches_=[],$.inversePatches_=[],$.patchListener_=Q}function w4($){E4($),$.drafts_.forEach(PG),$.drafts_=null}function E4($){if($===o5)o5=$.parent_}var jQ=($)=>o5=DG(o5,$);function PG($){let Q=$[T0];if(Q.type_===0||Q.type_===1)Q.revoke_();else Q.revoked_=!0}function LQ($,Q){Q.unfinalizedDrafts_=Q.drafts_.length;let J=Q.drafts_[0];if($!==void 0&&$!==J){if(J[T0].modified_)w4(Q),S0(4);if(M1($))$=FQ(Q,$);let{patchPlugin_:q}=Q;if(q)q.generateReplacementPatches_(J[T0].base_,$,Q)}else $=FQ(Q,J);if(TG(Q,$,!0),w4(Q),Q.patches_)Q.patchListener_(Q.patches_,Q.inversePatches_);return $!==VQ?$:void 0}function FQ($,Q){if(M8(Q))return Q;let J=Q[T0];if(!J)return z4(Q,$.handledSet_,$);if(!B8(J,$))return Q;if(!J.modified_)return J.base_;if(!J.finalized_){let{callbacks_:Z}=J;if(Z)while(Z.length>0)Z.pop()($);PQ(J,$)}return J.copy_}function TG($,Q,J=!1){if(!$.parent_&&$.immer_.autoFreeze_&&$.canAutoFreeze_)O4(Q,J)}function EQ($){$.finalized_=!0,$.scope_.unfinalizedDrafts_--}var B8=($,Q)=>$.scope_===Q,CG=[];function DQ($,Q,J,Z){let q=H1($),G=$.type_;if(Z!==void 0){if(V4(q,Z,G)===Q){X8(q,Z,J,G);return}}if(!$.draftLocations_){let K=$.draftLocations_=new Map;i5(q,(Y,U)=>{if(T1(U)){let N=K.get(U)||[];N.push(Y),K.set(U,N)}})}let X=$.draftLocations_.get(Q)??CG;for(let K of X)X8(q,K,J,G)}function OG($,Q,J){$.callbacks_.push(function(q){let G=Q;if(!G||!B8(G,q))return;q.mapSetPlugin_?.fixSetContents(G);let X=C4(G);DQ($,G.draft_??G,X,J),PQ(G,q)})}function PQ($,Q){if($.modified_&&!$.finalized_&&($.type_===3||($.assigned_?.size??0)>0)){let{patchPlugin_:Z}=Q;if(Z){let q=Z.getPath($);if(q)Z.generatePatches_($,q,Q)}EQ($)}}function zG($,Q,J){let{scope_:Z}=$;if(T1(J)){let q=J[T0];if(B8(q,Z))q.callbacks_.push(function(){Z8($);let X=C4(q);DQ($,J,X,Q)})}else if(M1(J))$.callbacks_.push(function(){let G=H1($);if(V4(G,Q,$.type_)===J){if(Z.drafts_.length>1&&($.assigned_.get(Q)??!1)===!0&&$.copy_)z4(V4($.copy_,Q,$.type_),Z.handledSet_,Z)}})}function z4($,Q,J){if(!J.immer_.autoFreeze_&&J.unfinalizedDrafts_<1)return $;if(T1($)||Q.has($)||!M1($)||M8($))return $;return Q.add($),i5($,(Z,q)=>{if(T1(q)){let G=q[T0];if(B8(G,J)){let X=C4(G);X8($,Z,X,$.type_),EQ(G)}}else if(M1(q))z4(q,Q,J)}),$}function IG($,Q){let J=U8($),Z={type_:J?1:0,scope_:Q?Q.scope_:wQ(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:Q,base_:$,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0},q=Z,G=I4;if(J)q=[Z],G=n5;let{revoke:X,proxy:K}=Proxy.revocable(q,G);return Z.draft_=K,Z.revoke_=X,[K,Z]}var I4={get($,Q){if(Q===T0)return $;let J=H1($);if(!BQ(J,Q,$.type_))return AG($,J,Q);let Z=J[Q];if($.finalized_||!M1(Z))return Z;if(Z===L4($.base_,Q)){Z8($);let q=$.type_===1?+Q:Q,G=P4($.scope_,Z,$,q);return $.copy_[q]=G}return Z},has($,Q){return Q in H1($)},ownKeys($){return Reflect.ownKeys(H1($))},set($,Q,J){let Z=TQ(H1($),Q);if(Z?.set)return Z.set.call($.draft_,J),!0;if(!$.modified_){let q=L4(H1($),Q),G=q?.[T0];if(G&&G.base_===J)return $.copy_[Q]=J,$.assigned_.set(Q,!1),!0;if(RG(J,q)&&(J!==void 0||BQ($.base_,Q,$.type_)))return!0;Z8($),D4($)}if($.copy_[Q]===J&&(J!==void 0||(Q in $.copy_))||Number.isNaN(J)&&Number.isNaN($.copy_[Q]))return!0;return $.copy_[Q]=J,$.assigned_.set(Q,!0),zG($,Q,J),!0},deleteProperty($,Q){if(Z8($),L4($.base_,Q)!==void 0||Q in $.base_)$.assigned_.set(Q,!1),D4($);else $.assigned_.delete(Q);if($.copy_)delete $.copy_[Q];return!0},getOwnPropertyDescriptor($,Q){let J=H1($),Z=Reflect.getOwnPropertyDescriptor(J,Q);if(!Z)return Z;return{[J8]:!0,[F4]:$.type_!==1||Q!=="length",[G8]:Z[G8],[s5]:J[Q]}},defineProperty(){S0(11)},getPrototypeOf($){return V5($.base_)},setPrototypeOf(){S0(12)}},n5={};i5(I4,($,Q)=>{n5[$]=function(){let J=arguments;return J[0]=J[0][0],Q.apply(this,J)}});n5.deleteProperty=function($,Q){if(isNaN(parseInt(Q)))S0(13);return n5.set.call(this,$,Q,void 0)};n5.set=function($,Q,J){if(Q!=="length"&&isNaN(parseInt(Q)))S0(14);return I4.set.call(this,$[0],Q,J,$[0])};function L4($,Q){let J=$[T0];return(J?H1(J):$)[Q]}function AG($,Q,J){let Z=TQ(Q,J);return Z?s5 in Z?Z[s5]:Z.get?.call($.draft_):void 0}function TQ($,Q){if(!(Q in $))return;let J=V5($);while(J){let Z=Object.getOwnPropertyDescriptor(J,Q);if(Z)return Z;J=V5(J)}return}function D4($){if(!$.modified_){if($.modified_=!0,$.parent_)D4($.parent_)}}function Z8($){if(!$.copy_)$.assigned_=new Map,$.copy_=_4($.base_,$.scope_.immer_.useStrictShallowCopy_)}var SG=class{constructor($){if(this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(Q,J,Z)=>{if(o1(Q)&&!o1(J)){let G=J;J=Q;let X=this;return function(Y=G,...U){return X.produce(Y,(N)=>J.call(this,N,...U))}}if(!o1(J))S0(6);if(Z!==void 0&&!o1(Z))S0(7);let q;if(M1(Q)){let G=jQ(this),X=P4(G,Q,void 0),K=!0;try{q=J(X),K=!1}finally{if(K)w4(G);else E4(G)}return WQ(G,Z),LQ(q,G)}else if(!Q||!T4(Q)){if(q=J(Q),q===void 0)q=Q;if(q===VQ)q=void 0;if(this.autoFreeze_)O4(q,!0);if(Z){let G=[],X=[];_5(R4).generateReplacementPatches_(Q,q,{patches_:G,inversePatches_:X}),Z(G,X)}return q}else S0(1,Q)},this.produceWithPatches=(Q,J)=>{if(o1(Q))return(X,...K)=>this.produceWithPatches(X,(Y)=>Q(Y,...K));let Z,q;return[this.produce(Q,J,(X,K)=>{Z=X,q=K}),Z,q]},j4($?.autoFreeze))this.setAutoFreeze($.autoFreeze);if(j4($?.useStrictShallowCopy))this.setUseStrictShallowCopy($.useStrictShallowCopy);if(j4($?.useStrictIteration))this.setUseStrictIteration($.useStrictIteration)}createDraft($){if(!M1($))S0(8);if(T1($))$=kG($);let Q=jQ(this),J=P4(Q,$,void 0);return J[T0].isManual_=!0,E4(Q),J}finishDraft($,Q){let J=$&&$[T0];if(!J||!J.isManual_)S0(9);let{scope_:Z}=J;return WQ(Z,Q),LQ(void 0,Z)}setAutoFreeze($){this.autoFreeze_=$}setUseStrictShallowCopy($){this.useStrictShallowCopy_=$}setUseStrictIteration($){this.useStrictIteration_=$}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches($,Q){let J;for(J=Q.length-1;J>=0;J--){let q=Q[J];if(q.path.length===0&&q.op==="replace"){$=q.value;break}}if(J>-1)Q=Q.slice(J+1);let Z=_5(R4).applyPatches_;if(T1($))return Z($,Q);return this.produce($,(q)=>Z(q,Q))}};function P4($,Q,J,Z){let[q,G]=N8(Q)?_5(K8).proxyMap_(Q,J):H8(Q)?_5(K8).proxySet_(Q,J):IG(Q,J);if((J?.scope_??wQ()).drafts_.push(q),G.callbacks_=J?.callbacks_??[],G.key_=Z,J&&Z!==void 0)OG(J,G,Z);else G.callbacks_.push(function(Y){Y.mapSetPlugin_?.fixSetContents(G);let{patchPlugin_:U}=Y;if(G.modified_&&U)U.generatePatches_(G,[],Y)});return q}function kG($){if(!T1($))S0(10,$);return CQ($)}function CQ($){if(!M1($)||M8($))return $;let Q=$[T0],J,Z=!0;if(Q){if(!Q.modified_)return Q.base_;Q.finalized_=!0,J=_4($,Q.scope_.immer_.useStrictShallowCopy_),Z=Q.scope_.immer_.shouldUseStrictIteration()}else J=_4($,!0);if(i5(J,(q,G)=>{X8(J,q,CQ(G))},Z),Q)Q.finalized_=!1;return J}var bG=new SG,t5=bG.produce;var S2=require("obsidian");class A4{defaultSources=[{source:{type:"filename",pattern:"auto"},priority:1},{source:{type:"property",propertyId:"note.date"},priority:2},{source:{type:"property",propertyId:"note.created"},priority:3},{source:{type:"file-metadata",field:"ctime"},priority:4}];resolveAnchor($,Q){let Z=[...Q??this.defaultSources].sort((q,G)=>q.priority-G.priority);for(let{source:q}of Z){let G=this.tryResolveFromSource($,q);if(G)return G}return null}tryResolveFromSource($,Q){switch(Q.type){case"filename":return this.resolveFromFilename($,Q);case"property":return this.resolveFromProperty($,Q);case"file-metadata":return this.resolveFromFileMetadata($,Q);default:return null}}resolveFromFilename($,Q){let J=$.file.basename,Z=o6(J);if(Z)return{date:Z.date,source:Q,confidence:"high"};return null}resolveFromProperty($,Q){let J=$.getValue(Q.propertyId);if(!J||!$8(J))return null;let Z=M4(J);if(Z)return{date:Z,source:Q,confidence:"medium"};return null}resolveFromFileMetadata($,Q){let J=$.file.stat,Z;if(Q.field==="ctime")Z=J.ctime;else if(Q.field==="mtime")Z=J.mtime;if(Z)return{date:new Date(Z),source:Q,confidence:"low"};return null}resolveAllAnchors($,Q){let J=new Map;for(let Z of $)J.set(Z,this.resolveAnchor(Z,Q));return J}findDateProperties($,Q){let J=[];for(let Z of Q){if(Z.startsWith("file."))continue;let q=!1;for(let G of $){let X=G.getValue(Z);if($8(X)){q=!0;break}}if(q)J.push(Z)}return J}createPropertyConfig($,Q){return{source:{type:"property",propertyId:$},priority:Q}}createFilenameConfig($){return{source:{type:"filename",pattern:"auto"},priority:$}}createMetadataConfig($,Q){return{source:{type:"file-metadata",field:$},priority:Q}}}function R5($,Q){switch(Q){case"daily":return d0($);case"weekly":return d0(i9($));case"monthly":return V0($,"yyyy-MM");case"quarterly":return`${V0($,"yyyy")}-Q${n6($)}`;case"yearly":return V0($,"yyyy");default:return d0($)}}function n1($,Q){switch(Q){case"daily":return n9($);case"weekly":return i9($);case"monthly":return a6($);case"quarterly":return t6($);case"yearly":return e6($);default:return n9($)}}function yG($,Q){switch(Q){case"daily":return F5($,1);case"weekly":return i6($,1);case"monthly":return c5($,1);case"quarterly":return c5($,3);case"yearly":return c5($,12);default:return F5($,1)}}function OQ($,Q,J,Z){let q=[],G=n1($,J),X=n1(Q,J);while(G<=X){let K=R5(G,J);if(!Z.has(K))q.push({date:new Date(G),value:null,count:0,entries:[]});G=yG(G,J)}return q}function vG($){if($===null||$===void 0)return"";if(Array.isArray($))return $.filter((Z)=>Z!==null&&Z!==void 0&&Z!=="null").join(", ");if(typeof $==="object")return JSON.stringify($);let Q=String($);if(Q==="null"||Q==="undefined")return"";return Q}function zQ($,Q,J,Z){let q=$.filter((H)=>H.dateAnchor!==null&&H.normalizedValue!==null);if(q.length===0)return{propertyId:Q,displayName:J,labels:[],datasets:[]};let G=new Map;for(let H of q){let M=H.dateAnchor.date,B=R5(M,Z),j=n1(M,Z);if(!G.has(B))G.set(B,{date:j,values:[],entries:[]});let L=G.get(B);L.values.push(H.normalizedValue),L.entries.push(H.entry)}let X=[...G.values()].sort((H,M)=>n0(H.date,M.date)),K=X.map((H)=>N1(H.date,Z)),Y=X.map((H)=>H.values.reduce((M,B)=>M+B,0)/H.values.length),U=X.map((H)=>H.entries);return{propertyId:Q,displayName:J,labels:K,datasets:[{label:J,data:Y,entries:U}]}}function IQ($,Q,J){let Z=new Map;for(let Y of $){if(Y.value===null||Y.value===void 0)continue;let U=String(Y.value).trim();if(!U||U==="null"||U==="undefined")continue;if(!Z.has(U))Z.set(U,{count:0,entries:[]});let N=Z.get(U);N.count++,N.entries.push(Y.entry)}let q=[...Z.entries()].sort((Y,U)=>U[1].count-Y[1].count),G=q.map(([Y])=>Y),X=q.map(([,Y])=>Y.count),K=q.map(([,Y])=>Y.entries);return{propertyId:Q,displayName:J,labels:G,values:X,entries:K}}function AQ($,Q,J){let Z=$.filter((N)=>N.dateAnchor!==null&&N.normalizedValue!==null);if(Z.length===0)return{propertyId:Q,displayName:J,points:[],entries:[]};let q=Z.map((N)=>N.dateAnchor.date.getTime()),G=Math.min(...q),K=Math.max(...q)-G||1,Y=[],U=[];for(let N of Z){let H=(N.dateAnchor.date.getTime()-G)/K*100,M=N.normalizedValue;Y.push({x:H,y:M}),U.push(N.entry)}return{propertyId:Q,displayName:J,points:Y,entries:U}}function SQ($,Q,J,Z){let q=$.filter((j)=>j.dateAnchor!==null&&j.normalizedValue!==null);if(q.length===0)return{propertyId:Q,displayName:J,points:[],entries:[]};let G=new Map;for(let j of q){let L=j.dateAnchor.date,W=R5(L,Z),V=n1(L,Z);if(!G.has(W))G.set(W,{date:V,values:[],entries:[]});let _=G.get(W);_.values.push(j.normalizedValue),_.entries.push(j.entry)}let X=[...G.values()].map((j)=>j.date.getTime()),K=Math.min(...X),U=Math.max(...X)-K||1,N=Math.max(...[...G.values()].map((j)=>j.entries.length)),H=[],M=[],B=[...G.values()].sort((j,L)=>n0(j.date,L.date));for(let j of B){let L=(j.date.getTime()-K)/U*100,W=j.values.reduce((_,D)=>_+D,0)/j.values.length,V=5+j.entries.length/N*25;H.push({x:L,y:W,r:V}),M.push(j.entries)}return{propertyId:Q,displayName:J,points:H,entries:M}}function kQ($,Q,J){let Z=new Map;for(let X of $){if(!X.value)continue;let K=X.entry.getValue(Q),Y=B4(K);for(let U of Y){if(!U||U==="null"||U==="undefined")continue;if(!Z.has(U))Z.set(U,{frequency:0,entries:[]});let N=Z.get(U);N.frequency++,N.entries.push(X.entry)}}let q=[],G=0;for(let[X,K]of Z)q.push({tag:X,frequency:K.frequency,entries:K.entries}),G=Math.max(G,K.frequency);return q.sort((X,K)=>K.frequency-X.frequency),{propertyId:Q,displayName:J,tags:q,maxFrequency:G}}function bQ($,Q,J){let Z=$.filter((K)=>K.dateAnchor!==null);if(Z.length===0)return{propertyId:Q,displayName:J,points:[],minDate:new Date,maxDate:new Date};let q=Z.map((K)=>{let Y=vG(K.value);return{date:K.dateAnchor.date,label:Y||K.entry.file.basename,entries:[K.entry]}});q.sort((K,Y)=>n0(K.date,Y.date));let G=q[0]?.date??new Date,X=q[q.length-1]?.date??new Date;return{propertyId:Q,displayName:J,points:q,minDate:G,maxDate:X}}class c0{createDataPoints($,Q,J){return $.map((Z)=>{let q=Z.getValue(Q),G=J.get(Z)??null;return{entry:Z,dateAnchor:G,value:q?.toString()??null,normalizedValue:H4(q)}})}aggregateForHeatmap($,Q,J,Z,q){let G=$.filter((B)=>B.dateAnchor!==null);if(G.length===0)return this.createEmptyHeatmapData(Q,J,Z);let X=G.map((B)=>B.dateAnchor.date),K=k$(X),Y=S$(X),U=new Map;for(let B of G){let j=B.dateAnchor.date,L=R5(j,Z),W=n1(j,Z);if(!U.has(L))U.set(L,{date:W,values:[],entries:[]});let V=U.get(L);if(B.normalizedValue!==null)V.values.push(B.normalizedValue);V.entries.push(B.entry)}let N=[],H=1/0,M=-1/0;for(let{date:B,values:j,entries:L}of U.values()){let W=j.length>0?j.reduce((V,_)=>V+_,0)/j.length:null;if(W!==null)H=Math.min(H,W),M=Math.max(M,W);N.push({date:B,value:W,count:L.length,entries:L})}if(q){let B=OQ(K,Y,Z,U);N.push(...B)}return N.sort((B,j)=>n0(B.date,j.date)),{propertyId:Q,displayName:J,granularity:Z,cells:N,minDate:K,maxDate:Y,minValue:H===1/0?0:H,maxValue:M===-1/0?1:M}}aggregateForChart($,Q,J,Z){return zQ($,Q,J,Z)}aggregateForPieChart($,Q,J){return IQ($,Q,J)}aggregateForRadarChart($,Q,J,Z){return this.aggregateForChart($,Q,J,Z)}aggregateForScatterChart($,Q,J){return AQ($,Q,J)}aggregateForBubbleChart($,Q,J,Z){return SQ($,Q,J,Z)}aggregateForTagCloud($,Q,J){return kQ($,Q,J)}aggregateForTimeline($,Q,J){return bQ($,Q,J)}createEmptyHeatmapData($,Q,J){return{propertyId:$,displayName:Q,granularity:J,cells:[],minDate:new Date,maxDate:new Date,minValue:0,maxValue:1}}}var e5=require("obsidian"),hG=3000;class B1{containerEl;app;propertyId;displayName;config;onMaximizeToggle=null;isMaximized=!1;maximizeBtn=null;playBtn=null;animationState="idle";animationDuration=hG;constructor($,Q,J,Z,q){this.containerEl=$,this.app=Q,this.propertyId=J,this.displayName=Z,this.config=q}setMaximizeCallback($){this.onMaximizeToggle=$}setMaximized($){this.isMaximized=$,this.updateMaximizeButtonIcon()}setAnimationDuration($){this.animationDuration=$}updateMaximizeButtonIcon(){if(this.maximizeBtn)e5.setIcon(this.maximizeBtn,this.isMaximized?"minimize-2":"maximize-2"),this.maximizeBtn.setAttribute("aria-label",this.isMaximized?"Minimize":"Maximize")}supportsAnimation(){return!1}getAnimationState(){return this.animationState}playAnimation(){}stopAnimation(){this.animationState="idle",this.updatePlayButtonIcon()}updatePlayButtonIcon(){if(this.playBtn){let $=this.animationState==="playing"?"square":"play",Q=this.animationState==="playing"?"Stop animation":"Play animation";if(e5.setIcon(this.playBtn,$),this.playBtn.setAttribute("aria-label",Q),this.animationState==="playing")this.playBtn.classList.add("lt-play-btn--playing");else this.playBtn.classList.remove("lt-play-btn--playing")}}showEmptyState($){this.containerEl.empty();let Q=this.containerEl.createDiv({cls:"lt-empty"});Q.createDiv({cls:"lt-empty-icon",text:"\uD83D\uDCCA"}),Q.createDiv({cls:"lt-empty-text",text:$??`No data available for "${this.displayName}"`})}showLoading(){this.containerEl.empty(),this.containerEl.createDiv({cls:"lt-loading"}).createDiv({cls:"lt-loading-spinner"})}createSectionHeader($){let Q=this.containerEl.createDiv({cls:"lt-section-header"});Q.createDiv({cls:"lt-section-title",text:$});let J=Q.createDiv({cls:"lt-section-actions"});if(this.supportsAnimation())this.playBtn=J.createDiv({cls:"lt-play-btn",attr:{role:"button",tabindex:"0","aria-label":"Play animation"}}),e5.setIcon(this.playBtn,"play"),this.playBtn.addEventListener("click",(Z)=>{Z.stopPropagation(),this.handlePlayButtonClick()}),this.playBtn.addEventListener("keydown",(Z)=>{if(Z.key==="Enter"||Z.key===" ")Z.preventDefault(),Z.stopPropagation(),this.handlePlayButtonClick()});return this.maximizeBtn=J.createDiv({cls:"lt-maximize-btn",attr:{role:"button",tabindex:"0","aria-label":this.isMaximized?"Minimize":"Maximize"}}),e5.setIcon(this.maximizeBtn,this.isMaximized?"minimize-2":"maximize-2"),this.maximizeBtn.addEventListener("click",(Z)=>{Z.stopPropagation(),this.triggerMaximizeToggle()}),this.maximizeBtn.addEventListener("keydown",(Z)=>{if(Z.key==="Enter"||Z.key===" ")Z.preventDefault(),Z.stopPropagation(),this.triggerMaximizeToggle()}),Q}handlePlayButtonClick(){if(this.animationState==="playing")this.stopAnimation();else this.playAnimation()}triggerMaximizeToggle(){if(this.onMaximizeToggle)this.onMaximizeToggle(this.propertyId,!this.isMaximized)}openFile($,Q=!1){this.app.workspace.openLinkText($.file.path,"",Q)}openEntries($){let Q=$[0];if(Q)this.openFile(Q)}}class i1{el;visible=!1;constructor($){this.el=$.createDiv({cls:"lt-tooltip"})}show($,Q,J,Z,q){if(this.el.empty(),J)this.el.createDiv({cls:"lt-tooltip-title",text:J});if(Z)this.el.createDiv({cls:"lt-tooltip-value",text:Z});if(q)this.el.createDiv({cls:"lt-tooltip-subtitle",text:q});this.el.style.left=`${$}px`,this.el.style.top=`${Q}px`,this.el.classList.add("lt-tooltip--visible"),this.visible=!0,requestAnimationFrame(()=>{this.adjustPosition()})}hide(){this.el.classList.remove("lt-tooltip--visible"),this.visible=!1}isVisible(){return this.visible}destroy(){this.el.remove()}adjustPosition(){let $=this.el.getBoundingClientRect(),Q=window.innerWidth,J=window.innerHeight;if($.right>Q){let Z=Math.max(0,Q-$.width-10);this.el.style.left=`${Z}px`}if($.bottom>J){let Z=Math.max(0,J-$.height-10);this.el.style.top=`${Z}px`}}}function yQ($,Q,J,Z,q="daily"){let G=N1($,q),X=Q!==null?Q.toFixed(2):"No data",K=J>0?`${J} ${J===1?"entry":"entries"}`:"";return{title:G,value:`${Z}: ${X}`,subtitle:K}}function vQ($,Q){return{title:$,value:`${Q} ${Q===1?"occurrence":"occurrences"}`}}function fQ($,Q,J){switch(J.granularity){case"daily":return hQ($,Q,J);case"weekly":return fG($,Q,J);case"monthly":return xG($,Q,J);case"quarterly":return gG($,Q,J);case"yearly":return mG($,Q,J);default:return hQ($,Q,J)}}function hQ($,Q,J){let Z=$.createDiv({cls:"lt-heatmap-wrapper"});if(J.showDayLabels){let Y=Z.createDiv({cls:"lt-heatmap-days"}),U=["Mon","","Wed","","Fri","",""];for(let N of U){let H=Y.createDiv({cls:"lt-heatmap-day-label"});H.style.height=`${J.cellSize}px`,H.style.lineHeight=`${J.cellSize}px`,H.textContent=N}}let q=Z.createDiv({cls:"lt-heatmap-grid"});q.style.gap=`${J.cellGap}px`;let G=$4(Q.minDate,Q.maxDate),X=-1,K=[];if(G.forEach((Y,U)=>{let N=q.createDiv({cls:"lt-heatmap-week"});N.style.gap=`${J.cellGap}px`;let H=t$(Y);if(H!==X)K.push({week:U,name:Q4(Y)}),X=H;for(let M=0;M<7;M++){let B=F5(Y,M),j=uG(Q.cells,B),L=N.createDiv({cls:"lt-heatmap-cell"});L.style.width=`${J.cellSize}px`,L.style.height=`${J.cellSize}px`;let W=p1(j?.value??null,Q.minValue,Q.maxValue);if(L.classList.add(`lt-heatmap-cell--level-${W}`),L.dataset.date=d0(B),j){if(j.value!==null)L.dataset.value=String(j.value);if(L.dataset.count=String(j.count),j.count>0)L.classList.add("lt-heatmap-cell--has-data")}}}),J.showMonthLabels&&K.length>0){let Y=$.createDiv({cls:"lt-heatmap-months"});if(J.showDayLabels)Y.createDiv({cls:"lt-heatmap-month-spacer"});let U=0;for(let{week:N,name:H}of K){if(N>U){let M=Y.createDiv({cls:"lt-heatmap-month-spacer"});M.style.width=`${(N-U)*(J.cellSize+J.cellGap)}px`}Y.createSpan({cls:"lt-heatmap-month-label",text:H}),U=N+1}$.insertBefore(Y,Z)}return q}function fG($,Q,J){let q=$.createDiv({cls:"lt-heatmap-wrapper lt-heatmap-wrapper--weekly"}).createDiv({cls:"lt-heatmap-grid lt-heatmap-grid--weekly"});q.style.gap=`${J.cellGap}px`;let G=[...Q.cells].sort((X,K)=>n0(X.date,K.date));for(let X of G){let K=q.createDiv({cls:"lt-heatmap-cell"});K.style.width=`${J.cellSize*2}px`,K.style.height=`${J.cellSize}px`;let Y=p1(X.value,Q.minValue,Q.maxValue);if(K.classList.add(`lt-heatmap-cell--level-${Y}`),K.dataset.date=d0(X.date),X.value!==null)K.dataset.value=String(X.value);if(K.dataset.count=String(X.count),X.count>0)K.classList.add("lt-heatmap-cell--has-data")}return q}function xG($,Q,J){let Z=$.createDiv({cls:"lt-heatmap-wrapper lt-heatmap-wrapper--monthly"}),q=new Map;for(let Y of Q.cells){let U=V0(Y.date,"yyyy-MM");q.set(U,Y)}let G=Z.createDiv({cls:"lt-heatmap-grid lt-heatmap-grid--monthly"});if(G.style.gap=`${J.cellGap}px`,G.style.display="grid",G.style.gridTemplateColumns="repeat(12, 1fr)",J.showMonthLabels){let Y=["J","F","M","A","M","J","J","A","S","O","N","D"];for(let U of Y)G.createDiv({cls:"lt-heatmap-month-label",text:U})}let X=H6(Q.minDate),K=H6(Q.maxDate);for(let Y=X;Y<=K;Y++)for(let U=0;U<12;U++){let N=`${Y}-${String(U+1).padStart(2,"0")}`,H=q.get(N),M=G.createDiv({cls:"lt-heatmap-cell"});M.style.width=`${J.cellSize*1.5}px`,M.style.height=`${J.cellSize}px`;let B=p1(H?.value??null,Q.minValue,Q.maxValue);M.classList.add(`lt-heatmap-cell--level-${B}`);let j=new Date(Y,U,1);if(M.dataset.date=d0(j),H){if(H.value!==null)M.dataset.value=String(H.value);if(M.dataset.count=String(H.count),H.count>0)M.classList.add("lt-heatmap-cell--has-data")}}return G}function gG($,Q,J){let q=$.createDiv({cls:"lt-heatmap-wrapper lt-heatmap-wrapper--quarterly"}).createDiv({cls:"lt-heatmap-grid lt-heatmap-grid--quarterly"});if(q.style.gap=`${J.cellGap}px`,q.style.display="grid",q.style.gridTemplateColumns="repeat(4, 1fr)",J.showMonthLabels)for(let X of["Q1","Q2","Q3","Q4"])q.createDiv({cls:"lt-heatmap-month-label",text:X});let G=[...Q.cells].sort((X,K)=>n0(X.date,K.date));for(let X of G){let K=q.createDiv({cls:"lt-heatmap-cell"});K.style.width=`${J.cellSize*2}px`,K.style.height=`${J.cellSize}px`;let Y=p1(X.value,Q.minValue,Q.maxValue);if(K.classList.add(`lt-heatmap-cell--level-${Y}`),K.dataset.date=d0(X.date),X.value!==null)K.dataset.value=String(X.value);if(K.dataset.count=String(X.count),X.count>0)K.classList.add("lt-heatmap-cell--has-data")}return q}function mG($,Q,J){let q=$.createDiv({cls:"lt-heatmap-wrapper lt-heatmap-wrapper--yearly"}).createDiv({cls:"lt-heatmap-grid lt-heatmap-grid--yearly"});q.style.gap=`${J.cellGap}px`;let G=[...Q.cells].sort((X,K)=>n0(X.date,K.date));for(let X of G){let K=q.createDiv({cls:"lt-heatmap-cell"});K.style.width=`${J.cellSize*3}px`,K.style.height=`${J.cellSize}px`;let Y=p1(X.value,Q.minValue,Q.maxValue);if(K.classList.add(`lt-heatmap-cell--level-${Y}`),K.dataset.date=d0(X.date),X.value!==null)K.dataset.value=String(X.value);if(K.dataset.count=String(X.count),X.count>0)K.classList.add("lt-heatmap-cell--has-data");K.textContent=V0(X.date,"yyyy")}return q}function uG($,Q){return $.find((J)=>o9(J.date,Q))}class W8 extends B1{heatmapConfig;aggregationService;tooltip=null;gridEl=null;heatmapData=null;constructor($,Q,J,Z,q){super($,Q,J,Z,q);this.heatmapConfig=q,this.aggregationService=new c0}render($){if(m(`Rendering heatmap for ${this.displayName}`,"debug"),this.heatmapData=this.aggregationService.aggregateForHeatmap($,this.propertyId,this.displayName,this.heatmapConfig.granularity,this.heatmapConfig.showEmptyValues),this.heatmapConfig.scale){if(this.heatmapConfig.scale.min!==null)this.heatmapData.minValue=this.heatmapConfig.scale.min;if(this.heatmapConfig.scale.max!==null)this.heatmapData.maxValue=this.heatmapConfig.scale.max}if(this.heatmapData.cells.length===0){this.showEmptyState(`No data with dates found for "${this.displayName}"`);return}this.containerEl.empty(),this.createSectionHeader(this.displayName);let Q=this.containerEl.createDiv({cls:"lt-heatmap"});this.applyColorScheme(Q),this.tooltip=new i1(Q),this.gridEl=fQ(Q,this.heatmapData,this.heatmapConfig),this.addEventListeners(),this.createLegend(Q)}update($){this.render($)}destroy(){this.tooltip?.destroy(),this.tooltip=null,this.gridEl=null,this.heatmapData=null}addEventListeners(){if(!this.gridEl||!this.heatmapData)return;this.gridEl.querySelectorAll(s1.HEATMAP_CELL).forEach((Q)=>{let J=Q;J.addEventListener("mouseenter",(Z)=>this.handleCellHover(Z,J)),J.addEventListener("mouseleave",()=>this.handleCellLeave()),J.addEventListener("click",()=>this.handleCellClick(J))})}handleCellHover($,Q){if(!this.tooltip||!this.heatmapData)return;let J=Q.dataset.date,Z=Q.dataset.value,q=Q.dataset.count;if(!J)return;let G=D1(J),X=Z?parseFloat(Z):null,K=q?parseInt(q,10):0,{title:Y,value:U,subtitle:N}=yQ(G,X,K,this.displayName,this.heatmapConfig.granularity),H=Q.getBoundingClientRect();this.tooltip.show(H.left+H.width/2,H.top-10,Y,U,N)}handleCellLeave(){this.tooltip?.hide()}handleCellClick($){if(!this.heatmapData)return;let Q=$.dataset.date;if(!Q)return;let J=D1(Q),Z=this.heatmapData.cells.find((q)=>f9(q.date,J));if(Z&&Z.entries.length>0)this.openEntries(Z.entries)}createLegend($){let Q=$.createDiv({cls:"lt-heatmap-legend"});Q.createSpan({text:"Less"});for(let J=0;J<=4;J++){let Z=Q.createDiv({cls:`lt-heatmap-cell lt-heatmap-cell--level-${J}`});Z.style.width=`${this.heatmapConfig.cellSize}px`,Z.style.height=`${this.heatmapConfig.cellSize}px`}Q.createSpan({text:"More"})}applyColorScheme($){let{colorScheme:Q}=this.heatmapConfig;if(!Q)return;X6($,Q)}}function xQ($,Q,J,Z,q,G){let X=J.labels.map((Y,U)=>{let N=b0[U%b0.length];return R1(N,0.7)}),K=J.labels.map((Y,U)=>{return b0[U%b0.length]});return new $(Q,{type:Z.chartType,data:{labels:J.labels,datasets:[{label:q,data:J.values,backgroundColor:X,borderColor:K,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1.5,plugins:{legend:{display:Z.showLegend,position:"right"},tooltip:{enabled:!0,callbacks:{label:(Y)=>{let U=Y.label??"";if(!U||U==="null")return"";let N=Y.parsed;if(N===null||N===void 0)return"";let H=J.values.reduce((B,j)=>B+j,0)??1,M=(N/H*100).toFixed(1);return`${U}: ${N} (${M}%)`}}}},onClick:(Y,U)=>{G(U)}}})}function gQ($,Q,J,Z,q){let G=J.datasets.map((X,K)=>{let Y=b0[K%b0.length];return{label:X.label,data:X.data,backgroundColor:R1(Y,0.2),borderColor:Y,borderWidth:2,fill:!0}});return new $(Q,{type:"radar",data:{labels:J.labels,datasets:G},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1.5,plugins:{legend:{display:Z.showLegend},tooltip:{enabled:!0}},scales:{r:{beginAtZero:!0,grid:{display:Z.showGrid}}},onClick:(X,K)=>{q(K)}}})}function mQ($,Q,J,Z,q){let G=Z.chartType==="line"&&Z.tension>0,X=J.datasets.map((Y,U)=>{let N=b0[U%b0.length];return{label:Y.label,data:Y.data,backgroundColor:Z.chartType==="bar"?R1(N,0.7):R1(N,0.3),borderColor:N,borderWidth:2,tension:Z.tension,fill:G||Z.chartType==="line"}}),K=Z.chartType==="line"?"line":Z.chartType;return new $(Q,{type:K,data:{labels:J.labels,datasets:X},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2.5,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:Z.showLegend},tooltip:{enabled:!0,callbacks:{label:(Y)=>{let U=Y.dataset.label??"",N=Y.parsed.y;if(N===null||N===void 0)return"";return`${U}: ${N.toFixed(2)}`}}}},scales:{x:{display:!0,grid:{display:Z.showGrid}},y:{display:!0,beginAtZero:!Z.scale?.min,min:Z.scale?.min??void 0,max:Z.scale?.max??void 0,grid:{display:Z.showGrid}}},onClick:(Y,U)=>{q(U)}}})}function uQ($,Q,J,Z,q,G){let X=b0[0];return new $(Q,{type:"scatter",data:{datasets:[{label:q,data:J.points,backgroundColor:R1(X,0.7),borderColor:X,borderWidth:1,pointRadius:6,pointHoverRadius:8}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:Z.showLegend},tooltip:{enabled:!0,callbacks:{label:(K)=>{let Y=K.parsed.x,U=K.parsed.y;if(Y===null||Y===void 0||U===null||U===void 0)return"";return`Time: ${Y.toFixed(1)}%, Value: ${U.toFixed(2)}`}}}},scales:{x:{display:!0,title:{display:!0,text:"Time "},min:0,max:100,grid:{display:Z.showGrid}},y:{display:!0,title:{display:!0,text:"Value"},beginAtZero:!Z.scale?.min,min:Z.scale?.min??void 0,max:Z.scale?.max??void 0,grid:{display:Z.showGrid}}},onClick:(K,Y)=>{G(Y)}}})}function pQ($,Q,J,Z,q,G){let X=b0[0];return new $(Q,{type:"bubble",data:{datasets:[{label:q,data:J.points,backgroundColor:R1(X,0.5),borderColor:X,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:Z.showLegend},tooltip:{enabled:!0,callbacks:{label:(K)=>{let Y=K.parsed.y;if(Y===null||Y===void 0)return"";let U=K.raw?.r??0,N=Math.round((U-5)/25*10)||1;return`Value: ${Y.toFixed(2)}, Entries: ~${N}`}}}},scales:{x:{display:!0,title:{display:!0,text:"Time "},min:0,max:100,grid:{display:Z.showGrid}},y:{display:!0,title:{display:!0,text:"Value"},beginAtZero:!Z.scale?.min,min:Z.scale?.min??void 0,max:Z.scale?.max??void 0,grid:{display:Z.showGrid}}},onClick:(K,Y)=>{G(Y)}}})}class a7 extends B1{chartConfig;aggregationService;chart=null;canvasEl=null;chartData=null;pieChartData=null;scatterChartData=null;bubbleChartData=null;resizeObserver=null;chartContainer=null;originalData=[];animationInterval=null;currentAnimationIndex=0;constructor($,Q,J,Z,q){super($,Q,J,Z,q);this.chartConfig=q,this.aggregationService=new c0}isPieType(){return["pie","doughnut","polarArea"].includes(this.chartConfig.chartType)}isScatterType(){return this.chartConfig.chartType==="scatter"}isBubbleType(){return this.chartConfig.chartType==="bubble"}render($){if(m(`Rendering chart for ${this.displayName}`,"debug"),this.chartData=null,this.pieChartData=null,this.scatterChartData=null,this.bubbleChartData=null,this.isPieType()){if(this.pieChartData=this.aggregationService.aggregateForPieChart($,this.propertyId,this.displayName),this.pieChartData.labels.length===0){this.showEmptyState(`No data found for "${this.displayName}"`);return}}else if(this.isScatterType()){if(this.scatterChartData=this.aggregationService.aggregateForScatterChart($,this.propertyId,this.displayName),this.scatterChartData.points.length===0){this.showEmptyState(`No numeric data with dates found for "${this.displayName}"`);return}}else if(this.isBubbleType()){if(this.bubbleChartData=this.aggregationService.aggregateForBubbleChart($,this.propertyId,this.displayName,this.chartConfig.granularity),this.bubbleChartData.points.length===0){this.showEmptyState(`No numeric data with dates found for "${this.displayName}"`);return}}else if(this.chartData=this.aggregationService.aggregateForChart($,this.propertyId,this.displayName,this.chartConfig.granularity),this.chartData.labels.length===0){this.showEmptyState(`No numeric data with dates found for "${this.displayName}"`);return}this.containerEl.empty(),this.createSectionHeader(this.displayName),this.chartContainer=this.containerEl.createDiv({cls:"lt-chart"}),this.canvasEl=this.chartContainer.createEl("canvas",{cls:"lt-chart-canvas"}),this.initChart()}async initChart(){if(!this.canvasEl)return;if(this.isPieType()&&!this.pieChartData)return;if(this.isScatterType()&&!this.scatterChartData)return;if(this.isBubbleType()&&!this.bubbleChartData)return;if(!this.isPieType()&&!this.isScatterType()&&!this.isBubbleType()&&!this.chartData)return;try{let{Chart:$,registerables:Q}=await Promise.resolve().then(() => (E2(),w2));$.register(...Q);let J=this.canvasEl.getContext("2d");if(!J)return;if(this.isPieType()&&this.pieChartData)this.chart=xQ($,J,this.pieChartData,this.chartConfig,this.displayName,(Z)=>this.handlePieChartClick(Z));else if(this.chartConfig.chartType==="radar"&&this.chartData)this.chart=gQ($,J,this.chartData,this.chartConfig,(Z)=>this.handleChartClick(Z));else if(this.isScatterType()&&this.scatterChartData)this.chart=uQ($,J,this.scatterChartData,this.chartConfig,this.displayName,(Z)=>this.handleScatterChartClick(Z));else if(this.isBubbleType()&&this.bubbleChartData)this.chart=pQ($,J,this.bubbleChartData,this.chartConfig,this.displayName,(Z)=>this.handleBubbleChartClick(Z));else if(this.chartData)this.chart=mQ($,J,this.chartData,this.chartConfig,(Z)=>this.handleChartClick(Z));this.setupResizeObserver()}catch($){m("Failed to initialize Chart.js","error",$),this.showEmptyState("Failed to load chart library")}}setupResizeObserver(){if(!this.chartContainer||!this.chart)return;this.cleanupResizeObserver(),this.resizeObserver=new ResizeObserver(()=>{if(this.chart)this.chart.resize()}),this.resizeObserver.observe(this.chartContainer)}cleanupResizeObserver(){if(this.resizeObserver)this.resizeObserver.disconnect(),this.resizeObserver=null}update($){this.destroy(),this.render($)}destroy(){if(this.stopAnimation(),this.cleanupResizeObserver(),this.chart)this.chart.destroy(),this.chart=null;this.canvasEl=null,this.chartContainer=null,this.chartData=null,this.pieChartData=null,this.scatterChartData=null,this.bubbleChartData=null,this.originalData=[]}supportsAnimation(){return!this.isPieType()&&!this.isScatterType()&&!this.isBubbleType()&&this.chartConfig.chartType!=="radar"}playAnimation(){if(!this.chart||!this.chartData||this.animationState==="playing")return;if(this.animationState="playing",this.updatePlayButtonIcon(),this.originalData.length===0)this.originalData=this.chart.data.datasets.map((J)=>[...J.data]);let $=this.originalData[0]?.length??0;if($===0){this.animationState="idle",this.updatePlayButtonIcon();return}this.chart.data.datasets.forEach((J)=>{J.data=J.data.map(()=>null)}),this.chart.update("none"),this.currentAnimationIndex=0;let Q=Math.max(30,this.animationDuration/$);this.animationInterval=setInterval(()=>{if(!this.chart||this.animationState!=="playing"){this.clearAnimationInterval();return}if(this.chart.data.datasets.forEach((J,Z)=>{let q=this.originalData[Z];if(q&&this.currentAnimationIndex<q.length){let G=q[this.currentAnimationIndex];J.data[this.currentAnimationIndex]=G??null}}),this.chart.update("none"),this.currentAnimationIndex++,this.currentAnimationIndex>=$)this.clearAnimationInterval(),this.animationState="idle",this.updatePlayButtonIcon()},Q)}clearAnimationInterval(){if(this.animationInterval)clearInterval(this.animationInterval),this.animationInterval=null}stopAnimation(){if(this.clearAnimationInterval(),!this.chart){this.animationState="idle",this.updatePlayButtonIcon();return}if(this.originalData.length>0)this.chart.data.datasets.forEach(($,Q)=>{let J=this.originalData[Q];if(J)$.data=[...J]}),this.chart.update("none");this.animationState="idle",this.updatePlayButtonIcon()}handleChartClick($){if(!this.chartData||$.length===0)return;let Q=$[0];if(!Q)return;let J=this.chartData.datasets[Q.datasetIndex];if(!J)return;let Z=J.entries[Q.index];if(Z&&Z.length>0)this.openEntries(Z)}handlePieChartClick($){if(!this.pieChartData||$.length===0)return;let Q=$[0];if(!Q)return;let J=this.pieChartData.entries[Q.index];if(J&&J.length>0)this.openEntries(J)}handleScatterChartClick($){if(!this.scatterChartData||$.length===0)return;let Q=$[0];if(!Q)return;let J=this.scatterChartData.entries[Q.index];if(J)this.openFile(J)}handleBubbleChartClick($){if(!this.bubbleChartData||$.length===0)return;let Q=$[0];if(!Q)return;let J=this.bubbleChartData.entries[Q.index];if(J&&J.length>0)this.openEntries(J)}}class t7 extends B1{tagCloudConfig;aggregationService;tooltip=null;cloudEl=null;tagCloudData=null;constructor($,Q,J,Z,q){super($,Q,J,Z,q);this.tagCloudConfig=q,this.aggregationService=new c0}render($){if(m(`Rendering tag cloud for ${this.displayName}`,"debug"),this.tagCloudData=this.aggregationService.aggregateForTagCloud($,this.propertyId,this.displayName),this.tagCloudData.tags.length===0){this.showEmptyState(`No data found for "${this.displayName}"`);return}this.containerEl.empty(),this.createSectionHeader(this.displayName),this.cloudEl=this.containerEl.createDiv({cls:"lt-tag-cloud"}),this.tooltip=new i1(this.cloudEl);let Q=[...this.tagCloudData.tags];if(this.tagCloudConfig.sortBy==="alphabetical")Q.sort((J,Z)=>J.tag.localeCompare(Z.tag));Q=Q.slice(0,this.tagCloudConfig.maxTags);for(let J of Q){let Z=this.calculateFontSize(J.frequency,this.tagCloudData.maxFrequency),q=this.getSizeClass(Z),G=this.cloudEl.createSpan({cls:`lt-tag ${q}`,text:J.tag});G.dataset.tag=J.tag,G.dataset.frequency=String(J.frequency),G.addEventListener("mouseenter",(X)=>this.handleTagHover(X,G)),G.addEventListener("mouseleave",()=>this.handleTagLeave()),G.addEventListener("click",()=>this.handleTagClick(J.tag))}}update($){this.render($)}destroy(){this.tooltip?.destroy(),this.tooltip=null,this.cloudEl=null,this.tagCloudData=null}calculateFontSize($,Q){if(Q===0)return this.tagCloudConfig.minFontSize;let J=$/Q,Z=this.tagCloudConfig.maxFontSize-this.tagCloudConfig.minFontSize;return this.tagCloudConfig.minFontSize+J*Z}getSizeClass($){let J=(this.tagCloudConfig.maxFontSize-this.tagCloudConfig.minFontSize)/5;if($<this.tagCloudConfig.minFontSize+J)return"lt-tag--xs";if($<this.tagCloudConfig.minFontSize+J*2)return"lt-tag--sm";if($<this.tagCloudConfig.minFontSize+J*3)return"lt-tag--md";if($<this.tagCloudConfig.minFontSize+J*4)return"lt-tag--lg";return"lt-tag--xl"}handleTagHover($,Q){if(!this.tooltip)return;let J=Q.dataset.tag??"",Z=Q.dataset.frequency,q=Z?parseInt(Z,10):0,{title:G,value:X}=vQ(J,q),K=Q.getBoundingClientRect();this.tooltip.show(K.left+K.width/2,K.top-10,G,X)}handleTagLeave(){this.tooltip?.hide()}handleTagClick($){if(!this.tagCloudData)return;let Q=this.tagCloudData.tags.find((J)=>J.tag===$);if(Q&&Q.entries.length>0)this.openEntries(Q.entries)}}class e7 extends B1{aggregationService;tooltip=null;timelineEl=null;timelineData=null;constructor($,Q,J,Z,q){super($,Q,J,Z,q);this.aggregationService=new c0}render($){if(m(`Rendering timeline for ${this.displayName}`,"debug"),this.timelineData=this.aggregationService.aggregateForTimeline($,this.propertyId,this.displayName),this.timelineData.points.length===0){this.showEmptyState(`No date data found for "${this.displayName}"`);return}this.containerEl.empty(),this.createSectionHeader(this.displayName),this.timelineEl=this.containerEl.createDiv({cls:"lt-timeline"}),this.tooltip=new i1(this.timelineEl),this.timelineEl.createDiv({cls:"lt-timeline-line"}),this.renderTimelinePoints(),this.renderAxisLabels()}renderTimelinePoints(){if(!this.timelineEl||!this.timelineData)return;let{points:$,minDate:Q,maxDate:J}=this.timelineData,Z=U6(J,Q);if(Z===0){let q=$[0];if(q)this.renderPoint(q.date,q.label,q.entries.length,50);return}for(let q of $){let X=U6(q.date,Q)/Z*100;this.renderPoint(q.date,q.label,q.entries.length,X)}}renderPoint($,Q,J,Z){if(!this.timelineEl||!this.timelineData)return;let q=this.timelineEl.createDiv({cls:"lt-timeline-point"});q.style.left=`${Z}%`;let G=12,X=24,K=Math.min(G+J*2,X);q.style.width=`${K}px`,q.style.height=`${K}px`,q.dataset.date=$.toISOString(),q.dataset.label=Q,q.dataset.count=String(J),q.addEventListener("mouseenter",(Y)=>this.handlePointHover(Y,q)),q.addEventListener("mouseleave",()=>this.handlePointLeave()),q.addEventListener("click",()=>this.handlePointClick($))}renderAxisLabels(){if(!this.timelineEl||!this.timelineData)return;let{minDate:$,maxDate:Q}=this.timelineData,J=this.timelineEl.createDiv({cls:"lt-timeline-label lt-timeline-label--start"});J.textContent=N1($,this.config.granularity);let Z=this.timelineEl.createDiv({cls:"lt-timeline-label lt-timeline-label--end"});Z.textContent=N1(Q,this.config.granularity)}update($){this.render($)}destroy(){this.tooltip?.destroy(),this.tooltip=null,this.timelineEl=null,this.timelineData=null}handlePointHover($,Q){if(!this.tooltip)return;let J=Q.dataset.date,Z=Q.dataset.label??"",q=Q.dataset.count,G=q?parseInt(q,10):0;if(!J)return;let X=D1(J),K=N1(X,this.config.granularity),Y=Z,U=G>0?`${G} ${G===1?"entry":"entries"}`:"",N=Q.getBoundingClientRect();this.tooltip.show(N.left+N.width/2,N.top-10,K,Y,U)}handlePointLeave(){this.tooltip?.hide()}handlePointClick($){if(!this.timelineData)return;let Q=this.timelineData.points.find((J)=>J.date.toDateString()===$.toDateString());if(Q&&Q.entries.length>0)this.openEntries(Q.entries)}}function $$($,Q,J){let Z=$.createDiv({cls:"lt-empty"});if(J)Z.createDiv({cls:"lt-empty-icon",text:J});return Z.createDiv({cls:"lt-empty-text",text:Q}),Z}var Q$={noData:"No data available",noDateAnchor:"No date information found for entries",noBooleanData:"No boolean values found for heatmap",noNumericData:"No numeric values found for chart",noTagData:"No tags or lists found",noProperties:"No properties configured for visualization",basesDisabled:"Bases feature is not enabled in this vault"};var D2=require("obsidian");function P2($,Q,J){let Z=$.createDiv({cls:"lt-card lt-config-card"}),q=Z.createDiv({cls:"lt-config-card-header"});q.createSpan({cls:"lt-config-card-title",text:Q});let G=q.createSpan({cls:"lt-config-card-subtitle",text:"Select visualization type"}),X=Z.createDiv({cls:"lt-config-card-options"}),K=Z.createDiv({cls:"lt-config-scale-section lt-hidden"});for(let Y of T9){let U=X.createDiv({cls:"lt-config-option"});U.setAttribute("role","button"),U.setAttribute("tabindex","0"),U.setAttribute("aria-label",`${Y.label}: ${Y.description}`);let N=U.createDiv({cls:"lt-config-option-icon"});D2.setIcon(N,Y.icon),U.createSpan({cls:"lt-config-option-label",text:Y.label});let H=()=>{if(K1(Y.type))X.addClass("lt-hidden"),G.setText("Configure scale (optional)"),KU(K,Y.label,(M)=>{J({visualizationType:Y.type,scale:M})}),K.removeClass("lt-hidden");else J({visualizationType:Y.type})};U.addEventListener("click",H),U.addEventListener("keydown",(M)=>{if(M.key==="Enter"||M.key===" ")M.preventDefault(),H()})}return Z}function KU($,Q,J){$.empty();let Z=$.createDiv({cls:"lt-scale-form"});Z.createDiv({cls:"lt-scale-info",text:`Set min/max for ${Q}. Leave empty for auto-detection.`});let q=Z.createDiv({cls:"lt-scale-inputs"}),G=q.createDiv({cls:"lt-scale-input-group"});G.createSpan({cls:"lt-scale-label",text:"Min"});let X=G.createEl("input",{cls:"lt-scale-input",type:"number",placeholder:"auto"}),K=q.createDiv({cls:"lt-scale-input-group"});K.createSpan({cls:"lt-scale-label",text:"Max"});let Y=K.createEl("input",{cls:"lt-scale-input",type:"number",placeholder:"auto"}),U=Z.createDiv({cls:"lt-scale-presets"});U.createSpan({cls:"lt-scale-presets-label",text:"Presets:"});for(let B of x1)U.createEl("button",{cls:"lt-scale-preset-btn",text:B.label}).addEventListener("click",()=>{X.value=String(B.min),Y.value=String(B.max)});let N=Z.createDiv({cls:"lt-scale-buttons"});N.createEl("button",{cls:"lt-scale-btn lt-scale-btn--secondary",text:"Skip (auto)"}).addEventListener("click",()=>{J(void 0)}),N.createEl("button",{cls:"lt-scale-btn lt-scale-btn--primary",text:"Confirm"}).addEventListener("click",()=>{let B=X.value.trim(),j=Y.value.trim(),L={min:B?parseFloat(B):null,max:j?parseFloat(j):null};if(L.min!==null||L.max!==null)J(L);else J(void 0)})}var T2=require("obsidian");function C2($,Q,J,Z,q,G){let X=new T2.Menu;X.addItem((K)=>{K.setTitle(q?"Minimize":"Maximize").setIcon(q?"minimize-2":"maximize-2").onClick(()=>{G({type:"toggleMaximize"})})}),X.addSeparator(),X.addItem((K)=>{K.setTitle("Change to:").setDisabled(!0).setIsLabel(!0)});for(let K of P9)X.addItem((Y)=>{Y.setTitle(K.label).setIcon(K.icon).setChecked(K.type===Q).onClick(()=>{G({type:"changeVisualization",visualizationType:K.type})})});if(K1(Q)){X.addSeparator(),X.addItem((K)=>{K.setTitle("Scale:").setDisabled(!0).setIsLabel(!0)}),X.addItem((K)=>{K.setTitle("Auto-detect").setIcon("wand").setChecked(!J).onClick(()=>{G({type:"configureScale",scale:void 0})})});for(let K of x1){let Y=J?.min===K.min&&J?.max===K.max;X.addItem((U)=>{U.setTitle(K.label).setChecked(Y).onClick(()=>{G({type:"configureScale",scale:{min:K.min,max:K.max}})})})}X.addItem((K)=>{K.setTitle("Custom scale...").setIcon("edit").onClick(()=>{YU(J,(Y)=>{G({type:"configureScale",scale:Y})})})})}if(X.addSeparator(),X.addItem((K)=>{let Y=Z?"Reset to preset":"Reset configuration";K.setTitle(Y).setIcon("rotate-ccw").setWarning(!Z).onClick(()=>{G({type:"resetConfig"})})}),$ instanceof MouseEvent)X.showAtMouseEvent($);else{let K=$.changedTouches[0];if(K)X.showAtPosition({x:K.clientX,y:K.clientY})}}function YU($,Q){let J=document.body.createDiv({cls:"lt-scale-modal-overlay"}),Z=J.createDiv({cls:"lt-scale-modal"});Z.createDiv({cls:"lt-scale-modal-header",text:"Configure Scale"});let q=Z.createDiv({cls:"lt-scale-modal-form"}),G=q.createDiv({cls:"lt-scale-modal-input-group"});G.createSpan({text:"Min:"});let X=G.createEl("input",{type:"number",cls:"lt-scale-modal-input",placeholder:"auto"});if($?.min!==null&&$?.min!==void 0)X.value=String($.min);let K=q.createDiv({cls:"lt-scale-modal-input-group"});K.createSpan({text:"Max:"});let Y=K.createEl("input",{type:"number",cls:"lt-scale-modal-input",placeholder:"auto"});if($?.max!==null&&$?.max!==void 0)Y.value=String($.max);let U=(j)=>{if(j.key==="Escape")N()},N=()=>{document.removeEventListener("keydown",U),J.remove()},H=Z.createDiv({cls:"lt-scale-modal-buttons"});H.createEl("button",{cls:"lt-scale-modal-btn lt-scale-modal-btn--secondary",text:"Cancel"}).addEventListener("click",()=>{N()}),H.createEl("button",{cls:"lt-scale-modal-btn lt-scale-modal-btn--primary",text:"Apply"}).addEventListener("click",()=>{let j=X.value.trim(),L=Y.value.trim(),W={min:j?parseFloat(j):null,max:L?parseFloat(L):null};if(W.min!==null||W.max!==null)Q(W);else Q(void 0);N()}),J.addEventListener("click",(j)=>{if(j.target===J)N()}),document.addEventListener("keydown",U),X.focus()}var w9=require("obsidian"),J$={columns:2,cardMinHeight:200};function O2($,Q,J){let Z={...Q},q=$.createDiv({cls:"lt-control-bar"});q.createDiv({cls:"lt-control-bar-left"});let G=q.createDiv({cls:"lt-control-bar-right"});return UU(G,Z,J),NU(G,"Height","arrow-up-down",Z.cardMinHeight,100,400,50,(X)=>{Z.cardMinHeight=X,J(Z)}),q}function UU($,Q,J){let Z=$.createDiv({cls:"lt-control-group"}),q=Z.createDiv({cls:"lt-control-icon"});w9.setIcon(q,"layout-grid");let G=Z.createEl("button",{cls:"lt-control-btn"});w9.setIcon(G,"minus"),G.setAttribute("aria-label","Fewer columns");let X=Z.createSpan({cls:"lt-control-value",text:String(Q.columns)}),K=Z.createEl("button",{cls:"lt-control-btn"});w9.setIcon(K,"plus"),K.setAttribute("aria-label","More columns"),G.addEventListener("click",()=>{if(Q.columns>1)Q.columns--,X.textContent=String(Q.columns),J(Q)}),K.addEventListener("click",()=>{if(Q.columns<6)Q.columns++,X.textContent=String(Q.columns),J(Q)})}function NU($,Q,J,Z,q,G,X,K){let Y=$.createDiv({cls:"lt-control-group"}),U=Y.createDiv({cls:"lt-control-icon"});w9.setIcon(U,J);let N=Y.createEl("input",{cls:"lt-control-slider",type:"range"});N.min=String(q),N.max=String(G),N.step=String(X),N.value=String(Z),N.addEventListener("input",()=>{K(parseInt(N.value,10))})}var z2=400,Z$=12,q$=2;function I2(){return[{type:"property",key:"dateAnchorProperty",displayName:"Date anchor property",placeholder:"Auto-detect from filename",filter:($)=>!$.startsWith("file.")},{type:"dropdown",key:"granularity",displayName:"Time granularity",default:"daily",options:{daily:"Daily",weekly:"Weekly",monthly:"Monthly",quarterly:"Quarterly",yearly:"Yearly"}},{type:"group",displayName:"Layout",items:[{type:"slider",key:"gridColumns",displayName:"Number of columns",min:1,max:6,step:1,default:q$},{type:"toggle",key:"showEmptyValues",displayName:"Show empty values",default:!0}]},{type:"group",displayName:"Heatmap",items:[{type:"slider",key:"heatmapCellSize",displayName:"Cell size",min:8,max:24,step:2,default:Z$},{type:"toggle",key:"heatmapShowMonthLabels",displayName:"Show month labels",default:!0},{type:"toggle",key:"heatmapShowDayLabels",displayName:"Show day labels",default:!0},{type:"dropdown",key:"heatmapColorScheme",displayName:"Color scheme",default:"green",options:{green:"Green (GitHub)",blue:"Blue",purple:"Purple",orange:"Orange",red:"Red"}}]},{type:"group",displayName:"Charts",items:[{type:"dropdown",key:"chartType",displayName:"Default chart type",default:"line",options:{line:"Line chart",bar:"Bar chart"}},{type:"toggle",key:"chartShowLegend",displayName:"Show legend",default:!1},{type:"toggle",key:"chartShowGrid",displayName:"Show grid lines",default:!0}]},{type:"group",displayName:"Tag cloud",items:[{type:"slider",key:"tagCloudMaxTags",displayName:"Max tags to show",min:10,max:100,step:10,default:50},{type:"dropdown",key:"tagCloudSortBy",displayName:"Sort by",default:"frequency",options:{frequency:"Frequency",alphabetical:"Alphabetical"}}]}]}var t8="columnConfigs";class G${plugin;getConfigValue;setConfigValue;constructor($,Q,J){this.plugin=$;this.getConfigValue=Q;this.setConfigValue=J}getColumnConfigs(){return this.getConfigValue(t8)??{}}saveColumnConfig($,Q,J,Z){let q=this.getColumnConfigs(),G={propertyId:$,visualizationType:Q,displayName:J,configuredAt:Date.now()};if(Z)G.scale=Z;q[$]=G,this.setConfigValue(t8,q)}getColumnConfig($){return this.getColumnConfigs()[$]??null}findMatchingPreset($){let Q=this.plugin.settings.visualizationPresets;if(Q.length===0)return null;let J=$.includes(".")?$.substring($.indexOf(".")+1):$,Z=J.toLowerCase();m("Finding preset","debug",{propertyId:$,rawPropertyName:J,presetPatterns:Q.map((q)=>q.propertyNamePattern)});for(let q of Q)if(q.propertyNamePattern.toLowerCase()===Z)return m("Preset matched","debug",{pattern:q.propertyNamePattern,matchedTo:$}),q;return null}getEffectiveConfig($,Q){let J=this.getColumnConfig($);if(J)return{config:J,isFromPreset:!1};let Z=this.findMatchingPreset($);if(Z)return{config:{propertyId:$,visualizationType:Z.visualizationType,displayName:Q,configuredAt:0,scale:Z.scale},isFromPreset:!0};return null}updateColumnConfig($,Q){let J=this.getColumnConfigs(),Z=J[$];if(Z)J[$]={...Z,...Q,configuredAt:Date.now()},this.setConfigValue(t8,J)}deleteColumnConfig($){let Q=this.getColumnConfigs();delete Q[$],this.setConfigValue(t8,Q)}}class X${containerEl;getGridEl;getVisualizations;getDataPoints;maximizedPropertyId=null;escapeHandler=null;constructor($,Q,J,Z){this.containerEl=$;this.getGridEl=Q;this.getVisualizations=J;this.getDataPoints=Z}getMaximizedPropertyId(){return this.maximizedPropertyId}isMaximized($){return this.maximizedPropertyId===$}handleMaximizeToggle($,Q){let J=this.maximizedPropertyId;if(this.escapeHandler)document.removeEventListener("keydown",this.escapeHandler),this.escapeHandler=null;if(Q)this.maximizedPropertyId=$,this.escapeHandler=(G)=>{if(G.key==="Escape"&&this.maximizedPropertyId)G.preventDefault(),G.stopPropagation(),this.handleMaximizeToggle(this.maximizedPropertyId,!1)},document.addEventListener("keydown",this.escapeHandler),this.containerEl.classList.add("lt-container--has-maximized");else this.maximizedPropertyId=null,this.containerEl.classList.remove("lt-container--has-maximized");let Z=this.getVisualizations();for(let[G,X]of Z){let K=G===this.maximizedPropertyId;X.setMaximized(K)}let q=this.getGridEl();if(q)q.querySelectorAll(s1.CARD).forEach((X)=>{let K=X.getAttribute(P1.PROPERTY_ID);if(!K){if(this.maximizedPropertyId)X.classList.add("lt-card--hidden");else X.classList.remove("lt-card--hidden");return}if(this.maximizedPropertyId&&K===this.maximizedPropertyId)X.classList.add("lt-card--maximized"),X.classList.remove("lt-card--hidden");else if(X.classList.remove("lt-card--maximized"),this.maximizedPropertyId)X.classList.add("lt-card--hidden");else X.classList.remove("lt-card--hidden")});if(Q){let G=Z.get($);if(G){let X=this.getDataPoints($);G.update(X)}}else if(J){let G=Z.get(J);if(G){let X=this.getDataPoints(J);G.update(X)}}}cleanup(){if(this.escapeHandler)document.removeEventListener("keydown",this.escapeHandler),this.escapeHandler=null;this.maximizedPropertyId=null,this.containerEl.classList.remove("lt-container--has-maximized")}}function A2($,Q,J){let Z=J("granularity")??"daily",q=J("showEmptyValues")??!0,G=J("embeddedHeight")??z2,X={granularity:Z,showEmptyValues:q,embeddedHeight:G},K=Q.scale;switch($){case"heatmap":{let Y=J("heatmapColorScheme")??"green",U=b9[Y]??b9.green;return{...X,colorScheme:U,cellSize:J("heatmapCellSize")??Z$,cellGap:2,showMonthLabels:J("heatmapShowMonthLabels")??!0,showDayLabels:J("heatmapShowDayLabels")??!0,scale:K}}case"line-chart":case"bar-chart":case"area-chart":case"pie-chart":case"doughnut-chart":case"radar-chart":case"polar-area-chart":case"scatter-chart":case"bubble-chart":return{...X,chartType:HU($),showLegend:J("chartShowLegend")??!1,showGrid:J("chartShowGrid")??!0,tension:0.3,scale:K};case"tag-cloud":return{...X,minFontSize:12,maxFontSize:32,sortBy:J("tagCloudSortBy")??"frequency",maxTags:J("tagCloudMaxTags")??50};default:return X}}function HU($){switch($){case"line-chart":case"area-chart":return"line";case"bar-chart":return"bar";case"pie-chart":return"pie";case"doughnut-chart":return"doughnut";case"radar-chart":return"radar";case"polar-area-chart":return"polarArea";case"scatter-chart":return"scatter";case"bubble-chart":return"bubble";default:return"line"}}var K$="life-tracker";class Y$ extends S2.BasesView{type=K$;plugin;containerEl;gridEl=null;dateAnchorService;aggregationService;columnConfigService;maximizeService;visualizations=new Map;gridSettings={...J$};isUpdatingGridSettings=!1;unsubscribeSettings=null;constructor($,Q,J){super($);this.plugin=J,this.containerEl=Q.createDiv({cls:"lt-container"}),this.dateAnchorService=new A4,this.aggregationService=new c0,this.columnConfigService=new G$(J,(Z)=>this.config.get(Z),(Z,q)=>this.config.set(Z,q)),this.maximizeService=new X$(this.containerEl,()=>this.gridEl,()=>this.visualizations,(Z)=>this.getDataPointsForProperty(Z)),this.unsubscribeSettings=this.plugin.onSettingsChange(()=>{m("Global settings changed, refreshing view","debug"),this.onDataUpdated()}),this.plugin.setActiveFileProvider(this),m("LifeTrackerView created","debug")}getFiles(){return this.data.data.map(($)=>$.file)}getFilterMode(){return Y1}getDataPointsForProperty($){let Q=this.data.data,J=this.dateAnchorService.resolveAllAnchors(Q);return this.aggregationService.createDataPoints(Q,$,J)}onDataUpdated(){if(this.isUpdatingGridSettings){m("onDataUpdated skipped (grid settings update only)","debug");return}m("onDataUpdated called","debug"),this.maximizeService.cleanup(),this.destroyVisualizations(),this.containerEl.empty();let $=this.data.data,Q=this.config.getOrder();if($.length===0){$$(this.containerEl,Q$.noData,"\uD83D\uDCCA");return}if(Q.length===0){$$(this.containerEl,Q$.noProperties,"");return}let J=this.config.get("gridColumns"),Z=this.config.get("cardMinHeight");this.gridSettings.columns=J??q$,this.gridSettings.cardMinHeight=Z??J$.cardMinHeight,O2(this.containerEl,this.gridSettings,(G)=>{this.gridSettings=G,this.isUpdatingGridSettings=!0,this.config.set("gridColumns",G.columns),this.config.set("cardMinHeight",G.cardMinHeight),this.isUpdatingGridSettings=!1,this.applyGridSettings()}),this.gridEl=this.containerEl.createDiv({cls:"lt-grid"}),this.applyGridSettings();let q=this.dateAnchorService.resolveAllAnchors($);for(let G of Q){if(G.startsWith("file."))continue;let X=this.config.getDisplayName(G),K=this.columnConfigService.getEffectiveConfig(G,X);if(K){let Y=this.aggregationService.createDataPoints($,G,q);this.renderConfiguredColumn(K.config,X,Y,K.isFromPreset)}else this.renderUnconfiguredColumn(G,X)}}renderConfiguredColumn($,Q,J,Z=!1){if(!this.gridEl)return;let q=this.gridEl.createDiv({cls:"lt-card",attr:{[P1.PROPERTY_ID]:$.propertyId}});this.setupCardEventHandlers(q,$,Q,Z);let G=this.createVisualization(q,$,Q);G.setMaximizeCallback((X,K)=>{this.maximizeService.handleMaximizeToggle(X,K)}),G.setAnimationDuration(this.plugin.settings.animationDuration),G.render(J),this.visualizations.set($.propertyId,G)}setupCardEventHandlers($,Q,J,Z){$.addEventListener("contextmenu",(X)=>{X.preventDefault(),this.handleCardContextMenu(X,Q,J,Z)});let q=null,G=null;$.addEventListener("touchstart",(X)=>{let K=X.touches[0];if(K)G={x:K.clientX,y:K.clientY},q=setTimeout(()=>{X.preventDefault(),this.handleCardContextMenu(X,Q,J,Z)},500)}),$.addEventListener("touchmove",(X)=>{if(q&&G){let K=X.touches[0];if(K){let Y=Math.abs(K.clientX-G.x),U=Math.abs(K.clientY-G.y);if(Y>10||U>10)clearTimeout(q),q=null}}}),$.addEventListener("touchend",()=>{if(q)clearTimeout(q),q=null;G=null}),$.addEventListener("touchcancel",()=>{if(q)clearTimeout(q),q=null;G=null})}createVisualization($,Q,J){let Z=A2(Q.visualizationType,Q,(q)=>this.config.get(q));switch(Q.visualizationType){case"heatmap":return new W8($,this.app,Q.propertyId,J,Z);case"line-chart":case"bar-chart":case"area-chart":case"pie-chart":case"doughnut-chart":case"radar-chart":case"polar-area-chart":case"scatter-chart":case"bubble-chart":return new a7($,this.app,Q.propertyId,J,Z);case"tag-cloud":return new t7($,this.app,Q.propertyId,J,Z);case"timeline":return new e7($,this.app,Q.propertyId,J,Z);default:return new W8($,this.app,Q.propertyId,J,Z)}}handleCardContextMenu($,Q,J,Z){let q=this.maximizeService.isMaximized(Q.propertyId);C2($,Q.visualizationType,Q.scale,Z,q,(G)=>{this.handleCardMenuAction(G,Q,J,Z)})}handleCardMenuAction($,Q,J,Z){switch($.type){case"changeVisualization":if(Z)this.columnConfigService.saveColumnConfig(Q.propertyId,$.visualizationType,J,void 0);else this.columnConfigService.updateColumnConfig(Q.propertyId,{visualizationType:$.visualizationType,scale:void 0});this.onDataUpdated();break;case"configureScale":if(Z)this.columnConfigService.saveColumnConfig(Q.propertyId,Q.visualizationType,J,$.scale);else this.columnConfigService.updateColumnConfig(Q.propertyId,{scale:$.scale});this.onDataUpdated();break;case"resetConfig":this.columnConfigService.deleteColumnConfig(Q.propertyId),this.onDataUpdated();break;case"toggleMaximize":{let q=this.maximizeService.isMaximized(Q.propertyId);this.maximizeService.handleMaximizeToggle(Q.propertyId,!q);break}}}renderUnconfiguredColumn($,Q){if(!this.gridEl)return;P2(this.gridEl,Q,(J)=>{this.columnConfigService.saveColumnConfig($,J.visualizationType,Q,J.scale),this.onDataUpdated()})}applyGridSettings(){if(!this.gridEl)return;let{columns:$,cardMinHeight:Q}=this.gridSettings;this.gridEl.style.setProperty("--lt-grid-columns",String($)),this.gridEl.style.setProperty("--lt-card-min-height",`${Q}px`)}destroyVisualizations(){for(let $ of this.visualizations.values())$.destroy();this.visualizations.clear()}onunload(){if(m("LifeTrackerView unloading","debug"),this.plugin.setActiveFileProvider(null),this.unsubscribeSettings)this.unsubscribeSettings(),this.unsubscribeSettings=null;this.maximizeService.cleanup(),this.destroyVisualizations()}}var G1=require("obsidian");class E9{app;constructor($){this.app=$}read($){return this.app.metadataCache.getFileCache($)?.frontmatter??{}}readDefinedProperties($,Q){let J=this.read($),Z={};for(let q of Q){let G=this.findFrontmatterKey(J,q.name);if(G)Z[q.name]=J[G];else Z[q.name]=void 0}return Z}async write($,Q){await this.app.fileManager.processFrontMatter($,(J)=>{for(let[Z,q]of Object.entries(Q))if(q===null||q===void 0||q==="")delete J[Z];else J[Z]=q})}validate($,Q){if(Q.required&&($===null||$===void 0||$===""))return{valid:!1,error:"This field is required"};if($===null||$===void 0||$==="")return{valid:!0};switch(Q.type){case"text":return this.validateText($,Q);case"number":return this.validateNumber($,Q);case"checkbox":return this.validateBoolean($);case"date":return this.validateDate($);case"datetime":return this.validateDatetime($);case"list":return this.validateList($,Q);case"tags":return this.validateTags($,Q);default:return{valid:!0}}}hasIssues($,Q){return this.getIssues($,Q).length>0}getIssues($,Q){let J=[];for(let Z of Q){let q=this.findFrontmatterKey($,Z.name),G=q?$[q]:void 0;if(Z.required&&(G===null||G===void 0||G==="")){J.push({propertyName:Z.name,type:"missing",message:`Required property "${Z.displayName||Z.name}" is missing`});continue}if(G===null||G===void 0||G==="")continue;let X=this.validate(G,Z);if(!X.valid)J.push({propertyName:Z.name,type:"invalid",message:X.error??`Invalid value for "${Z.displayName||Z.name}"`})}return J}findFrontmatterKey($,Q){let J=Q.toLowerCase();return Object.keys($).find((Z)=>Z.toLowerCase()===J)}validateText($,Q){let J=String($);if(Q.allowedValues.length>0){let Z=J.toLowerCase();if(!Q.allowedValues.some((G)=>String(G).toLowerCase()===Z))return{valid:!1,error:`Value must be one of: ${Q.allowedValues.join(", ")}`}}return{valid:!0}}validateNumber($,Q){let J=typeof $==="number"?$:parseFloat(String($));if(isNaN(J))return{valid:!1,error:"Value must be a number"};let Z=Q.numberRange;if(Z){if(J<Z.min)return{valid:!1,error:`Value must be at least ${Z.min}`};if(J>Z.max)return{valid:!1,error:`Value must be at most ${Z.max}`}}return{valid:!0}}validateBoolean($){if(typeof $==="boolean")return{valid:!0};let Q=String($).toLowerCase();if(["true","false","yes","no","1","0"].includes(Q))return{valid:!0};return{valid:!1,error:"Value must be true or false"}}validateDate($){let Q=String($);if(!/^\d{4}-\d{2}-\d{2}$/.test(Q))return{valid:!1,error:"Date must be in YYYY-MM-DD format"};let Z=new Date(Q);if(isNaN(Z.getTime()))return{valid:!1,error:"Invalid date"};return{valid:!0}}validateDatetime($){let Q=String($),J=new Date(Q);if(isNaN(J.getTime()))return{valid:!1,error:"Invalid datetime"};return{valid:!0}}validateList($,Q){let J;if(Array.isArray($))J=$.map(String);else J=String($).split(",").map((Z)=>Z.trim()).filter(Boolean);if(Q.allowedValues.length>0){let Z=Q.allowedValues.map((q)=>String(q).toLowerCase());for(let q of J)if(!Z.includes(q.toLowerCase()))return{valid:!1,error:`"${q}" is not an allowed value. Allowed: ${Q.allowedValues.join(", ")}`}}return{valid:!0}}validateTags($,Q){let J;if(Array.isArray($))J=$.map(String);else J=String($).split(/[,\s]+/).filter(Boolean);for(let Z of J)if(!Z.startsWith("#")&&!Z.match(/^[a-zA-Z0-9_-]+$/))return{valid:!1,error:`Invalid tag format: "${Z}"`};if(Q.allowedValues.length>0){let Z=Q.allowedValues.map((q)=>String(q).toLowerCase().replace(/^#/,""));for(let q of J){let G=q.toLowerCase().replace(/^#/,"");if(!Z.includes(G))return{valid:!1,error:`"${q}" is not an allowed tag. Allowed: ${Q.allowedValues.join(", ")}`}}}return{valid:!0}}}var k2=require("obsidian");class D9{app;cache;constructor($){this.app=$;this.cache=new Map}getApplicableProperties($,Q){let J=this.getCacheKey($.path,Q),Z=this.cache.get(J);if(Z)return Z;let q=this.app.metadataCache.getFileCache($),G=Q.filter((X)=>this.propertyApplies($,q,X));return this.cache.set(J,G),G}propertyAppliesToFile($,Q){let J=this.app.metadataCache.getFileCache($);return this.propertyApplies($,J,Q)}propertyApplies($,Q,J){let Z=J.mappings.filter((q)=>q.enabled);if(Z.length===0)return!0;return Z.some((q)=>this.matchesMapping($,Q,q))}matchesMapping($,Q,J){switch(J.type){case"tag":return this.matchesTag(Q,J.value);case"folder":return this.matchesFolder($,J.value);case"regex":return this.matchesRegex($,J.value);case"formula":return!1;default:{let Z=J.type;return console.error("Unknown mapping type:",Z),!1}}}matchesTag($,Q){if(!$?.frontmatter)return!1;let J=k2.parseFrontMatterTags($.frontmatter);if(!J)return!1;let Z=Q.startsWith("#")?Q.slice(1):Q;return J.some((q)=>{return(q.startsWith("#")?q.slice(1):q).toLowerCase()===Z.toLowerCase()})}matchesFolder($,Q){let J=Q.replace(/^\/|\/$/g,""),Z=$.parent?.path||"";return Z.toLowerCase()===J.toLowerCase()||Z.toLowerCase().startsWith(J.toLowerCase()+"/")}matchesRegex($,Q){try{let J=new RegExp(Q,"i");return J.test($.path)||J.test($.basename)}catch(J){return console.error("Invalid regex pattern:",Q,J),!1}}getCacheKey($,Q){let J=Q.map((Z)=>`${Z.id}:${Z.mappings.length}:${Z.mappings.filter((q)=>q.enabled).length}`).join("|");return`${$}:${J}`}clearCache($){if($){for(let Q of this.cache.keys())if(Q.startsWith(`${$}:`))this.cache.delete(Q)}else this.cache.clear()}}class g0{config;containerEl=null;constructor($){this.config=$}destroy(){if(this.containerEl)this.containerEl.empty()}notifyChange($){this.config.onChange($)}notifyCommit(){this.config.onCommit?.()}notifyEnterKey(){this.config.onEnterKey?.()}getDisplayLabel(){return this.config.definition.displayName||this.config.definition.name}}class e8 extends g0{inputEl=null;selectEl=null;constructor($){super($)}render($){if(this.containerEl=$,$.empty(),this.config.definition.allowedValues&&this.config.definition.allowedValues.length>0)this.renderDropdown($);else this.renderInput($)}renderDropdown($){this.selectEl=$.createEl("select",{cls:this.config.compact?"lt-editor-select lt-editor-select--compact":"lt-editor-select"}),this.selectEl.createEl("option",{value:"",text:" Select "});for(let J of this.config.definition.allowedValues){let Z=String(J);this.selectEl.createEl("option",{value:Z,text:Z})}let Q=this.config.value==null?"":String(this.config.value);this.selectEl.value=Q,this.selectEl.addEventListener("change",()=>{this.notifyChange(this.selectEl?.value??"")}),this.selectEl.addEventListener("blur",()=>{this.notifyCommit()}),this.selectEl.addEventListener("keydown",(J)=>{if(J.key==="Enter")this.notifyEnterKey()})}renderInput($){this.inputEl=$.createEl("input",{cls:this.config.compact?"lt-editor-input lt-editor-input--compact":"lt-editor-input",type:"text",placeholder:this.config.definition.description??this.getDisplayLabel()}),this.inputEl.value=this.config.value==null?"":String(this.config.value),this.inputEl.addEventListener("input",()=>{this.notifyChange(this.inputEl?.value??"")}),this.inputEl.addEventListener("blur",()=>{this.notifyCommit()}),this.inputEl.addEventListener("keydown",(Q)=>{if(Q.key==="Enter")this.notifyEnterKey()})}getValue(){if(this.selectEl)return this.selectEl.value;return this.inputEl?.value??""}setValue($){let Q=$==null?"":String($);if(this.selectEl)this.selectEl.value=Q;else if(this.inputEl)this.inputEl.value=Q}focus(){if(this.selectEl)this.selectEl.focus();else if(this.inputEl)this.inputEl.focus()}validate(){let $=this.getValue();if(this.config.definition.required&&i0($))return{valid:!1,error:"This field is required"};if(i0($))return{valid:!0};return q4($,this.config.definition)}destroy(){this.inputEl=null,this.selectEl=null,super.destroy()}}class U$ extends g0{inputEl=null;sliderEl=null;cleanupInputBlocking=null;constructor($){super($)}render($){if(this.containerEl=$,$.empty(),this.config.definition.numberRange!==null&&!this.config.compact)this.renderSliderWithInput($);else this.renderInput($)}renderSliderWithInput($){let Q=$.createDiv({cls:"lt-editor-number-wrapper"}),J=this.config.definition.numberRange,Z=this.parseValue(this.config.value);this.sliderEl=Q.createEl("input",{cls:"lt-editor-slider",type:"range"}),this.sliderEl.min=String(J.min),this.sliderEl.max=String(J.max),this.sliderEl.step="1",this.sliderEl.value=Z!==null?String(Z):String(J.min),this.inputEl=Q.createEl("input",{cls:"lt-editor-input lt-editor-input--number",type:"text",attr:{inputmode:"numeric",pattern:"[0-9]*"}}),this.inputEl.value=Z!==null?String(Z):"",this.cleanupInputBlocking=a9(this.inputEl,J,(q)=>{if(this.sliderEl)this.sliderEl.value=String(q);this.notifyChange(q)}),this.sliderEl.addEventListener("input",()=>{let q=this.sliderEl?.value??"";if(this.inputEl)this.inputEl.value=q;this.notifyChange(parseFloat(q))}),this.inputEl.addEventListener("input",()=>{let q=this.inputEl?.value??"";if(this.sliderEl)this.sliderEl.value=q;this.notifyChange(q?parseFloat(q):void 0)}),this.sliderEl.addEventListener("change",()=>{this.notifyCommit()}),this.inputEl.addEventListener("blur",()=>{this.ensureValidValue(),this.notifyCommit()}),this.inputEl.addEventListener("keydown",(q)=>{if(q.key==="Enter")this.ensureValidValue(),this.notifyEnterKey()})}renderInput($){this.inputEl=$.createEl("input",{cls:this.config.compact?"lt-editor-input lt-editor-input--compact lt-editor-input--number":"lt-editor-input lt-editor-input--number",type:"text",placeholder:this.config.definition.description??this.getDisplayLabel(),attr:{inputmode:"numeric",pattern:"[0-9]*"}});let Q=this.config.definition.numberRange,J=this.parseValue(this.config.value);this.inputEl.value=J!==null?String(J):"",this.cleanupInputBlocking=a9(this.inputEl,Q,(Z)=>{this.notifyChange(Z)}),this.inputEl.addEventListener("input",()=>{let Z=this.inputEl?.value??"";this.notifyChange(Z?parseFloat(Z):void 0)}),this.inputEl.addEventListener("blur",()=>{this.ensureValidValue(),this.notifyCommit()}),this.inputEl.addEventListener("keydown",(Z)=>{if(Z.key==="Enter")this.ensureValidValue(),this.notifyEnterKey()})}ensureValidValue(){if(!this.inputEl)return;let $=this.inputEl.value.trim();if($===""||$==="-"){if($==="-")this.inputEl.value="";return}let Q=parseFloat($);if(isNaN(Q)){if(this.inputEl.value="",this.sliderEl){let q=this.config.definition.numberRange;this.sliderEl.value=String(q?.min??0)}return}let J=this.config.definition.numberRange,Z=r5(Q,J);if(Z!==null&&Z!==Q){if(this.inputEl.value=String(Z),this.sliderEl)this.sliderEl.value=String(Z);this.notifyChange(Z)}}parseValue($){if($===null||$===void 0||$==="")return null;let Q=typeof $==="number"?$:parseFloat(String($));return isNaN(Q)?null:Q}getValue(){let $=this.inputEl?.value??"";return $?parseFloat($):void 0}setValue($){let Q=this.parseValue($),J=Q!==null?String(Q):"";if(this.inputEl)this.inputEl.value=J;if(this.sliderEl)this.sliderEl.value=J}focus(){if(this.inputEl)this.inputEl.focus()}validate(){let $=this.getValue();if(this.config.definition.required&&i0($))return{valid:!1,error:"This field is required"};if(i0($))return{valid:!0};return G4($,this.config.definition)}destroy(){this.cleanupInputBlocking?.(),this.cleanupInputBlocking=null,this.inputEl=null,this.sliderEl=null,super.destroy()}}class N$ extends g0{toggleEl=null;checkboxEl=null;currentValue=!1;constructor($){super($);this.currentValue=this.parseBoolean($.value)}render($){if(this.containerEl=$,$.empty(),this.config.compact)this.renderCheckbox($);else this.renderToggle($)}renderToggle($){this.toggleEl=$.createDiv({cls:"lt-editor-toggle"}),this.updateToggleState(),this.toggleEl.addEventListener("click",()=>{this.currentValue=!this.currentValue,this.updateToggleState(),this.notifyChange(this.currentValue),this.notifyCommit()}),this.toggleEl.addEventListener("keydown",(Q)=>{if(Q.key==="Enter")Q.preventDefault(),this.currentValue=!this.currentValue,this.updateToggleState(),this.notifyChange(this.currentValue),this.notifyEnterKey();else if(Q.key===" ")Q.preventDefault(),this.currentValue=!this.currentValue,this.updateToggleState(),this.notifyChange(this.currentValue),this.notifyCommit()}),this.toggleEl.tabIndex=0}renderCheckbox($){let Q=$.createEl("label",{cls:"lt-editor-checkbox-wrapper"});this.checkboxEl=Q.createEl("input",{type:"checkbox",cls:"lt-editor-checkbox"}),this.checkboxEl.checked=this.currentValue,this.checkboxEl.addEventListener("change",()=>{this.currentValue=this.checkboxEl?.checked??!1,this.notifyChange(this.currentValue),this.notifyCommit()})}updateToggleState(){if(!this.toggleEl)return;this.toggleEl.empty(),this.toggleEl.classList.toggle("lt-editor-toggle--on",this.currentValue),this.toggleEl.createDiv({cls:"lt-editor-toggle-track"}).createDiv({cls:"lt-editor-toggle-thumb"})}parseBoolean($){if(typeof $==="boolean")return $;if($===null||$===void 0)return!1;let Q=String($).toLowerCase();return Q==="true"||Q==="yes"||Q==="1"}getValue(){return this.currentValue}setValue($){if(this.currentValue=this.parseBoolean($),this.updateToggleState(),this.checkboxEl)this.checkboxEl.checked=this.currentValue}focus(){if(this.toggleEl)this.toggleEl.focus();else if(this.checkboxEl)this.checkboxEl.focus()}validate(){return X4(this.currentValue)}destroy(){this.toggleEl=null,this.checkboxEl=null,super.destroy()}}class H$ extends g0{inputEl=null;constructor($){super($)}render($){this.containerEl=$,$.empty();let Q=this.config.definition.type==="datetime";this.inputEl=$.createEl("input",{cls:this.config.compact?"lt-editor-input lt-editor-input--compact lt-editor-input--date":"lt-editor-input lt-editor-input--date",type:Q?"datetime-local":"date"});let J=this.formatValue(this.config.value);if(J)this.inputEl.value=J;this.inputEl.addEventListener("change",()=>{this.notifyChange(this.inputEl?.value??"")}),this.inputEl.addEventListener("blur",()=>{this.notifyCommit()}),this.inputEl.addEventListener("keydown",(Z)=>{if(Z.key==="Enter")this.notifyEnterKey()})}formatValue($){if($===null||$===void 0||$==="")return"";let Q=String($),J=this.config.definition.type==="datetime";try{let Z=new Date(Q);if(!isNaN(Z.getTime()))if(J)return Z.toISOString().slice(0,16);else return Z.toISOString().slice(0,10)}catch{}return Q}getValue(){return(this.inputEl?.value??"")||void 0}setValue($){let Q=this.formatValue($);if(this.inputEl)this.inputEl.value=Q}focus(){if(this.inputEl)this.inputEl.focus()}validate(){let $=this.getValue();if(this.config.definition.required&&i0($))return{valid:!1,error:"This field is required"};if(i0($))return{valid:!0};return this.config.definition.type==="datetime"?Y4($):K4($)}destroy(){this.inputEl=null,super.destroy()}}class M$ extends g0{wrapperEl=null;inputEl=null;pillsEl=null;suggestionsEl=null;currentValues=[];constructor($){super($);this.currentValues=this.parseValues($.value)}render($){this.containerEl=$,$.empty(),this.wrapperEl=$.createDiv({cls:this.config.compact?"lt-editor-list lt-editor-list--compact":"lt-editor-list"}),this.pillsEl=this.wrapperEl.createDiv({cls:"lt-editor-list-pills"}),this.renderPills(),this.inputEl=this.wrapperEl.createEl("input",{cls:"lt-editor-list-input",type:"text",placeholder:this.hasAllowedValues()?"Select...":"Add item..."}),this.suggestionsEl=this.wrapperEl.createDiv({cls:"lt-editor-list-suggestions lt-hidden"}),this.setupEventHandlers()}setupEventHandlers(){if(!this.inputEl)return;this.inputEl.addEventListener("focus",()=>{this.showSuggestions()}),this.inputEl.addEventListener("blur",()=>{setTimeout(()=>{this.hideSuggestions(),this.notifyCommit()},150)}),this.inputEl.addEventListener("input",()=>{this.showSuggestions()}),this.inputEl.addEventListener("keydown",($)=>{if($.key==="Enter")if($.preventDefault(),!this.inputEl?.value.trim())this.notifyEnterKey();else this.addCurrentInput();else if($.key==="Backspace"&&this.inputEl?.value===""){if(this.currentValues.length>0)this.currentValues.pop(),this.renderPills(),this.notifyChange(this.getValue())}else if($.key==="Escape")this.hideSuggestions()}),this.inputEl.addEventListener("paste",($)=>{let Q=$.clipboardData?.getData("text")??"";if(!Q)return;$.preventDefault();let J=Q.split(/[,\n\r]+/).map((Z)=>Z.trim()).filter(Boolean);for(let Z of J)this.addValue(Z)})}renderPills(){if(!this.pillsEl)return;this.pillsEl.empty();for(let $ of this.currentValues){let Q=this.pillsEl.createDiv({cls:"lt-editor-list-pill"}),Z=this.config.definition.type==="tags"&&!$.startsWith("#")?`#${$}`:$;Q.createSpan({cls:"lt-editor-list-pill-text",text:Z}),Q.createSpan({cls:"lt-editor-list-pill-remove",text:""}).addEventListener("click",(G)=>{G.stopPropagation(),this.removeValue($)})}}showSuggestions(){if(!this.suggestionsEl||!this.inputEl)return;let $=this.config.definition.allowedValues;if($.length===0){this.hideSuggestions();return}let Q=this.inputEl.value.toLowerCase(),J=$.map((Z)=>String(Z)).filter((Z)=>{let q=Z.toLowerCase().replace(/^#/,""),G=Q.replace(/^#/,""),X=this.currentValues.some((Y)=>Y.toLowerCase().replace(/^#/,"")===q),K=G===""||q.includes(G);return!X&&K});if(J.length===0){this.hideSuggestions();return}this.suggestionsEl.empty(),this.suggestionsEl.removeClass("lt-hidden");for(let Z of J)this.suggestionsEl.createDiv({cls:"lt-editor-list-suggestion",text:Z}).addEventListener("mousedown",(G)=>{G.preventDefault(),this.addValue(Z)})}hideSuggestions(){if(this.suggestionsEl)this.suggestionsEl.addClass("lt-hidden")}addCurrentInput(){if(!this.inputEl)return;let $=this.inputEl.value.trim();if($)this.addValue($)}addValue($){let Q=$.trim();if(this.config.definition.type==="tags")Q=Q.replace(/^#/,"");let J=this.config.definition.allowedValues;if(J.length>0){if(!(this.config.definition.type==="tags"?Z4(Q,J):J4(Q,J))){if(this.inputEl)this.inputEl.value="";this.hideSuggestions();return}}if(!this.currentValues.some((q)=>q.toLowerCase()===Q.toLowerCase())&&Q)this.currentValues.push(Q),this.renderPills(),this.notifyChange(this.getValue());if(this.inputEl)this.inputEl.value="";this.hideSuggestions()}removeValue($){this.currentValues=this.currentValues.filter((Q)=>Q.toLowerCase()!==$.toLowerCase()),this.renderPills(),this.notifyChange(this.getValue())}parseValues($){if(this.config.definition.type==="tags")return e9($).map((Q)=>Q.replace(/^#/,""));return t9($)}hasAllowedValues(){return this.config.definition.allowedValues.length>0}getValue(){if(this.config.definition.type==="tags")return this.currentValues.map(($)=>$.startsWith("#")?$:`#${$}`);return this.currentValues}setValue($){this.currentValues=this.parseValues($),this.renderPills()}focus(){if(this.inputEl)this.inputEl.focus()}validate(){if(this.config.definition.required&&this.currentValues.length===0)return{valid:!1,error:"At least one value is required"};if(this.currentValues.length===0)return{valid:!0};if(this.config.definition.type==="tags")return N4(this.getValue(),this.config.definition);return U4(this.getValue(),this.config.definition)}destroy(){this.wrapperEl=null,this.inputEl=null,this.pillsEl=null,this.suggestionsEl=null,super.destroy()}}function $6($){switch($.definition.type){case"text":return new e8($);case"number":return new U$($);case"checkbox":return new N$($);case"date":case"datetime":return new H$($);case"list":case"tags":return new M$($);default:return new e8($)}}var B$="life-tracker-grid";class q1 extends G1.BasesView{type=B$;plugin;containerEl;scrollEl;tableWrapperEl=null;tableEl=null;theadEl=null;tbodyEl=null;spacerTopEl=null;spacerBottomEl=null;fixedHeaderWrapperEl=null;fixedHeaderTableEl=null;isFixedHeaderVisible=!1;frontmatterService;recognitionService;editors=new Map;originalValues=new Map;currentValues=new Map;activeDefinitions=[];baseSelectedProperties=[];saveTimers=new Map;unsubscribeSettings=null;filteredEntries=[];visibleStartIndex=0;visibleEndIndex=0;renderedRowIndices=new Set;rowElements=new Map;scrollHandler=null;resizeObserver=null;static AUTO_SAVE_DEBOUNCE_MS=500;static ROW_HEIGHT=32;static BUFFER_ROWS=5;constructor($,Q,J){super($);this.plugin=J,this.scrollEl=Q,this.containerEl=Q.createDiv({cls:"lt-grid-view-container"}),this.frontmatterService=new E9(J.app),this.recognitionService=new D9(J.app),this.unsubscribeSettings=this.plugin.onSettingsChange(()=>{m("Settings changed, refreshing grid view","debug"),this.onDataUpdated()}),this.plugin.setActiveFileProvider(this),m("GridView created","debug")}getFiles(){return this.filteredEntries.map(($)=>$.file)}getFilterMode(){return this.config.get("hideNotesWhen")??"required"}extractValue($){if(!$||$ instanceof G1.NullValue)return;if($ instanceof G1.BooleanValue)return $.isTruthy();if($ instanceof G1.NumberValue)return parseFloat($.toString());if($ instanceof G1.ListValue){let Q=[];for(let J=0;J<$.length();J++){let Z=$.get(J);if(Z)Q.push(Z.toString())}return Q}return $.toString()}getEntryValues($,Q){let J={};for(let Z of Q){let q=`note.${Z.name}`,G=$.getValue(q);J[Z.name]=this.extractValue(G)}return J}getBaseSelectedProperties($){let Q=this.config.getOrder(),J=[];for(let Z of Q)if(Z.startsWith("note.")){let q=Z.slice(5);if(![...$].some((X)=>X.toLowerCase()===q.toLowerCase()))J.push(q)}return J}getBasePropertyValues($,Q){let J={};for(let Z of Q){let q=`note.${Z}`,G=$.getValue(q);J[Z]=this.extractValue(G)}return J}sortDefinitions($){return[...$].sort((Q,J)=>{if(Q.required&&!J.required)return-1;if(!Q.required&&J.required)return 1;let Z=(Q.displayName||Q.name).toLowerCase(),q=(J.displayName||J.name).toLowerCase();return Z.localeCompare(q)})}onDataUpdated(){m("GridView onDataUpdated","debug"),this.destroyEditors(),this.clearAllTimers(),this.cleanupVirtualScrolling(),this.containerEl.empty(),this.originalValues.clear(),this.currentValues.clear(),this.filteredEntries=[],this.rowElements.clear(),this.renderedRowIndices.clear(),this.visibleStartIndex=-1,this.visibleEndIndex=-1;let $=this.data.data,Q=this.plugin.settings.propertyDefinitions;if(Q.length===0){this.renderEmptyState("No property definitions configured. Add them in plugin settings.");return}if($.length===0){this.renderEmptyState("No notes found in this Base.");return}this.activeDefinitions=this.sortDefinitions(Q);let J=new Set(Q.map((G)=>G.name));this.baseSelectedProperties=this.getBaseSelectedProperties(J);let Z=this.config.get("hideNotesWhen")??"required",q=this.activeDefinitions.filter((G)=>G.required);for(let G of $){let X=G.file,K=this.getEntryValues(G,this.activeDefinitions);this.originalValues.set(X.path,{...K}),this.currentValues.set(X.path,{...K});let Y=!0;if(Z==="required"&&q.length>0)Y=!q.every((N)=>{let H=K[N.name];return H!==void 0&&H!==null&&H!==""});else if(Z==="all")Y=!this.activeDefinitions.every((N)=>{let H=K[N.name];return H!==void 0&&H!==null&&H!==""});if(Y)this.filteredEntries.push(G)}if(this.filteredEntries.length===0){let G=Z==="all"?"All notes have all properties filled.":"All notes have their required properties filled.";this.renderEmptyState(G);return}this.render()}render(){this.fixedHeaderWrapperEl=this.containerEl.createDiv({cls:"lt-grid-view-fixed-header-wrapper lt-hidden"}),this.tableWrapperEl=this.containerEl.createDiv({cls:"lt-grid-view-table-wrapper"}),this.tableEl=this.tableWrapperEl.createEl("table",{cls:"lt-grid-view-table"}),this.renderHeader(),this.tbodyEl=this.tableEl.createEl("tbody",{cls:"lt-grid-view-tbody"}),this.spacerTopEl=this.tbodyEl.createEl("tr",{cls:"lt-grid-view-spacer"});let $=this.spacerTopEl.createEl("td");$.colSpan=1+this.baseSelectedProperties.length+this.activeDefinitions.length,this.spacerBottomEl=this.tbodyEl.createEl("tr",{cls:"lt-grid-view-spacer"});let Q=this.spacerBottomEl.createEl("td");Q.colSpan=1+this.baseSelectedProperties.length+this.activeDefinitions.length,this.setupVirtualScrolling(),this.updateVisibleRows()}setupVirtualScrolling(){let $=this.scrollEl,Q=!1;if(this.scrollHandler=()=>{if(!Q)requestAnimationFrame(()=>{this.updateVisibleRows(),this.updateFixedHeader(),Q=!1}),Q=!0},$.addEventListener("scroll",this.scrollHandler,{passive:!0}),this.tableWrapperEl)this.tableWrapperEl.addEventListener("scroll",()=>{this.syncFixedHeaderScroll()},{passive:!0});this.resizeObserver=new ResizeObserver(()=>{this.updateVisibleRows(),this.updateFixedHeader()}),this.resizeObserver.observe($),this.createFixedHeader()}createFixedHeader(){if(!this.fixedHeaderWrapperEl||!this.theadEl)return;this.fixedHeaderTableEl=this.fixedHeaderWrapperEl.createEl("table",{cls:"lt-grid-view-table lt-grid-view-table--fixed"});let $=this.theadEl.cloneNode(!0);this.fixedHeaderTableEl.appendChild($)}updateFixedHeader(){if(!this.fixedHeaderWrapperEl||!this.theadEl||!this.tableWrapperEl)return;let $=this.scrollEl,Q=this.containerEl.getBoundingClientRect(),J=this.theadEl.getBoundingClientRect(),Z=$.getBoundingClientRect(),q=J.bottom<Z.top;if(q!==this.isFixedHeaderVisible)this.isFixedHeaderVisible=q,this.fixedHeaderWrapperEl.toggleClass("lt-hidden",!q);if(q){let G=Z.top-Q.top;this.fixedHeaderWrapperEl.style.top=`${G}px`,this.syncFixedHeaderScroll()}}syncFixedHeaderScroll(){if(!this.fixedHeaderWrapperEl||!this.tableWrapperEl)return;this.fixedHeaderWrapperEl.scrollLeft=this.tableWrapperEl.scrollLeft,this.fixedHeaderWrapperEl.style.width=`${this.tableWrapperEl.clientWidth}px`}cleanupVirtualScrolling(){if(this.scrollHandler)this.scrollEl.removeEventListener("scroll",this.scrollHandler),this.scrollHandler=null;if(this.resizeObserver)this.resizeObserver.disconnect(),this.resizeObserver=null;this.fixedHeaderWrapperEl=null,this.fixedHeaderTableEl=null,this.theadEl=null,this.isFixedHeaderVisible=!1}updateVisibleRows(){if(!this.tbodyEl||!this.spacerTopEl||!this.spacerBottomEl)return;let $=this.filteredEntries.length;if($===0)return;let{ROW_HEIGHT:Q,BUFFER_ROWS:J}=q1,Z=this.scrollEl,q=Z.scrollTop,G=Z.clientHeight,X=32,K=this.containerEl.offsetTop,Y=Math.max(0,q-K-X),U=Math.max(0,Math.floor(Y/Q)-J),N=Math.ceil(G/Q)+J*2,H=Math.min($-1,U+N);if(U===this.visibleStartIndex&&H===this.visibleEndIndex)return;this.visibleStartIndex=U,this.visibleEndIndex=H;let M=U*Q,B=Math.max(0,($-H-1)*Q),j=this.spacerTopEl.querySelector("td"),L=this.spacerBottomEl.querySelector("td");if(j)j.style.height=`${M}px`;if(L)L.style.height=`${B}px`;let W=new Set;for(let V=U;V<=H;V++)W.add(V);for(let V of this.renderedRowIndices)if(!W.has(V)){let _=this.rowElements.get(V);if(_)this.destroyRowEditors(V),_.remove(),this.rowElements.delete(V)}for(let V=U;V<=H;V++)if(!this.renderedRowIndices.has(V)){let _=this.filteredEntries[V];if(_)this.renderRowAtIndex(V,_)}this.renderedRowIndices=W,this.reorderRows()}reorderRows(){if(!this.tbodyEl||!this.spacerBottomEl)return;let $=[...this.renderedRowIndices].sort((Q,J)=>Q-J);for(let Q of $){let J=this.rowElements.get(Q);if(J)this.tbodyEl.insertBefore(J,this.spacerBottomEl)}}renderRowAtIndex($,Q){if(!this.tbodyEl||!this.spacerBottomEl)return;let J=Q.file,Z=this.recognitionService.getApplicableProperties(J,this.activeDefinitions),q=new Set(Z.map((M)=>M.name)),G=this.originalValues.get(J.path)??{},X=this.frontmatterService.hasIssues(G,Z),K=createEl("tr",{cls:X?"lt-grid-view-tr lt-grid-view-tr--has-issues":"lt-grid-view-tr",attr:{[P1.FILE_PATH]:J.path,[P1.ROW_INDEX]:String($)}});K.createEl("td",{cls:"lt-grid-view-td lt-grid-view-td--note"}).createEl("a",{cls:"lt-grid-view-note-link",text:l5(J.basename),href:"#"}).addEventListener("click",(M)=>{M.preventDefault(),this.plugin.app.workspace.getLeaf().openFile(J)});let N=this.getBasePropertyValues(Q,this.baseSelectedProperties),H=q1.NOTE_COLUMN_WIDTH;for(let M of this.baseSelectedProperties){let B=K.createEl("td",{cls:"lt-grid-view-td lt-grid-view-td--base"});B.style.left=`${H}px`;let j=N[M];this.renderReadOnlyCell(B,j),H+=q1.BASE_COLUMN_WIDTH}for(let M of this.activeDefinitions){let B=K.createEl("td",{cls:"lt-grid-view-td"});if(!q.has(M.name)){B.addClass("lt-grid-view-td--na"),B.createSpan({cls:"lt-grid-view-na",text:""});continue}this.renderCell(B,J,M)}this.tbodyEl.insertBefore(K,this.spacerBottomEl),this.rowElements.set($,K)}destroyRowEditors($){let Q=this.filteredEntries[$];if(!Q)return;let J=Q.file.path;for(let Z of this.activeDefinitions){let q=`${J}:${Z.name}`,G=this.editors.get(q);if(G)G.destroy(),this.editors.delete(q)}}static NOTE_COLUMN_WIDTH=180;static BASE_COLUMN_WIDTH=120;renderHeader(){if(!this.tableEl)return;this.theadEl=this.tableEl.createEl("thead");let $=this.theadEl.createEl("tr");$.createEl("th",{cls:"lt-grid-view-th lt-grid-view-th--note"}).createSpan({text:"Note"});let J=q1.NOTE_COLUMN_WIDTH;for(let Z of this.baseSelectedProperties){let q=$.createEl("th",{cls:"lt-grid-view-th lt-grid-view-th--base"});q.style.left=`${J}px`,q.createDiv({cls:"lt-grid-view-th-content"}).createSpan({text:Z,cls:"lt-grid-view-th-name"}),J+=q1.BASE_COLUMN_WIDTH}for(let Z of this.activeDefinitions){let G=$.createEl("th",{cls:"lt-grid-view-th"}).createDiv({cls:"lt-grid-view-th-content"});if(G.createSpan({text:Z.displayName||Z.name,cls:"lt-grid-view-th-name"}),Z.required)G.createSpan({cls:"lt-grid-view-th-required",text:"*"})}}renderReadOnlyCell($,Q){if(Q===void 0||Q===null||Q===""){$.addClass("lt-grid-view-td--empty"),$.createSpan({cls:"lt-grid-view-empty-value",text:""});return}let J;if(Array.isArray(Q))J=Q.join(", ");else if(typeof Q==="boolean")J=Q?"":"";else J=String(Q);$.createSpan({cls:"lt-grid-view-readonly-value",text:J})}renderCell($,Q,J){let Z=`${Q.path}:${J.name}`,G=(this.currentValues.get(Q.path)??{})[J.name],X=this.frontmatterService.validate(G,J);if(!X.valid)$.addClass("lt-grid-view-td--invalid"),$.setAttribute("title",X.error??"Invalid value");let K=$6({definition:J,value:G,compact:!0,onChange:(Y)=>{let U=this.currentValues.get(Q.path)??{};U[J.name]=Y,this.currentValues.set(Q.path,U),this.debouncedSave(Q,J,Y)},onCommit:()=>{let Y=this.currentValues.get(Q.path)??{};this.savePropertyImmediate(Q,J,Y[J.name])}});K.render($),this.editors.set(Z,K)}debouncedSave($,Q,J){let Z=`${$.path}:${Q.name}`,q=this.saveTimers.get(Z);if(q)clearTimeout(q);let G=setTimeout(()=>{this.savePropertyImmediate($,Q,J),this.saveTimers.delete(Z)},q1.AUTO_SAVE_DEBOUNCE_MS);this.saveTimers.set(Z,G)}savePropertyImmediate($,Q,J){let Z=this.frontmatterService.validate(J,Q);if(!Z.valid){m(`Skipping save for ${Q.name}: ${Z.error}`,"debug");return}this.frontmatterService.write($,{[Q.name]:J}).then(()=>{m(`Saved ${Q.name} for ${$.basename}`,"debug");let q=this.originalValues.get($.path)??{};q[Q.name]=J,this.originalValues.set($.path,q)}).catch((q)=>{m("Failed to save frontmatter","error",q)})}clearAllTimers(){for(let $ of this.saveTimers.values())clearTimeout($);this.saveTimers.clear()}renderEmptyState($){this.containerEl.createDiv({cls:"lt-grid-view-empty"}).createSpan({text:$})}destroyEditors(){for(let $ of this.editors.values())$.destroy();this.editors.clear()}onunload(){if(m("GridView unloading","debug"),this.plugin.setActiveFileProvider(null),this.unsubscribeSettings)this.unsubscribeSettings(),this.unsubscribeSettings=null;this.cleanupVirtualScrolling(),this.clearAllTimers(),this.destroyEditors()}}function b2(){return[{type:"group",displayName:"Filtering",items:[{type:"dropdown",key:"hideNotesWhen",displayName:"Hide notes when",default:Y1,options:X5}]}]}var j$=require("obsidian");var h5=require("obsidian"),Q6=i2(v2(),1);var MU=500;class W$ extends h5.Modal{plugin;context;frontmatterService;recognitionService;sortedDefinitions=[];currentPropertyIndex=0;savedValues={};currentValue=void 0;currentEditor=null;currentFileIndex=0;filterMode=Y1;filledProperties=new Set;saveDebounceTimer=null;wrapperEl=null;fileNavEl=null;progressEl=null;cardEl=null;constructor($,Q){super($.app);this.plugin=$,this.context=Q,this.currentFileIndex=Q.currentIndex??0,this.filterMode=Q.filterMode??Y1,this.frontmatterService=new E9($.app),this.recognitionService=new D9($.app)}async onOpen(){let{contentEl:$}=this;if($.empty(),$.addClass("lt-carousel-modal"),await this.loadProperties(),this.sortedDefinitions.length===0){this.renderEmptyState();return}this.render()}onClose(){if(this.saveDebounceTimer)clearTimeout(this.saveDebounceTimer),this.saveCurrentPropertyImmediate();this.destroyEditor(),this.contentEl.empty()}async loadProperties(){let $=this.getCurrentFile();if(!$)return;let Q=this.plugin.settings.propertyDefinitions,J=this.recognitionService.getApplicableProperties($,Q);this.sortedDefinitions=[...J].sort((q,G)=>{if(q.required&&!G.required)return-1;if(!q.required&&G.required)return 1;let X=(q.displayName||q.name).toLowerCase(),K=(G.displayName||G.name).toLowerCase();return X.localeCompare(K)}),this.savedValues=this.frontmatterService.readDefinedProperties($,this.sortedDefinitions),this.filledProperties.clear();for(let q of this.sortedDefinitions){let G=this.savedValues[q.name];if(G!==void 0&&G!==null&&G!=="")this.filledProperties.add(q.name)}this.currentPropertyIndex=0;let Z=this.sortedDefinitions[0];this.currentValue=Z?this.savedValues[Z.name]:void 0}getCurrentFile(){if(this.context.mode==="single-note")return this.context.file;if(this.context.mode==="batch"&&this.context.files)return this.context.files[this.currentFileIndex];return}getTotalFiles(){if(this.context.mode==="batch"&&this.context.files)return this.context.files.length;return 1}isFirstFile(){return this.currentFileIndex===0}isLastFile(){if(this.context.mode==="batch"&&this.context.files)return this.currentFileIndex>=this.context.files.length-1;return!0}isFileComplete($){if(this.context.mode!=="batch"||!this.context.files)return!1;if(this.filterMode==="never")return!1;let Q=this.context.files[$];if(!Q)return!1;let J=this.plugin.settings.propertyDefinitions,Z=this.recognitionService.getApplicableProperties(Q,J);if(Z.length===0)return!1;let q=this.frontmatterService.read(Q);if(this.filterMode==="required"){let G=Z.filter((X)=>X.required);if(G.length===0)return!1;return G.every((X)=>{let K=q[X.name];return K!==void 0&&K!==null&&K!==""})}else if(this.filterMode==="all")return Z.every((G)=>{let X=q[G.name];return X!==void 0&&X!==null&&X!==""});return!1}findNextIncompleteFile($,Q){let J=this.getTotalFiles(),Z=$,q=0;while(q<J){if(!this.isFileComplete(Z))return Z;Z=Q===1?(Z+1)%J:(Z-1+J)%J,q++}return-1}getCurrentDefinition(){return this.sortedDefinitions[this.currentPropertyIndex]}isFirstProperty(){return this.currentPropertyIndex===0}isLastProperty(){return this.currentPropertyIndex===this.sortedDefinitions.length-1}render(){let{contentEl:$}=this;if($.empty(),this.wrapperEl=$.createDiv({cls:"lt-carousel-container"}),this.context.mode==="batch")this.fileNavEl=this.wrapperEl.createDiv({cls:"lt-carousel-file-nav"}),this.renderFileNav();let Q=this.getCurrentFile(),J=Q?l5(Q.basename):"Unknown";this.wrapperEl.createDiv({cls:"lt-carousel-file-name",text:J}),this.cardEl=this.wrapperEl.createDiv({cls:"lt-carousel-card"}),this.renderCard(),this.progressEl=this.wrapperEl.createDiv({cls:"lt-carousel-progress"}),this.renderProgress()}renderFileNav(){if(!this.fileNavEl)return;this.fileNavEl.empty();let $=this.fileNavEl.createDiv({cls:"lt-carousel-file-nav-row"}),Q=$.createEl("button",{cls:"lt-carousel-file-nav-btn",attr:{"aria-label":"Previous file"}});Q.innerHTML='<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>',Q.addEventListener("click",()=>this.navigatePrevFile());let J=$.createDiv({cls:"lt-carousel-file-counter"});if(this.filterMode!=="never"){let X=this.countIncompleteFiles(),K=this.getPositionAmongIncomplete();J.createSpan({cls:"lt-carousel-file-position",text:`(${K}/${X})`}),J.createSpan({cls:"lt-carousel-file-remaining",text:`${X} remaining`})}else J.createSpan({cls:"lt-carousel-file-position",text:`(${this.currentFileIndex+1}/${this.getTotalFiles()})`});let Z=$.createEl("button",{cls:"lt-carousel-file-nav-btn",attr:{"aria-label":"Next file"}});Z.innerHTML='<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>',Z.addEventListener("click",()=>this.navigateNextFile());let q=this.fileNavEl.createDiv({cls:"lt-carousel-filter-row"});q.createSpan({cls:"lt-carousel-filter-label",text:"Skip notes when:"});let G=q.createEl("select",{cls:"lt-carousel-filter-select dropdown"});for(let[X,K]of Object.entries(X5)){let Y=G.createEl("option",{value:X,text:K});if(X===this.filterMode)Y.selected=!0}G.addEventListener("change",()=>{this.filterMode=G.value,this.handleFilterModeChange()})}countIncompleteFiles(){let $=this.getTotalFiles(),Q=0;for(let J=0;J<$;J++)if(!this.isFileComplete(J))Q++;return Q}getPositionAmongIncomplete(){let $=0;for(let Q=0;Q<=this.currentFileIndex;Q++)if(!this.isFileComplete(Q))$++;return $}async handleFilterModeChange(){if(this.countIncompleteFiles()===0){this.handleAllFilesComplete();return}let Q=this.findNextIncompleteFile(0,1);if(Q!==-1){if(this.currentFileIndex=Q,await this.loadProperties(),this.sortedDefinitions.length===0){this.renderEmptyState();return}this.render()}}renderCard(){if(!this.cardEl)return;this.cardEl.empty(),this.destroyEditor();let $=this.getCurrentDefinition();if(!$)return;let Q=this.cardEl.createDiv({cls:"lt-carousel-nav"}),J=Q.createEl("button",{cls:"lt-carousel-nav-btn",attr:{"aria-label":"Previous property"}});J.innerHTML='<svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>',J.disabled=this.isFirstProperty(),J.addEventListener("click",()=>this.navigatePrev()),Q.createSpan({cls:"lt-carousel-counter",text:`${this.currentPropertyIndex+1} / ${this.sortedDefinitions.length}`});let Z=this.isLastProperty(),q=this.context.mode==="batch",G=Q.createEl("button",{cls:Z?"lt-carousel-nav-btn lt-carousel-nav-btn--done":"lt-carousel-nav-btn",attr:{"aria-label":Z?q?"Next file":"Done":"Next property"}});if(Z)if(q)G.innerHTML='<svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"/></svg>',G.addEventListener("click",()=>this.handleNextFile());else G.innerHTML='<svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>',G.addEventListener("click",()=>this.handleDone());else G.innerHTML='<svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>',G.addEventListener("click",()=>this.navigateNext());let X=this.cardEl.createDiv({cls:"lt-carousel-label"});if(X.createSpan({cls:"lt-carousel-property-name",text:$.displayName||$.name}),$.required)X.createSpan({cls:"lt-carousel-required-badge",text:"Required"});else X.createSpan({cls:"lt-carousel-optional-badge",text:"Optional"});if($.description)this.cardEl.createDiv({cls:"lt-carousel-description",text:$.description});let K=this.cardEl.createDiv({cls:"lt-carousel-editor"}),Y=this.currentValue??this.savedValues[$.name];this.currentEditor=$6({definition:$,value:Y,onChange:(U)=>{this.currentValue=U,this.debouncedSave()},onCommit:()=>{this.saveCurrentPropertyImmediate()},onEnterKey:()=>{this.validateAndNavigateNext()}}),this.currentEditor.render(K),setTimeout(()=>{this.currentEditor?.focus()},50)}renderProgress(){if(!this.progressEl)return;this.progressEl.empty();let $=this.sortedDefinitions.length,Q=this.filledProperties.size,J=$>0?Math.round(Q/$*100):0,q=this.progressEl.createDiv({cls:"lt-carousel-progress-bar"}).createDiv({cls:"lt-carousel-progress-fill"});q.style.width=`${J}%`;let G=this.getProgressEmoji(J);this.progressEl.createDiv({cls:"lt-carousel-progress-text",text:`${Q}/${$} (${J}% done! ${G})`})}getProgressEmoji($){if($===0)return"\uD83D\uDE31";if($<=20)return"\uD83D\uDE28";if($<=40)return"\uD83D\uDE2D";if($<=60)return"\uD83E\uDD79";if($<=80)return"\uD83E\uDD73";return"\uD83C\uDF89"}renderEmptyState(){let{contentEl:$}=this;$.empty();let Q=this.getCurrentFile(),J=this.plugin.settings.propertyDefinitions,Z=$.createDiv({cls:"lt-carousel-empty"});if(J.length===0)Z.createDiv({cls:"lt-carousel-empty-icon",text:"\uD83D\uDCDD"}),Z.createDiv({cls:"lt-carousel-empty-title",text:"No Property Definitions"}),Z.createDiv({cls:"lt-carousel-empty-text",text:"Add property definitions in Settings  Life Tracker  Property Definitions."});else Z.createDiv({cls:"lt-carousel-empty-icon",text:"\uD83D\uDD0D"}),Z.createDiv({cls:"lt-carousel-empty-title",text:"No Matching Properties"}),Z.createDiv({cls:"lt-carousel-empty-text",text:`No property definitions apply to "${Q?.basename??"this note"}". Check your note filtering settings.`});if(this.context.mode==="batch")Z.createEl("button",{cls:"lt-carousel-btn lt-carousel-btn--primary",text:"Next File"}).addEventListener("click",()=>this.handleNextFile());Z.createEl("button",{cls:"lt-carousel-btn lt-carousel-btn--secondary",text:"Close"}).addEventListener("click",()=>this.close())}debouncedSave(){if(this.saveDebounceTimer)clearTimeout(this.saveDebounceTimer);this.saveDebounceTimer=setTimeout(()=>{this.saveCurrentPropertyImmediate()},MU)}saveCurrentPropertyImmediate(){let $=this.getCurrentFile(),Q=this.getCurrentDefinition();if(!$||!Q)return;if(this.savedValues[Q.name]=this.currentValue,this.currentValue!==void 0&&this.currentValue!==null&&this.currentValue!=="")this.filledProperties.add(Q.name);else this.filledProperties.delete(Q.name);this.frontmatterService.write($,{[Q.name]:this.currentValue}).then(()=>{this.renderProgress()}).catch((Z)=>{console.error("Failed to save property:",Z)})}navigatePrev(){if(this.isFirstProperty())return;if(this.saveDebounceTimer)clearTimeout(this.saveDebounceTimer),this.saveCurrentPropertyImmediate();let $=this.getCurrentDefinition();if($)this.savedValues[$.name]=this.currentValue;this.currentPropertyIndex--;let Q=this.getCurrentDefinition();this.currentValue=this.savedValues[Q?.name??""],this.renderCard()}navigateNext(){if(this.isLastProperty())return;if(this.saveDebounceTimer)clearTimeout(this.saveDebounceTimer),this.saveCurrentPropertyImmediate();let $=this.getCurrentDefinition();if($)this.savedValues[$.name]=this.currentValue;this.currentPropertyIndex++;let Q=this.getCurrentDefinition();this.currentValue=this.savedValues[Q?.name??""],this.renderCard()}validateAndNavigateNext(){if(!this.currentEditor)return;let $=this.currentEditor.validate();if(!$.valid){new h5.Notice($.error??"Invalid value");return}if(this.saveDebounceTimer)clearTimeout(this.saveDebounceTimer);if(this.saveCurrentPropertyImmediate(),this.isLastProperty())if(this.context.mode==="batch")this.handleNextFile();else this.handleDone();else{let Q=this.getCurrentDefinition();if(Q)this.savedValues[Q.name]=this.currentValue;this.currentPropertyIndex++;let J=this.getCurrentDefinition();this.currentValue=this.savedValues[J?.name??""],this.renderCard()}}async navigatePrevFile(){if(this.saveDebounceTimer)clearTimeout(this.saveDebounceTimer),this.saveCurrentPropertyImmediate();let $=this.isFirstFile()?this.getTotalFiles()-1:this.currentFileIndex-1,Q=this.findNextIncompleteFile($,-1);if(Q===-1){this.handleAllFilesComplete();return}if(this.currentFileIndex=Q,await this.loadProperties(),this.sortedDefinitions.length===0){this.renderEmptyState();return}this.render()}async navigateNextFile(){if(this.saveDebounceTimer)clearTimeout(this.saveDebounceTimer),this.saveCurrentPropertyImmediate();let $=this.isLastFile()?0:this.currentFileIndex+1,Q=this.findNextIncompleteFile($,1);if(Q===-1){this.handleAllFilesComplete();return}if(this.currentFileIndex=Q,await this.loadProperties(),this.sortedDefinitions.length===0){this.renderEmptyState();return}this.render()}async handleNextFile(){if(this.saveDebounceTimer)clearTimeout(this.saveDebounceTimer),this.saveCurrentPropertyImmediate();if(this.plugin.settings.showConfettiOnCapture)this.showMiniConfetti();let $=this.isLastFile()?0:this.currentFileIndex+1,Q=this.findNextIncompleteFile($,1);if(Q===-1){this.handleAllFilesComplete();return}if(this.currentFileIndex=Q,await this.loadProperties(),this.sortedDefinitions.length===0){this.renderEmptyState();return}this.render()}handleAllFilesComplete(){if(this.plugin.settings.showConfettiOnCapture)this.showConfetti();new h5.Notice(`All ${this.getTotalFiles()} files are complete!`),setTimeout(()=>{this.close()},600)}handleDone(){if(this.saveDebounceTimer)clearTimeout(this.saveDebounceTimer),this.saveCurrentPropertyImmediate();if(this.plugin.settings.showConfettiOnCapture)this.showConfetti();let $=this.context.mode==="batch"?`All ${this.getTotalFiles()} files processed!`:"Properties saved!";new h5.Notice($),setTimeout(()=>{this.close()},600)}showConfetti(){let $=this.contentEl.getBoundingClientRect(),Q=($.left+$.width/2)/window.innerWidth,J=($.top+$.height/2)/window.innerHeight;Q6.default({particleCount:100,spread:70,origin:{x:Q,y:J},colors:["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7","#dfe6e9"],ticks:200,gravity:1.2,scalar:1.2,shapes:["circle","square"],zIndex:1e4}),setTimeout(()=>{Q6.default({particleCount:50,spread:100,origin:{x:Q,y:J},colors:["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7"],ticks:150,gravity:1,scalar:0.8,zIndex:1e4})},150)}showMiniConfetti(){let $=this.contentEl.getBoundingClientRect(),Q=($.left+$.width/2)/window.innerWidth,J=($.top+$.height/2)/window.innerHeight;Q6.default({particleCount:30,spread:50,origin:{x:Q,y:J},colors:["#4ecdc4","#45b7d1","#96ceb4"],ticks:100,gravity:1.5,scalar:0.8,zIndex:1e4})}destroyEditor(){if(this.currentEditor)this.currentEditor.destroy(),this.currentEditor=null}}function h2($){$.addCommand({id:"capture-properties",name:"Capture properties",callback:()=>{if($.settings.propertyDefinitions.length===0){new j$.Notice("No property definitions configured. Add them in Settings  Life Tracker  Property Definitions.");return}let Q=BU($);if(!Q){new j$.Notice("Please open a markdown file or a Life Tracker view first");return}new W$($,Q).open()}})}function BU($){let J=$.app.workspace.getActiveFile();if(J&&J.extension==="md")return{mode:"single-note",file:J};let Z=$.getActiveProviderFiles(),q=$.getActiveProviderFilterMode();if(Z&&Z.length>0)return{mode:"batch",files:Z,currentIndex:0,filterMode:q??"never"};return null}function f2($){h2($)}class L$ extends x2.Plugin{settings=t5(m1,()=>m1);settingsChangeListeners=new Set;activeFileProvider=null;setActiveFileProvider($){this.activeFileProvider=$}getActiveProviderFiles(){if(!this.activeFileProvider)return null;return this.activeFileProvider.getFiles()}getActiveProviderFilterMode(){if(!this.activeFileProvider)return null;return this.activeFileProvider.getFilterMode()}async onload(){if(m("Initializing","debug"),await this.loadSettings(),!this.registerBasesView(K$,{name:"Life Tracker",icon:"activity",factory:(J,Z)=>new Y$(J,Z,this),options:I2}))m("Bases feature is not enabled in this vault","warn");else m("Life Tracker view registered","debug");if(this.registerBasesView(B$,{name:"Life Tracker Grid",icon:"layout-grid",factory:(J,Z)=>new q1(J,Z,this),options:b2}))m("Life Tracker Grid view registered","debug");this.addSettingTab(new W4(this.app,this)),f2(this)}onunload(){}async loadSettings(){m("Loading settings","debug");let $=await this.loadData();if(!$){m("Using default settings","debug"),this.settings=t5(m1,(Q)=>Q);return}this.settings=t5(m1,(Q)=>{if(Array.isArray($.visualizationPresets))Q.visualizationPresets=$.visualizationPresets;if(typeof $.animationDuration==="number")Q.animationDuration=$.animationDuration;if(Array.isArray($.propertyDefinitions))Q.propertyDefinitions=$.propertyDefinitions;if(typeof $.showConfettiOnCapture==="boolean")Q.showConfettiOnCapture=$.showConfettiOnCapture}),m("Settings loaded","debug",$)}async saveSettings(){m("Saving settings","debug",this.settings),await this.saveData(this.settings),m("Settings saved","debug",this.settings)}async updateSettings($){this.settings=t5(this.settings,$),await this.saveSettings(),this.notifySettingsChanged()}onSettingsChange($){return this.settingsChangeListeners.add($),()=>{this.settingsChangeListeners.delete($)}}notifySettingsChanged(){for(let $ of this.settingsChangeListeners)try{$(this.settings)}catch(Q){m("Error in settings change listener","error",Q)}}}var jU=L$;
