---
categories:
  - 策略
tags:
  - PA/Strategy
策略名称/strategy_name: 20均线缺口 (20 EMA Gap)
策略状态/strategy_status: 学习中 (Learning)
市场周期/market_cycle:
  - 强趋势 (Strong Trend)
  - 突破模式 (Breakout Mode)
设置类别/setup_category: 趋势回调 (Trend Pullback)
观察到的形态/patterns_observed:
  - 20均线缺口 (20 EMA Gap)
  - 过度延伸 (Overextended)
信号K/signal_bar_quality:
  - 强阳收盘 (Strong Bull Close)
  - 强阴收盘 (Strong Bear Close)
  - 连续内包 (ii / Consecutive Inside Bars)
  - 外包夹内包 (ioi / Inside-Outside-Inside)
入场条件/entry_criteria:
  - K线连续20-30根未触及EMA
  - 首次回调触及EMA
风险提示/risk_alerts:
  - 如果超过40根K线未触及，可能已演变为宽通道
  - 如果回调深度超过50%，视为弱势信号
止损建议/stop_loss_recommendation:
  - 保守: 前一波段极值外 2 ticks
  - 激进: 信号K线极值外 1 tick
目标建议/take_profit_recommendation:
  - 首选: 测试前极值 (Old High/Low)
盈亏比/risk_reward: 2:1 - 3:1
来源/source:
  - Brooks Playbook（原太妃价格行为） L17B
  - http://192.168.66.206:5666/v/video/b720ea8942844af58e70f78912a984e6
封面/cover:
---

# 🎯 策略概览

**一句话描述**:
当价格连续 20-30 根 K 线未触及 20EMA 后,首次回调至均线附近的高概率顺势入场机会。

**Al Brooks 术语**: Moving Average Gap Bar / Pullback after 20+ Bars from EMA  
**历史原始术语（原太妃）**: 20 均线缺口、过度延伸均线缺口 (Overextended MA Gap)

---

## 📋 入场条件 (Entry Criteria)

### 市场背景要求

- [ ] 市场周期: **强趋势**(Spike 阶段或强 Channel)
- [ ] 波段结构: HH/HL(牛) 或 LH/LL(熊)
- [ ] 均线关系: 价格持续远离 20EMA

### 关键识别要素

1. **K 线计数**: 连续 20-30 根 K 线未触及 20EMA(最多不超过 40 根)
   - <20 根: 未达标准,不算缺口
   - 20-30 根: 理想范围
   - > 30 根: 可能属于更大级别趋势,结构失衡
2. **缺口特征**: K 线与均线之间形成明显空隙区域
3. **回调性质**: 首次回调,价格重新接近或触及 20EMA

### 信号棒特征 - H1/L1 形态

- [ ] K 线形态: **同侧高低 1**(High 1 牛市 / Low 1 熊市)
  - 牛市: 突破前 K 线高点的第一根 K 线
  - 熊市: 跌破前 K 线低点的第一根 K 线
- [ ] 收盘位置: 强收盘,接近 K 线极值
- [ ] 位置要求: 在 20EMA 附近(可略微穿透)
- [ ] 动能恢复: 信号棒表明趋势恢复意图

### 路径分析

- [ ] 确认前方原趋势极值(Old High/Low)
- [ ] 无明显阻力磁体阻挡
- [ ] 回调幅度<50%(最好<38.2%)

---

## 🛡️ 风险管理 (Risk Management)

### 止损位置

- **保守型**: 重要波段点外(前一个 Swing Low/High 外 2-4 跳)
  - 优点: 容错空间大
  - 缺点: 盈亏比略差
- **激进型**: 信号 K 线外(Entry Bar 外 1-2 跳)
  - 优点: 盈亏比优秀
  - 缺点: 易被扫损

### 目标位计算

- **首要目标**: 原趋势极值(Old High/Low)
  - 牛市: 回调前的最高点
  - 熊市: 回调前的最低点
- **延伸目标**: 如突破极值,可持有至等距投射位
- **保守目标**: 50%回撤位(适合新手部分获利)

### 仓位管理

- **学习阶段**: 单一入场,不加仓
- **验证阶段**: 可在 H2/L2 时加仓(若出现)
- **杠杆效应**: 确保信号 K 线占比合理
  - 理想: 信号 K 线占总 K 线数的 5-10%以上
  - 警惕: 2/40 这种占比过小的情况

---

## ⚠️ 失败模式 (Failure Signals)

当出现以下情况,立即退出或不入场:

- [ ] **K 线数过多**: 超过 40 根未触及均线(可能是更大级别趋势)
- [ ] **回调过深**: 穿透 20EMA 过远,形成深幅调整
- [ ] **信号棒弱**: H1/L1 信号棒收线疲软,有长影线
- [ ] **横盘整理**: 在均线附近形成横向交易区间
- [ ] **趋势反转**: 出现明显反转形态(如大型反转棒)

### 与第一均线缺口混淆的风险

- 如价格穿透均线对侧后又返回,应识别为"第一均线缺口"策略
- 纯粹的 20 均线缺口不应有均线对侧的穿透

---

## 📊 Al Brooks 理论对应

### 核心概念映射

| 太妃术语    | Al Brooks 术语                          | 说明                 |
| ----------- | --------------------------------------- | -------------------- |
| 20 均线缺口 | Moving Average Gap / 20 Bar MA Pullback | 价格远离均线形成缺口 |
| 同侧高低 1  | High 1 / Low 1 (H1/L1)                  | 趋势恢复的第一信号   |
| 原趋势极值  | Old High / Old Low                      | 回调前的高点/低点    |
| 重要波段点  | Swing Point                             | 明显的转折点         |
| 过度延伸    | Overextended                            | 价格过度偏离均线     |

### 适用的 Al Brooks 形态

- **Pullback in Strong Trend**: 强趋势中的首次回调
- **High 1 / Low 1 Setup**: 趋势恢复的标准入场
- **Test of EMA after Gap**: 缺口后的均线测试

---

## 🎓 学习笔记 (Notes)

### 课程来源

- **视频**: Brooks Playbook（原太妃价格行为） L17B - 20 均线缺口-第一均线缺口
- **时间码**: 00:16 - 20 均线缺口定义
- **时间码**: 04:19 - 操作细则

### 关键要点

1. **首次回调规律**: 各类首次回调倾向成为失败的反转,价格最终会测试原趋势极值
2. **K 线数量限制**: 20-30 根是甜蜜点,太少不算缺口,太多可能是大级别趋势
3. **杠杆效应**: 信号 K 线占比影响盈亏比,需合理评估
4. **与通道区别**: 20 均线缺口通常出现在 Spike 阶段,不是宽幅通道

### 个人理解

- 这是捕捉强趋势中首次回调的经典策略
- 关键是"首次",如果已经有多次回调就不适用
- 20EMA 是 Al Brooks 最常用的均线,与太妃体系完全吻合
- 该策略胜率较高(>60%),适合作为主力策略

---

## 📸 案例图库 (Gallery)

### ✅ 成功案例

_(从太妃课程笔记中提取)_
![20均线缺口形成](../../太妃价格行为/assets/太妃/img_9123303248160702030.jpg)
_分析: 连续 23 根 K 线未触及均线,首次回调后 H1 信号入场,成功测试原高点_

### ❌ 失败案例

_(待补充: 41 根 K 线后回调过深导致止损的案例)_
![K线数过多失败](../../太妃价格行为/assets/太妃/img_4214385785380000670.jpg)
_分析: 41 根 K 线乖离,反映更大级别趋势,后续调整过深_

---

## 🔄 操作检查清单 (Checklist)

**入场前检查**:

- [ ] 数 K 线: 确认 20-30 根未触及均线
- [ ] 识别 H1/L1 信号: 突破前 K 线的第一根同向 K 线
- [ ] 确认原趋势极值位置(目标位)
- [ ] 计算盈亏比是否>2:1

**持仓中监控**:

- [ ] 观察是否继续向原极值运动
- [ ] 如出现 H2/L2 考虑加仓
- [ ] 接近目标位时部分获利

**复盘问题**:

- [ ] K 线计数是否准确?
- [ ] H1/L1 识别是否正确?
- [ ] 止损设置是保守还是激进?效果如何?
- [ ] 是否达到目标位?

---

## 🔗 相关策略

- [[第一均线缺口策略]] - 价格穿透均线对侧后的回调
- [[H2 Setup策略]] - 如 H1 失败,H2 可能出现更好机会
- [[测量移动策略]] - 目标位可能延伸至 MM 位

---

## 📊 历史表现 (Performance)

```dataviewjs
// 自动统计使用该策略的所有交易
const strategyName = "20均线缺口";
const trades = dv.pages('#PA/Trade')
  .where(p => p["策略名称"] == strategyName);

const wins = trades.where(p => p.结果 == "止盈").length;
const total = trades.length;
const winRate = total > 0 ? (wins/total*100).toFixed(1) : 0;

dv.paragraph(`**总使用次数**: ${total} | **成功**: ${wins} | **胜率**: ${winRate}%`);

if(total > 0) {
  dv.header(3, "最近交易记录");
  dv.table(["日期", "品种", "结果", "盈亏"],
    trades.sort(p => p.date, 'desc').limit(5)
      .map(p => [p.date, p.品种, p.结果, p.净利润]));
}
```

---

> [!tip] 实战建议
>
> 1. **新手**: 使用保守止损,只交易 20-25 根 K 线的标准缺口
> 2. **中级**: 可尝试激进止损,提高盈亏比
> 3. **高手**: 结合更大周期判断,决定是否持有过原极值

> [!warning] 风险提示
>
> - 避免在 K 线数>35 根时交易,可能遭遇大级别回调
> - 必须是"首次"回调,多次回调不适用
> - H1 失败后要警惕可能转为交易区间

---

## 📚 实战案例库 (Case Library)

> [!example] 自动关联的实战交易
> 系统自动抓取所有标记为 **`$= dv.current().patterns_observed ? dv.current().patterns_observed[0] : "此形态"`** 或策略名为 **`$= dv.current().strategy_name`** 的交易。

```dataviewjs
const currentPatterns = dv.current().patterns_observed || [];
const currentStrategy = dv.current().strategy_name;

// 辅助函数：检查数组交集
function hasIntersection(arr1, arr2) {
    if (!arr1 || !arr2) return false;
    const a1 = Array.isArray(arr1) ? arr1 : [arr1];
    const a2 = Array.isArray(arr2) ? arr2 : [arr2];
    return a1.some(item1 => a2.some(item2 => item1.includes(item2) || item2.includes(item1)));
}

dv.table(["日期", "品种", "方向", "结果", "盈亏", "执行"],
    dv.pages('"Daily/Trades"')
    .where(p => {
        const tradePatterns = p.patterns_observed;
        const tradeStrategy = p.strategy_name;

        // 1. 策略名称完全匹配
        if (currentStrategy && tradeStrategy && tradeStrategy === currentStrategy) return true;

        // 2. 形态标签共振 (只要有一个形态重叠)
        if (hasIntersection(currentPatterns, tradePatterns)) return true;

        return false;
    })
    .sort(p => p.date, "desc")
    .map(p => [
        p.file.link,
        p.ticker,
        p.direction,
        p.outcome == "止盈 (Win)" ? "✅ 止盈" : (p.outcome == "止损 (Loss)" ? "❌ 止损" : "⚪ 平手"),
        p.net_profit,
        p.execution_quality
    ])
)
```
