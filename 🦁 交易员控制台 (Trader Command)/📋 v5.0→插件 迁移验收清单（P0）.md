# 📋 v5.0 → 插件 迁移验收清单（P0）

> 目标：先确认“功能是否完整可用”，再做体验对齐（P1/P2）。
> 原则：逐模块验收；每修一个缺口必须 `npm run build` 通过。

## 使用方式
- 在 Obsidian 打开「交易员控制台」视图
- 按模块逐条勾选
- 若某条失败：记录“现象 + 触发条件 + 期望结果 + 复现步骤”，我们按 P0 优先补齐

---

## ⚔️ Trading Hub（交易中心）
对应 legacy：`scripts/pa-view-hub-trading.js`

- [ ] **标题/分区存在**：控制台内能看到“⚔️ 交易中心 / Trading Hub”分区
- [ ] **今日看板**：能看到「今日」卡片、今日交易统计/列表（有数据时）
- [ ] **市场周期入口**：当 today market cycle 为空时，有“打开/创建今日日记（设置市场周期）”入口
- [ ] **策略推荐**：当 market cycle 存在时，出现「周期 → 策略推荐」列表，并可点击打开策略笔记
- [ ] **进行中交易助手**：当存在未平仓交易时，出现「进行中交易助手」，并可打开交易笔记
- [ ] **快速行动（开仓）**：存在“新建实盘/模拟/回测”按钮；
  - QuickAdd 安装时：点击会触发相应 QuickAdd choice
  - QuickAdd 未安装时：按钮禁用或给出明确提示（不崩溃）
- [ ] **创建新交易笔记（模板兜底）**：即使 QuickAdd 未安装，也能通过模板创建并打开一份交易笔记（不再是占位符）
- [ ] **刷新/外部能力降级**：Dataview/Tasks/Metadata Menu 等未安装时，不崩溃且按钮禁用

---

## 📊 Analytics Hub（数据中心）
对应 legacy：`scripts/pa-view-hub-analytics.js`

- [ ] **标题/分区存在**：能看到“📊 数据中心 / Analytics Hub”分区
- [ ] **总体统计**：总笔数 / 累计盈亏 / 胜率三项卡片有值
- [ ] **账户维度**：实盘/模拟/回测各自统计能展示
- [ ] **账户资金概览**：能看到资金曲线或等效的资金趋势呈现（不要求 SVG 一致，但口径一致）
- [ ] **盈亏日历**：能按月份展示每日净值（或等效）
- [ ] **环境周期分析**：Top N 周期列表存在
- [ ] **错误分布 / 学费统计**：Top N 错误存在，口径与 v5 “亏损 + 执行评价非 Perfect/Valid/None/完美/主动”一致
- [ ] **策略归因/策略统计**：能看见策略列表与胜率/样本等信息（或等效）

---

## 🧠 Memory（记忆系统）
对应 legacy：`scripts/pa-view-memory.js`

- [ ] **标题/分区存在**：能看到 Memory 分区
- [ ] **统计可用**：总计 / due / 掌握度 / 负载等指标能显示
- [ ] **推荐逻辑**：出现 Focus/Up Next/Random 之一的推荐卡片，并可打开对应笔记
- [ ] **SRS 复习按钮**：安装 SRS（Spaced Repetition）时可点击触发；未安装时禁用且不崩溃

---

## 📚 Course（课程系统）
对应 legacy：`scripts/pa-view-course.js`

- [ ] **标题/分区存在**：能看到 Course 分区
- [ ] **Up Next**：能显示推荐窗口（由设置项控制）
- [ ] **打开课程条目**：条目可点击打开

---

## 🗂️ Strategy / Playbook（策略仓库）
对应 legacy：`scripts/pa-view-strategy.js` / `scripts/pa-view-playbook.js`

- [ ] **策略列表存在**：能看到策略列表/搜索
- [ ] **按周期筛选**：能按市场周期筛选（或等效）
- [ ] **策略详情打开**：能打开策略笔记

---

## 🖼️ Gallery（图库）
对应 legacy：`scripts/pa-view-gallery.js`

- [ ] **封面展示**：策略/交易的 cover 能展示；缺少 cover 时提示明确
- [ ] **点击打开来源文件**：点击 cover 可打开对应交易/策略

---

## 🔍 Inspector（检查器）
对应 legacy：`scripts/pa-view-inspector.js`

- [ ] **问题列表**：能看到问题/缺口列表（例如 ticker/timeframe 缺失）
- [ ] **跳转**：点击问题可打开对应文件

---

## 🧾 Schema（Schema/字段）
对应 legacy：`scripts/pa-view-schema.js`

- [ ] **Schema 扫描**：能展示扫描结果或提示“策略扫描不可用”等降级信息
- [ ] **字段修复计划**：能生成修复计划（不要求一键全修，但不应崩溃）

---

## 🧰 Manager（批处理管理）
对应 legacy：`scripts/pa-view-manager.js`

- [ ] **Inventory**：能扫描 trade/strategy inventory
- [ ] **Plan & Apply**：能生成计划并应用（有明确结果/备份信息）

---

## 📥 Export（导出）
对应 legacy：v5 页面底部导出

- [ ] **旧版兼容快照**：可导出 `pa-db-export.json`
- [ ] **索引快照**：可导出到 `Exports/al-brooks-console/`

---

## 记录区（失败项）
把失败项按下面格式粘贴到这里：

- 模块：
- 现象：
- 触发条件：
- 复现步骤：
- 期望结果（对齐 v5）：
