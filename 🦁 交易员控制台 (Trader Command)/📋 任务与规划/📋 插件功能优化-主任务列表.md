# ğŸ“‹ æ’ä»¶åŠŸèƒ½ä¼˜åŒ– - ä¸»ä»»åŠ¡åˆ—è¡¨ (Ultimate Edition)

> **é¡¹ç›®**: Al Brooks Trader Console ç»ˆæè¿›åŒ– (The Ultimate Evolution)
> **æ ¸å¿ƒæ–¹é’ˆ**: **å…¨é¢ã€æ·±åº¦ã€ç³»ç»ŸåŒ–** (Comprehensive, Deep, Systematic)
> **ç›®æ ‡**: å°†æ’ä»¶æ‰“é€ ä¸ºä¸ä»…æ˜¯æ•°æ®æ˜¾ç¤ºï¼Œè€Œæ˜¯æ·±åº¦é›†æˆâ€œäº¤æ˜“å“²å­¦ (PA) + æ•°æ®ç»“æ„ (Templates) + äº¤äº’é€»è¾‘ (UX)â€çš„ä¸“ä¸šçº§ç»ˆç«¯ã€‚
> **æœ€åæ›´æ–°**: 2026-01-17

---

## ğŸ—ºï¸ å…¨å±€ç”Ÿæ€æ¶æ„å›¾è°± (The Grand Map)

æœ¬è®¡åˆ’æ¶µç›–ä»¥ä¸‹æ ¸å¿ƒé¢†åŸŸçš„æ·±åº¦å‡çº§ã€‚æ¯ä¸€ä¸ªæ¨¡å—çš„å‡çº§éƒ½å¿…é¡»ä¸¥æ ¼éµå¾ª **"Data First" (ä»¥æ¨¡æ¿å®šä¹‰ä¸ºæºå¤´)** çš„åŸåˆ™ã€‚

| é¢†åŸŸ | æ ¸å¿ƒæ¨¡å— | å…³é”®å‡çº§ç‚¹ | æ¶‰åŠæ¨¡æ¿/æ•°æ®æº |
| :--- | :--- | :--- | :--- |
| **ğŸš€ Global** | **åŸºå»ºä¸ç”Ÿæ€** | ç»Ÿä¸€å†™å…¥å±‚ (ActionService)ã€åŠ¨æ€ Schema éªŒè¯ã€æ“ä½œå›æ»šã€‚ | `Templates/å±æ€§å€¼é¢„è®¾.md` |
| **âš”ï¸ Trading** | **äº¤æ˜“æŒ‡æŒ¥ä¸­å¿ƒ** | ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ¨èã€åŠ¨æ€è¡¨å•ã€å®æ—¶é£æ§ R å€¼ã€åŒå‘ä»»åŠ¡åŒæ­¥ã€‚ | `Templates/å•ç¬”äº¤æ˜“æ¨¡ç‰ˆ.md`, `ç­–ç•¥ä»“åº“/*.md`, `Templates/æ¯æ—¥å¤ç›˜æ¨¡ç‰ˆ.md` |
| **ğŸ“Š Analytics** | **æ•°æ®é€è§†** | äº¤äº’å¼çƒ­åŠ›å›¾é’»å–ã€ä¸¥æ ¼ PnL/R åˆ†ç¦»ã€å¤šç»´å½’å› åˆ†æã€‚ | `Daily/*.md` (Frontmatter aggregation) |
| **ğŸ“š Learn** | **å­¦ä¹ å†…åŒ–** | åœºæ™¯åŒ–çŸ¥è¯†æ¨é€ (Context-Aware SRS)ã€è¿è´¥æƒ…ç»ªé˜»æ–­ã€‚ | `Templates/ç†è®ºæ¨¡ç‰ˆ.md`, SRS Plugin Date |
| **ğŸ›¡ï¸ Manage** | **æ™ºèƒ½ç®¡å®¶** | å…ƒæ•°æ®è‡ªåŠ¨ä¿®å¤ (The Doctor)ã€æ ‡ç­¾æ¸…æ´—ã€è‡ªåŠ¨å½’æ¡£ã€‚ | All `#PA/Trade` Notes |
| **ğŸ¨ UI/UX** | **è§†è§‰è¯­è¨€** | ç»Ÿä¸€è®¾è®¡ç³»ç»Ÿã€ä¿¡æ¯åˆ†çº§ã€é«˜å¯†åº¦ä¸“ä¸šå¸ƒå±€ã€‚ | `src/ui/components` |

---

## ğŸ—“ï¸ è¯¦ç»†æ‰§è¡Œè·¯çº¿å›¾ (Detailed Roadmap)

### ğŸš€ Phase 1: åšå®çš„åŸºçŸ³ (Foundation & Global)
**ç›®æ ‡**: å»ºç«‹ç»Ÿä¸€çš„æ•°æ®è¯»å†™ã€éªŒè¯ä¸å®‰å…¨æœºåˆ¶ï¼Œæ¶ˆé™¤åº•å±‚é€»è¾‘çš„è„†å¼±æ€§ã€‚

#### 1.1 åŠ¨æ€ Schema éªŒè¯å¼•æ“ (Dynamic Schema Engine)
- **ç°çŠ¶**: æ’ä»¶å†…çš„éªŒè¯é€»è¾‘éƒ¨åˆ†ç¡¬ç¼–ç ï¼Œä¸ `Templates/å±æ€§å€¼é¢„è®¾.md` å‰²è£‚ã€‚
- **å‡çº§é€»è¾‘**:
    - **Single Source of Truth**: æ’ä»¶å¯åŠ¨æ—¶ï¼Œè¯»å– `Templates/å±æ€§å€¼é¢„è®¾.md`ã€‚
    - **Hot Reload**: å¦‚æœç”¨æˆ·ä¿®æ”¹äº†æ¨¡æ¿é‡Œçš„æšä¸¾ï¼ˆæ¯”å¦‚åŠ äº†ä¸€ä¸ª "P4-è¶…é«˜" æ¦‚ç‡ï¼‰ï¼Œæ’ä»¶æ— éœ€å‘ç‰ˆï¼Œè¡¨å•è‡ªåŠ¨æ›´æ–°ã€‚
- [x] **Task: å®ç° `SchemaLoader`**
    - è§£æ `å±æ€§å€¼é¢„è®¾.md` çš„ YAMLï¼Œç”Ÿæˆè¿è¡Œæ—¶é…ç½®å¯¹è±¡ã€‚
- [x] **Task: æ”¹é€  `SchemaValidator`**
    - ç§»é™¤ç¡¬ç¼–ç  Enumï¼Œæ”¹ä¸ºä» `SchemaLoader` è·å–ã€‚

#### 1.2 ç»Ÿä¸€å†™å…¥æœåŠ¡ (Unified Action Service)
- **ç°çŠ¶**: å†™æ–‡ä»¶é€»è¾‘åˆ†æ•£åœ¨å„ä¸ª Componentï¼Œä¸å¤ŸåŸå­åŒ–ï¼Œä¸”ç¼ºä¹ Undoã€‚
- **å‡çº§é€»è¾‘**:
    - æ‰€æœ‰ä¿®æ”¹ï¼ˆæ”¹Frontmatterã€ç§»åŠ¨æ–‡ä»¶ã€è¿½åŠ æ—¥å¿—ï¼‰å¿…é¡»èµ° `ActionService`ã€‚
    - **Safe-Guard**: ä¿®æ”¹å‰è‡ªåŠ¨å¤‡ä»½ï¼Œæä¾› UI çº§ Undo (Toast)ã€‚
- [x] **Task: å®Œå–„ `ActionService.updateFrontmatter`**
    - æ”¯æŒåµŒå¥—å­—æ®µæ›´æ–° (e.g., `plan_checklist[0].done`).
- [ ] **Task: å®ç° `TransactionManager`**
    - æ”¯æŒå¤šæ–‡ä»¶åŸå­æ“ä½œï¼ˆè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨å›æ»šï¼‰ã€‚

---

### âš”ï¸ Phase 2: äº¤æ˜“æŒ‡æŒ¥ä¸­å¿ƒ (Trading Hub)
**ç›®æ ‡**: æ‰“é€šä»â€œç›˜å‰è®¡åˆ’â€åˆ°â€œç›˜ä¸­æ‰§è¡Œâ€å†åˆ°â€œç­–ç•¥åŒ¹é…â€çš„å…¨é“¾è·¯ã€‚

#### 2.1 æ¯æ—¥è®¡åˆ’åŒå‘åŒæ­¥ (Daily Plan Bi-directional Sync)
- **å…³è”æ–‡ä»¶**: `Templates/æ¯æ—¥å¤ç›˜æ¨¡ç‰ˆ.md` (å­—æ®µ: `plan_checklist`)
- **ç°çŠ¶**: æ’ä»¶é‡Œçš„ Checklist æ˜¯å‡çš„/ç‹¬ç«‹çš„ï¼Œä¸ä¿å­˜åˆ° Daily Noteã€‚
- **å‡çº§é€»è¾‘**:
    - **Mount**: ç»„ä»¶åŠ è½½æ—¶ï¼Œå®šä½ä»Šæ—¥å¤ç›˜ç¬”è®° -> è¯»å– `plan_checklist`ã€‚
    - **Update**: ç”¨æˆ·å‹¾é€‰ -> ActionService å®šä½è¡Œå· -> ä¿®æ”¹ markdown `[ ]` ä¸º `[x]`ã€‚
- [x] **Task: å¼€å‘ `DailyPlanSyncer`**
    - è´Ÿè´£ Markdown AST è§£æï¼Œç²¾å‡†å®šä½ Checklist å—ã€‚
- [x] **Task: å‡çº§ `PlanWidget` UI**
    - æ¸²æŸ“ä» Daily Note è¯»æ¥çš„çœŸå®ä»»åŠ¡ã€‚

#### 2.2 ç­–ç•¥åŒ¹é…å¼•æ“ V2 (Strategy Matcher V2)
- **å…³è”æ–‡ä»¶**: `Templates/ç­–ç•¥å¡ç‰‡è§„èŒƒæ¨¡æ¿.md` (æ–°å¢: `risk_level`, `timeframe`, `direction`)
- **ç°çŠ¶**: æ’ä»¶åªåŒ¹é… `patterns_observed`ï¼Œæ— è§†æ–°å­—æ®µã€‚
- **å‡çº§é€»è¾‘**:
    - **Indexer**: å‡çº§ `StrategyIndex` è§£ææ‰€æœ‰æ–°å­—æ®µã€‚
    - **Matcher**:
        - **Filter (ç¡¬è¿‡æ»¤)**: æ’é™¤æ–¹å‘å†²çªï¼ˆShort Trade ä¸æ¨ Long Strategyï¼‰ã€‚
        - **Score (è½¯è¯„åˆ†)**: 
            - å‘¨æœŸåŒ¹é… (+3åˆ†): å½“å‰ 5mï¼Œç­–ç•¥å« 5mã€‚
            - é£é™©åŒ¹é… (+2åˆ†): è´¦æˆ· Risk Limit é«˜ï¼Œå…è®¸æ¨ High Risk ç­–ç•¥ã€‚
- [x] **Task: å‡çº§ `StrategyIndex` è§£æå™¨**
- [x] **Task: é‡å†™ `StrategyMatcher` æ ¸å¿ƒç®—æ³•**

#### 2.3 æ™ºèƒ½åŠ¨æ€è¡¨å• (Content-Aware Inline Form)
- **å…³è”æ–‡ä»¶**: `Templates/å•ç¬”äº¤æ˜“æ¨¡ç‰ˆ.md`
- **ç°çŠ¶**: è¡¨å•æ˜¯é™æ€çš„ï¼Œæ‰€æœ‰äº¤æ˜“éƒ½æ˜¾ç¤ºä¸€æ ·çš„ 20 ä¸ªå­—æ®µã€‚
- **å‡çº§é€»è¾‘**:
    - **Trigger**: ç›‘å¬ `setup_category` çš„å˜åŒ–ã€‚
    - **Reaction**:
        - é€‰äº† "Trend Breakout" -> è‡ªåŠ¨å±•å¼€/é«˜äº® `Follow-through` (åç»­) å­—æ®µã€‚
        - é€‰äº† "Reversal" -> è‡ªåŠ¨å±•å¼€/é«˜äº® `Signal Bar Quality` å­—æ®µã€‚
- [x] **Task: å®šä¹‰ `FormLogicMap`** (Setup -> Fields æ˜ å°„å…³ç³»)
- [x] **Task: æ”¹é€  `TradeInlineForm` ç»„ä»¶æ”¯æŒåŠ¨æ€æ˜¾éš**

#### 2.4 å®æ—¶ R å€¼é£æ§ (Live Risk Calculator)
- **ç°çŠ¶**: è¾“å…¥æ•°å­—æ— åé¦ˆã€‚
- **å‡çº§é€»è¾‘**:
    - ç›‘å¬ `Entry`, `Stop Loss`, `Take Profit` è¾“å…¥ã€‚
    - **Calc 1 (Risk)**: `|Entry - Stop| * PositionSize` (å¦‚æœæ”¯æŒä»“ä½). æ˜¾ç¤ºä¸ºçº¢è‰²é‡‘é¢ã€‚
    - **Calc 2 (Reward)**: `|Target - Entry|`.
    - **Calc 3 (Ratio)**: `Reward / Risk`. å®æ—¶æ˜¾ç¤º "2.5R"ã€‚å¦‚æœä¸è¾¾æ ‡ (<1.0R) æ ‡çº¢è­¦å‘Šã€‚
- [x] **Task: å®ç° `RiskCalculator` Hook**

---

### ğŸ“Š Phase 3: æ•°æ®é€è§†ä¸å½’å›  (Analytics Deep Dive)
**ç›®æ ‡**: ä»ç®€å•çš„â€œçœ‹æ•°æ®â€è¿›åŒ–ä¸ºâ€œäº¤äº’å¼å½’å› åˆ†æâ€ã€‚

#### 3.1 äº¤äº’å¼çƒ­åŠ›å›¾ (Interactive Heatmap)
- **ç°çŠ¶**: é™æ€ SVGï¼Œåªèƒ½çœ‹ä¸èƒ½ç‚¹ã€‚
- **å‡çº§é€»è¾‘**:
    - **Interaction**: Click on Cell (ä¾‹å¦‚ 1æœˆ15æ—¥ çº¢è‰²æ ¼)ã€‚
    - **Action**: 
        1. ä¾§è¾¹æ æ»‘å‡ºï¼ˆæˆ–å¼¹çª—ï¼‰æ˜¾ç¤ºè¯¥æ—¥çš„ `Daily Journal` æ‘˜è¦ã€‚
        2. åˆ—å‡ºè¯¥æ—¥çš„æ‰€æœ‰ Trade Cardsã€‚
        2. åˆ—å‡ºè¯¥æ—¥çš„æ‰€æœ‰ Trade Cardsã€‚
- [x] **Task: æ”¹é€  `CalendarHeatmap` ç»„ä»¶** (å¢åŠ  onClick äº‹ä»¶å¤„ç†)
- [x] **Task: å¼€å‘ `DayDetailPanel` (ä¾§è¾¹æ è§†å›¾)**

#### 3.2 èƒœè´Ÿå¤šç»´åˆ†æ (Win/Loss Analysis Breakdown)
- **ç›®æ ‡**: å›ç­” "æˆ‘ä»€ä¹ˆæ—¶å€™æœ€å®¹æ˜“è¾“ï¼Ÿä»€ä¹ˆæ–¹å‘æœ€èµšé’±ï¼Ÿ"
- **å‡çº§é€»è¾‘**:
    - **Dimension 1**: æŒ‰æ—¶æ®µ (Hour of Day) ç»Ÿè®¡ PnL/WinRateã€‚
    - **Dimension 2**: æŒ‰å¤šç©º (Long/Short) ç»Ÿè®¡ã€‚
    - **Dimension 3**: æŒ‰æŒæœ‰æ—¶é—´ (Duration) ç»Ÿè®¡ã€‚
- [x] **Task: å¼€å‘ `WinLossAnalysisPanel` ç»„ä»¶** (ä¹‹å‰åä¸º AnalysisInsightPanel)
- [x] **Task: å®ç°å¤šç»´èšåˆç®—æ³• (Aggregation Logic)**

#### 3.3 ä¸¥æ ¼ PnL/R å±•ç¤º (Strict PnL/R Separation)
- **ç—›ç‚¹**: æ··æ·†é‡‘é¢å’Œå€æ•°ã€‚
- **å‡çº§é€»è¾‘**:
    - **Data Layer**: ä¸¥æ ¼åŒºåˆ† `netProfit` (Currency) å’Œ `r` (Number)ã€‚
    - **UI Layer**: 
        - Global Toggle: `[$] / [R]` åˆ‡æ¢å¼€å…³ã€‚
        - Chart: æ ¹æ® Toggle åˆ‡æ¢ Y è½´å•ä½ã€‚
- [x] **Task: å…¨å±€ Context å¢åŠ  `displayUnit` çŠ¶æ€**
- [x] **Task: é‡æ„ `AccountSummaryCards` å’Œ `CapitalGrowthChart` æ”¯æŒåŠ¨æ€å•ä½**
    - `AnalyticsTab`: å¢åŠ  Toggleã€‚
    - `WinLossAnalysisPanel`: æ”¯æŒ Net Rã€‚

---

### ï¿½ Phase 4: å­¦ä¹ å†…åŒ– (Contextual Learn)
**ç›®æ ‡**: æ‰“ç ´å­¦ä¹ ä¸å®æˆ˜çš„éš”ç¦»ã€‚

#### 4.1 åœºæ™¯åŒ– SRS æ¨é€ (Context-Aware SRS)
- **å…³è”**: `TradingHub` çŠ¶æ€ã€‚
- **å‡çº§é€»è¾‘**:
    - ç›‘å¬ `TradingHub` çš„ `Setup`ï¼Œä¾‹å¦‚ç”¨æˆ·æ­£åœ¨å…³æ³¨ "Wedge"ã€‚
    - æŸ¥è¯¢ SRS æ•°æ®åº“ (Spaced Repetition Plugin)ã€‚
    - **Filter**: æ‰¾åˆ° Tag åŒ…å« `#Wedge` ä¸” `Next Review Date` ä¸´è¿‘çš„å¡ç‰‡ã€‚
    - **Push**: åœ¨ Dashboard ä¾§è¾¹æ å³æ—¶å±•ç¤º "Review Now: Wedge Failures"ã€‚
- [x] **Task: å®ç° `SRSQueryService`** (ä¸ OBS-SRS æ’ä»¶é€šä¿¡)
- [x] **Task: å¼€å‘ `ContextLearnWidget`**

#### 4.2 æƒ…ç»ª/è¿è´¥é˜»æ–­ (Tilt Breaker)
- **é€»è¾‘**:
    - å®æ—¶è®¡ç®—ä»Šæ—¥ `Consecutive Losses`ã€‚
    - é˜ˆå€¼è§¦å‘ (e.g., >2):
        - Dashboard å˜çº¢ã€‚
        - å¼ºåˆ¶å¼¹å‡º Modal: "Stop! Review Checklist."
        - æ¨èé˜…è¯»: "Psychology/Tilt Management.md"ã€‚
- [x] **Task: å®ç° `StreakCounter`**
- [x] **Task: å¼€å‘ `TiltAlertModal`**

---

### ğŸ›¡ï¸ Phase 5: æ™ºèƒ½ç®¡å®¶ (System Manage)
**ç›®æ ‡**: è‡ªåŠ¨åŒ–ç»´æŠ¤æ•°æ®å¥åº·åº¦ã€‚

#### 5.1 å…ƒæ•°æ®åŒ»ç”Ÿ (The Doctor)
- **ç°çŠ¶**: Dataview ç»å¸¸å› ä¸ºç¼ºå­—æ®µæŠ¥é”™ã€‚
- **å‡çº§é€»è¾‘**:
    - **Scan**: éå†æ‰€æœ‰ `#Trade` ç¬”è®°ã€‚
    - **Diagnose**: å¯¹ç…§ `Trade Note Template`ï¼Œæ‰¾å‡ºç¼ºå¤±å­—æ®µã€‚
    - **Prescribe**: ç”Ÿæˆä¿®å¤è®¡åˆ’ (Fix Plan)ã€‚
    - **Cure**: ä¸€é”®æ‰¹é‡å†™å…¥é»˜è®¤å€¼ (ActionService)ã€‚
- [x] **Task: å¼€å‘ `MetadataDoctor` Service**
- [x] **Task: å¼€å‘ `DoctorUI` é¢æ¿**

#### 5.2 è‡ªåŠ¨å½’æ¡£ (Auto-Filing/Archive)
- **å…³è”**: `Categories` æ–‡ä»¶å¤¹ç»“æ„ã€‚
- **å‡çº§é€»è¾‘**:
    - ç›‘å¬æˆ–æ‰‹åŠ¨è§¦å‘ã€‚
    - å¦‚æœ `date` è¶…è¿‡é˜ˆå€¼ -> Move file to `å·²å½’æ¡£/YYYY/MM/`ã€‚
    - ä¿æŒ Inbox æ¸…çˆ½ã€‚
- [x] **Task: å®ç° `ArchiveService`** (Auto Move logic)
- [x] **Task: å¼€å‘ `ArchivePanel`**

---

### ğŸ¨ Phase 6: UI/UX è®¾è®¡ç³»ç»Ÿ (Design System)
**ç›®æ ‡**: ä¸“ä¸šã€ç»Ÿä¸€ã€é«˜æ•ˆã€‚

#### 6.1 ç»Ÿä¸€ç»„ä»¶åº“ (Component Library)
- **ç°çŠ¶**: æŒ‰é’®ã€è¾“å…¥æ¡†æ ·å¼ä¸ç»Ÿä¸€ã€‚
- **å‡çº§**:
    - å°è£… `Input`, `Select`, `Toggle`, `Card` åˆ° `src/ui/components`ã€‚
    - ç»Ÿä¸€ Token: Spacing, Color, Typography.
- [x] **Task: å®Œå–„ `src/ui/components`**

#### 6.2 è§†è§‰é™å™ª (Visual Detox)
- **åŸåˆ™**: Data Ink Ratioã€‚
- **å‡çº§**:
    - å»é™¤ä¸å¿…è¦çš„è¾¹æ¡†ã€èƒŒæ™¯è‰²ã€‚
    - ä½¿ç”¨ç•™ç™½åˆ†å‰²è€Œéçº¿æ¡ã€‚
    - å…³é”®æ•°å­—é«˜äº® (Green/Red)ï¼Œæ ‡ç­¾ç°åº¦åŒ–ã€‚
- [x] **Task: é‡æ„ Dashboard CSS** (Implemented in `TradeInlineForm` refactor)

---
