# 📊 插件模块深度 UX/UI 分析报告

> 版本: v1.1.1 | 更新: 2026-01-20 02:00  
> 分析师视角: UI/UX 专家

---

## 一、组件中英文对照表

| 英文组件名 | 中文界面名称 | 所在 Tab |
|-----------|-------------|----------|
| `TodayKpiCard` | 今日统计 (总交易/获胜/亏损) | 交易中心 |
| `OpenTradeAssistant` | 进行中交易助手 | 交易中心 |
| `ReviewHintsPanel` | 建议补充执行 | 交易中心 |
| `DailyActionsPanel` | 每日行动 Actions | 交易中心 |
| `CompactCalendarHeatmap` | 日历热图 | 复盘分析 |
| `AccountSummaryCards` | 账户资金概览 | 复盘分析 |
| `CapitalGrowthChart` | 资金增长曲线 | 复盘分析 |
| `MarketCyclePerformance` | 不同市场环境表现 | 复盘分析 |
| `TuitionCostPanel` | 错误的代价 (学费统计) | 复盘分析 |
| `AnalyticsSuggestion` | 💡 系统建议 | 复盘分析 |
| `StrategyAttributionPanel` | 🎯 策略归因 (Top) | 复盘分析 |
| `StrategyRPerformancePanel` | 📊 策略R值执行分析 | 复盘分析 |
| `AnalyticsInsightPanel` | 🎙 交易洞察 (心态/Top) | 复盘分析 |
| `WinLossAnalysisPanel` | 📊 交易洞察 | 复盘分析 |
| `AnalyticsGallery` | 🖼 最新复盘 | 复盘分析 |
| `CoachFocus` | 教练焦点 | 策略学习 |
| `StrategyRepository` | 策略仓库 | 策略学习 |

---

## 二、深度 UX/UI 问题诊断

### 问题1: 数据碎片化 - 相同实体在多处重复展示

**现象**: 同一个"策略"在 5+ 个地方被分别展示

| 位置 | 展示内容 | 问题 |
|------|----------|------|
| 策略归因 (Top) | 策略名 + 盈亏 | 用户要跳到这里看盈亏 |
| R值执行分析 | 策略名 + 推荐R/实际R | 用户要跳到这里看R值 |
| 交易洞察 Top Strategies | 策略名 + 胜率 | 用户要跳到这里看胜率 |
| 策略仓库 | 策略名 + 使用次数 | 用户要跳到这里看使用情况 |
| 进行中交易助手 | 策略名 + 匹配度 | 用户要跳到这里看推荐 |

**根本问题**: 用户想了解一个策略的全貌，却需要在 5 个面板之间跳转

**专业做法**: **策略中心化展示** - 一个策略卡片/表格，展示所有维度数据（盈亏、R值、胜率、使用次数）

---

### 问题2: 视觉节奏混乱 - 没有明确的信息层级

**从截图观察**:

| 区域 | 问题 |
|------|------|
| 复盘分析顶部 | 日历热图很小(信息密度高)，但视觉权重不够 |
| 系统建议 | 红色警告很刺眼，但实际是"提示"而非"错误" |
| 策略归因列表 | 每行信息量相同，无法快速识别重点 |
| 交易洞察 | 两个并排的小面板，数据挤在一起 |

**专业做法**: 
- **一级信息**(最大、最亮): 当前状态、关键 KPI
- **二级信息**(中等): 需要关注的洞察
- **三级信息**(最小): 详细数据/历史

---

### 问题3: 交互反馈缺失 - 用户不知道发生了什么

**从截图 "进行中交易助手" 观察**:

| 问题 | 表现 |
|------|------|
| 多个 Tab 按钮 | BTC #1, BTC #2, ES #3... 用户不清楚当前选中的是哪个 |
| 表单填写 | "建议补充执行: 入场价格" - 填完后界面刷新，用户丢失位置 |
| 策略推荐 | 显示 100% 匹配，但用户不知道为什么是这个策略 |
| 下一步操作 | 填完一个字段后，要找下一个字段的位置 |
| **填写框消失** | 填写完后，输入框消失了，想修改很麻烦 |
| **推荐联动变化** | 改完前面的属性后，后面的策略推荐会变，用户不知道 |

**专业做法**:
- **固定表单区域** - 表单输入区不因内容变化而跳动
- **步骤指示器** - 显示 "正在填写: 第2项/共7项"
- **即时反馈** - 保存成功时显示 ✓ 提示
- **保留编辑入口** - 填写完后仍可点击修改
- **联动提示** - 当推荐结果因属性变化而更新时，显示提示

> ✅ **已通过方案: 内联编辑表格 + 进度指示**
> - 所有字段以表格形式显示，点击单元格编辑
> - 推荐值显示在旁边，一键应用
> - 底部进度条显示完成度 (已填: 2/7 ████░░░░░░ 28%)
> - 填完有 ✓ 标记

---

### 问题12: 筛选器没有全局影响

**用户反馈**: 交易中心顶部的"账户类型"和"时间范围"没有影响下面的模块

**代码验证**:
```
accountType 影响: ✅ TodayKpiCard (统计)
                  ✅ filteredTrades (筛选后的交易)
                  ❌ OpenTradeAssistant (使用 openTrades，不受筛选影响)
                  ❌ ReviewHintsPanel
                  ❌ DailyActionsPanel
```

**根本问题**: 筛选器只影响 KPI 统计，不影响交易助手

**建议**: 要么让筛选器影响所有模块，要么明确标注"此模块显示所有未完成交易"

> ✅ **已通过方案: 全局筛选 + 标签标注**
> - 筛选器影响所有模块（包括交易助手）
> - 每个交易卡片有 [实盘]/[模拟]/[回测] 标签
> - 颜色区分：🟢实盘 🔵模拟 ⚪回测
> - 底部提示当前筛选状态

---

### 问题13: 推荐功能分散，数据使用不统一

**统计的推荐功能**:

| 功能 | 位置 | 使用的数据 | 推荐逻辑 |
|------|------|-----------|----------|
| 策略推荐 | OpenTradeAssistant | trades + strategyIndex | `matchStrategiesV2()` |
| 属性推荐 | OpenTradeAssistant | strategyIndex | `recommendNextAttribute()` |
| 系统建议 | Analytics + (隐含TradingHub) | trades | `computeHubSuggestion()` |
| 市场状态推荐 | 智能预测导航 | marketState | `market-state-machine.ts` |
| Top Strategies | Analytics InsightPanel | trades | `computeTopStrategiesFromTrades()` |
| SRS 推荐 | ContextLearnWidget | openTrade + todayContext | `SRSQueryService` |

**问题**:
- 6 个推荐功能，使用 6 种不同的数据源和逻辑
- 有些推荐使用筛选后的数据，有些使用全部数据
- 推荐结果之间没有联动

---

### 问题14: 统计数据梳理

**插件收集的核心数据**:

| 数据 | 来源 | 被谁使用 |
|------|------|----------|
| trades | 交易日志文件 | 几乎所有模块 |
| strategyIndex | 策略卡片文件 | 策略推荐、匹配 |
| todayContext | 每日计划 | 交易中心、SRS |
| memory | SRS 数据 | 学习模块 |
| course | 课程进度 | 学习模块 |
| enumPresets | 属性值预设 | 表单填写 |

**派生计算**:

| 计算 | 函数 | 使用 trades 的方式 |
|------|------|-------------------|
| 日度聚合 | `computeDailyAgg()` | 按日期分组 |
| 策略归因 | `computeStrategyAttribution()` | 按策略分组 |
| 学费分析 | `computeTuitionAnalysis()` | 按错误分组 |
| 心态分析 | `computeMindsetFromRecentLive()` | 最近 N 笔 |
| 系统建议 | `computeHubSuggestion()` | 综合分析 |



### 问题4: 布局没有视觉韵律 - 大小长短不一

**从截图观察**:

| 区域 | 问题 |
|------|------|
| 策略仓库 | 每个策略条目高度不同(有的有胜率有的没有) |
| 交易洞察 | 左右两个面板宽度相同但内容量不同 |
| 复盘画廊 | 图片大小和下方文字信息不协调 |

**专业做法**:
- **网格系统** - 所有卡片基于统一的网格尺寸
- **一致的高度** - 同类型卡片高度相同
- **对齐** - 内容左对齐，数字右对齐

---

### 问题5: 功能没有按工作流排布

**交易员的真实工作流**:
```
1. 开盘前 → 查看计划、市场状态
2. 交易中 → 执行、记录
3. 收盘后 → 复盘、学习
```

**当前界面问题**:
- 交易中心: "智能预测导航" 在 "进行中交易助手" 上面，但交易时应该先看未完成的交易
- 复盘分析: 图表太多，没有按"先看什么后看什么"排序
- 策略学习: SRS 按钮在底部，容易被忽略

---

### 问题6: 颜色语义不一致

| 颜色 | 当前使用 | 问题 |
|------|----------|------|
| 红色 | 亏损、警告、错误、FOMO | 太多含义，用户无法快速区分 |
| 绿色 | 盈利、成功、完美执行 | 相对一致 |
| 黄色 | 警告、有点起伏 | 与红色警告容易混淆 |

---

### 问题7: 空状态没有引导

当用户没有数据时（例如新用户）:
- 今日交易: 显示 0, 0, 0 - 用户不知道该做什么
- 策略仓库: 没有提示如何添加第一个策略

---

## 三、其他模块深度问题诊断

### 问题8: 数据管理 Tab - 功能堆砌，缺乏引导

**从截图观察**:

| 区域 | 问题 |
|------|------|
| 上帝模式 (God Mode) | 名字很酷但不知道是干什么的，缺乏描述 |
| 原始数据明细 | 表格字段太多，列宽不一致，"unknown" 显示太多 |
| Auto Archive | 和其他功能视觉权重相同，但其实是"危险操作" |
| 系统健康度 + 系统诊断 | 两个功能名字相似，用户不知道区别 |
| 检查器 21 Issues | 红色数字很刺眼，但用户不知道如何处理 |
| 分布摘要 + 标签全景 | 两个都是"统计"，但展示方式完全不同 |

**根本问题**:
- 没有按"常用 → 偶尔用 → 高级/危险"排序
- 功能名称不直观（"上帝模式"、"元数据医生"）
- 缺乏使用场景说明

---

### 问题9: 复盘分析 Tab - 图表堆叠，重点不明

**从截图观察**:

| 区域 | 问题 |
|------|------|
| 日历热图 | 信息密度非常高，但尺寸太小 |
| 账户资金概览 | 三个账户卡片占了大量空间，但 Backtest 显示 0$ 无意义 |
| 资金增长曲线 | 三条线(Live/模拟/回测)挤在一起，颜色区分不明显 |
| 不同市场环境表现 | 只显示两个数字，占用空间却很大 |
| 系统建议 | 红色警告框，但内容是"提示"而非"错误" |

**具体问题举例**:
1. **Backtest 0$** - 既然是 0，为什么还要显示？浪费空间
2. **Unknown -$33.20** - 这是什么？既是"未知"又有金额，自相矛盾
3. **三条资金曲线** - 如果只关心 Live，其他两条是干扰

**专业做法**:
- 默认只显示 Live 账户，其他账户可选择显示
- 0 值或 Unknown 数据应该隐藏或弱化
- 图表应该可切换单独查看

---

### 问题10: 策略学习 Tab - 结构清晰但细节问题

**从截图观察**:

| 区域 | 问题 |
|------|------|
| 教练焦点 | "基础 144 / 多选 37 / 填空 48" - 不知道这些数字意味什么进度 |
| 随机抽题 | 5个问题挤在一起，文字被截断 |
| 课程进度 | "进度: 14/242" 字太小，不够醒目 |
| 策略仓库 | 策略列表太长，没有分组或筛选 |
| 策略详情 | "R/R: 2:1 - 3:1" 和 "胜率: 0%" 混在一起，层级不清 |
| 市场周期筛选 | "强趋势 / 弱趋势 / 交易区间" 是互斥的，但展示成平铺 |

**根本问题**:
- 学习进度不够可视化（没有进度条）
- 策略列表没有分类/搜索
- 相关信息（胜率、R/R、使用次数）分散显示

---

### 问题11: 交易中心智能预测导航 - 信息过载

**从截图观察**:

| 区域 | 问题 |
|------|------|
| 状态描述 | "通道式上涨: 深度回调(Deep Pullback)常见..." 文字太长 |
| 三个警告 | ⚠️ 警告并排，颜色相同，无法区分优先级 |
| 推荐策略 | "牛通道做多 / 楔形态 / 高2(H2) / 三角形" 太多选择 |
| 通道信息 | "通道下沿 / 通道上沿" 只是文字，没有可视化 |

**根本问题**:
- 警告太多等于没有警告（用户忽略）
- 文字描述太长，没有人会完整阅读
- 缺乏可视化（通道应该用图示而非文字）

---

## 四、按 Tab 汇总的问题清单

| Tab | 问题数 | 核心问题 |
|-----|--------|----------|
| **交易中心** | 4 | 表单跳动、信息过载、布局顺序 |
| **复盘分析** | 5 | 图表堆叠、数据碎片化、无效数据显示 |
| **策略学习** | 3 | 进度不可视化、策略列表无分组 |
| **数据管理** | 4 | 功能名称不直观、缺乏引导、危险操作不突出 |

---

## 五、用户反馈与设计约束 ⚠️

> 以下是用户明确提出的约束，优化时**必须遵守**

### 约束1: 不使用折叠
- **原因**: 功能折叠后可能想不到用了
- **替代方案**: 使用"视觉分组"（颜色/边框）而非隐藏

### 约束2: 不增加 Tab 数量
- **原因**: Tab 过多增加认知负担
- **替代方案**: 在现有 Tab 内优化布局

### 约束3: 系统建议需区分场景
- **交易中心的建议**: 关注"现在应该做什么"（实时决策）
- **复盘分析的建议**: 关注"过去做了什么，如何改进"（历史回顾）
- **当前问题**: 两处使用同一个函数 `computeHubSuggestion()`，逻辑相同
- **改进方向**: 复盘分析应使用基于历史数据的分析逻辑

### 约束4: 保留所有功能可见
- **原因**: 用户担心优化后功能被隐藏或遗忘
- **原则**: 可以重新排列，但不能隐藏核心功能

### 约束5: 按功能逻辑从上往下排列
- **原因**: 当前布局没有按使用顺序排列
- **原则**: 先用的放上面，后用的放下面
- **示例**:
  - 交易中心: 当前持仓 → 执行辅助 → 市场状态
  - 复盘分析: 关键 KPI → 详细分析 → 历史画廊

---

## 六、待补充考量（详细展开）

### 考量1: 移动端/窄屏适配

**当前问题**:
- 复盘分析使用双列布局，窄屏幕可能挤压变形
- 交易中心的卡片没有响应式断点
- 表格在小屏幕上可能需要横向滚动

**影响范围**:
- iPad 竖屏、手机、窄窗口

**建议**:
- 添加媒体查询断点（如 768px）
- 窄屏时改为单列布局
- 表格改为卡片列表

---

### 考量2: 性能问题

**当前问题**:
- `trades` 数据在多个组件中被重复计算
- 每个面板单独调用 `compute*` 函数，可能重复遍历同一数据集
- Tab 切换时可能触发不必要的重算

**影响范围**:
- 数据量大时（1000+ 交易）可能卡顿

**建议**:
- 在 Context 层缓存计算结果
- 使用 `useMemo` 确保不重复计算
- 添加加载状态指示器

---

### 考量3: 状态持久化

**当前问题**:
- 切换 Tab 后，筛选条件可能重置
- 日历选择的日期可能丢失
- 表单填写中途切换后内容丢失

**影响范围**:
- 用户在多个 Tab 之间切换时体验不佳

**建议**:
- 将筛选状态保存到 Context
- 表单使用受控组件 + 状态提升
- 添加"离开提示"防止数据丢失

---

### 考量4: 错误处理与边界情况

**当前问题**:
- 数据为空时显示 `0` 或 `Unknown`，不直观
- 网络/文件读取失败时界面如何表现？
- 策略匹配失败时没有友好提示

**影响范围**:
- 新用户（无数据）体验差
- 系统异常时用户不知所措

**建议**:
- 设计空状态界面（Empty State）
- 添加错误边界组件（Error Boundary）
- 失败时显示重试按钮

---

## 七、优化方向（待逐条讨论）

### 方向A: 策略数据集中化
- [ ] 创建"策略仪表盘" - 一个表格展示策略的所有维度
- [ ] 减少策略在多处重复出现

### 方向B: 重新设计交易中心布局
- [ ] 顶部: 当前持仓状态（最重要）
- [ ] 中部: 执行辅助（表单固定位置）
- [ ] 底部: 市场状态（参考信息）

### 方向C: 统一视觉规范
- [ ] 定义统一的卡片尺寸网格
- [ ] 统一颜色语义（红=亏损/错误，黄=警告，绿=盈利/成功）
- [ ] 统一信息层级（标题、正文、辅助信息）

### 方向D: 优化交互体验
- [ ] 表单填写时显示进度指示器
- [ ] 操作成功后显示反馈
- [ ] 固定表单区域，防止跳动

### 方向E: 简化复盘分析
- [ ] 默认只显示 Live 数据，其他可选
- [ ] 隐藏 0 值和 Unknown 数据
- [ ] 合并同类图表（策略维度合并）

### 方向F: 优化数据管理
- [ ] 重命名功能（"上帝模式" → "批量编辑"）
- [ ] 危险操作用红色边框标识
- [ ] 添加功能说明 tooltip

---

## 八、交互重新设计建议

| 当前交互 | 问题 | 重新设计建议 |
|----------|------|--------------|
| 进行中交易填写 | 填写框消失，改不了 | 改为**内联编辑表格** - 点击单元格直接编辑 |
| 策略推荐按钮 | 点了不知道发生了什么 | 添加**确认弹窗** - "是否应用策略 xxx？" |
| 多交易切换 | Tab 按钮太多，看不清 | 改为**下拉列表** - 显示当前选中，点击展开 |
| 表单字段跳动 | 填完一个找下一个 | 改为**固定位置表单** - 所有字段一次显示 |
| 筛选器 | 只影响部分模块 | 改为**全局筛选** - 或明确标注影响范围 |

---

## 九、图形展示优化建议

| 当前图形 | 数据特点 | 更合适的图形 |
|----------|----------|--------------|
| 资金增长曲线 | 时间序列 + 多账户 | ✅ 折线图对的，但应**可切换单独查看** |
| 日历热图 | 按日统计 | ✅ 热图合适 |
| 策略归因 | 排名数据 | 建议改为**水平条形图** - 更直观 |
| 市场环境表现 | 分类统计 | 建议改为**柱状图** - 而非纯数字 |
| 心态分析 | 比例数据 | 建议改为**仪表盘/进度条** |
| Top Strategies | 排名 + 百分比 | 建议改为**环形图或条形图** |

---

## 十、Al Brooks 价格行为方法论服务缺失分析

| 领域 | 当前服务 | 缺失/不足 |
|------|----------|-----------|
| **形态识别** | 策略卡片有形态字段 | ❌ 没有形态可视化，只是文字 |
| **市场周期** | 智能预测导航 | ⚠️ 有但信息过载 |
| **信号K验证** | OpenTradeAssistant 有 | ⚠️ 验证逻辑简单，只是文字匹配 |
| **入场/出场规则** | 策略卡片有 | ❌ 没有检查清单式交互 |
| **交易日志与笔记联动** | 支持打开文件 | ❌ 没有从笔记到控制台的快捷入口 |
| **复盘截图管理** | 画廊展示 | ⚠️ 图片没有标注功能 |
| **每日计划** | 曾有 PlanWidget | ❌ 已移除？无法设置今日计划 |
| **回测 vs 实盘对比** | 分开显示 | ❌ 没有对比分析视图 |

**潜在新功能建议**:
- [ ] 形态图示库 - 可视化展示常见价格形态
- [ ] 入场检查清单 - 交互式确认每个条件
- [ ] 笔记快捷入口 - 从侧边栏一键打开控制台
- [ ] 每日计划模块 - 设置今日关注市场/策略
- [ ] 回测对比视图 - 并排展示回测和实盘数据

---

*报告完成！共 14 个问题 + 5 条约束 + 6 个优化方向 + 6 个专项分析*

---

## 十一、学习→策略→交易流程分析

| 阶段 | 流程 | 当前支持 | 问题 |
|------|------|----------|------|
| **1. 学习** | 视频/书籍 → 笔记 | ✅ Obsidian 笔记 | — |
| **2. 标签** | 添加标签 | ✅ frontmatter tags | — |
| **3. 学习卡片** | 创建 SRS 卡片 | ✅ CoachFocus + SRS 插件 | ⚠️ 入口不明显 |
| **4. 策略总结** | 笔记 → 策略卡片 | ✅ Templates 模板 | ⚠️ 手动操作 |
| **5. 策略识别** | 插件读取策略 | ✅ `strategyIndex` | — |
| **6. 策略推荐** | 交易时匹配 | ✅ `matchStrategiesV2()` | ⚠️ 匹配逻辑需优化 |
| **7. 复盘** | 交易 → 复盘笔记 | ✅ 画廊 | ⚠️ 缺少标注功能 |

**流程断点**:
- ❌ **笔记 → 策略卡片** 没有自动化，需要手动创建
- ❌ **策略卡片** 缺少必填字段检查
- ❌ **从笔记到控制台** 没有快捷入口

---

## 十二、TradeCat 项目可用模块评估

> 项目地址: https://github.com/tukuaiai/tradecat

| 模块 | TradeCat 功能 | 对我们的价值 | 集成难度 |
|------|--------------|-------------|----------|
| **34个技术指标** | EMA/MACD/RSI/ATR/布林带等 | ⚠️ 价格行为交易不太依赖指标 | 低 |
| **K线历史数据** | 3.73亿条 2018-至今 | ✅ 可用于回测对比 | 中 |
| **形态识别** | TA-Lib 61种蜡烛 | ✅ 可用于信号K验证 | 中 |
| **信号检测引擎** | 129条规则 | ⚠️ 需要根据 Al Brooks 方法定制 | 高 |
| **Telegram Bot** | 排行榜/信号推送 | ✅ 可考虑通知推送 | 中 |
| **AI 分析 (Wyckoff)** | 市场结构分析 | ⚠️ Wyckoff 和 Al Brooks 有差异 | 高 |
| **TimescaleDB** | 时序数据库 | ❌ Obsidian 插件不需要 | — |

**推荐使用**:
- [ ] 形态识别 (TA-Lib) - 增强信号K验证
- [ ] K线历史数据 - 回测分析
- [ ] 通知推送 - Telegram 集成

---

## 十三、Obsidian 功能限制分析

| 功能 | Obsidian 限制 | 解决方案 |
|------|---------------|----------|
| **实时 K 线图表** | 无法嵌入 TradingView | iframe 或外部链接 |
| **历史数据回测** | 没有数据存储 | 外部数据源/API |
| **自动交易执行** | 无法连接交易所 | 外部服务 |
| **实时价格推送** | 无 WebSocket | 外部服务 |
| **图片标注** | 基础功能 | Excalidraw 插件 |

**可能需要的外部插件/服务**:
- [ ] Excalidraw - 图片标注
- [ ] Dataview - 高级数据查询
- [ ] TradingView - 图表链接（非嵌入）
- [ ] TradeCat API - 历史数据获取

---

## 📋 问题分类汇总

### A. UX/UI 问题 (14个)
1. 数据碎片化
2. 视觉节奏混乱
3. 交互反馈缺失
4. 布局无韵律
5. 功能未按工作流排布
6. 颜色语义不一致
7. 空状态没有引导
8. 数据管理功能堆砌
9. 复盘分析图表堆叠
10. 策略学习细节问题
11. 智能预测导航信息过载
12. 筛选器没有全局影响
13. 推荐功能分散
14. 统计数据使用不统一

### B. 设计约束 (5条)
1. 不使用折叠
2. 不增加 Tab 数量
3. 系统建议需区分场景
4. 保留所有功能可见
5. 按功能逻辑从上往下排列

### C. 待补充考量 (4条)
1. 移动端/窄屏适配
2. 性能问题
3. 状态持久化
4. 错误处理与边界情况

### D. 优化方向 (6个)
- A: 策略数据集中化
- B: 重新设计交易中心布局
- C: 统一视觉规范
- D: 优化交互体验
- E: 简化复盘分析
- F: 优化数据管理

### E. 专项分析 (6个)
- 交互重新设计建议
- 图形展示优化建议
- Al Brooks 方法论服务缺失
- 学习→策略→交易流程
- TradeCat 模块评估
- Obsidian 功能限制

---

## 十四、V3 智能推荐引擎设计方案 ✅ 已通过

### 当前数据资产

| 数据源 | 数量 | 可用于 |
|--------|------|--------|
| 策略仓库 | 12+ 策略卡片 | 策略匹配、入场/止损建议 |
| Categories/Al brooks | 362 条笔记 | 知识库、概念解释 |
| 属性值预设 | 195 行枚举 | 表单选项、验证 |
| 交易记录 | 历史交易 | 个性化推荐 |
| SRS 卡片 | 学习进度 | 薄弱点补强 |

### V3 引擎升级点 ✅ 已完成

| 升级 | 说明 | 状态 |
|------|------|------|
| 移除硬编码 | 智能预测导航改用策略仓库动态推荐 | ✅ 完成 |
| 知识关联 | 推荐策略时附带相关笔记链接（可点击） | ✅ 完成 |
| 学习进度关联 | SRS interval 影响推荐权重(胜率70%+SRS30%) | ✅ 完成 |
| 历史表现个性化 | 胜率高的策略提高推荐权重 | ✅ 完成 |

---

## 📋 本次优化实施计划

### ✅ 已通过方案

| 问题 | 方案 | 状态 |
|------|------|------|
| 问题3: 交互反馈缺失 | 内联编辑表格 + 进度指示 | ✅ 待实施 |
| 问题5: 功能未按工作流排布 | 重新排列：KPI→助手→行动→预测 | ✅ 待实施 |
| 问题12: 筛选器没有全局影响 | 全局筛选 + 标签标注 | ✅ 待实施 |
| V3引擎阶段1-2 | 合并推荐区域，移除硬编码 | ✅ 待实施 |

### 实施优先级

1. **阶段1**: 问题5 - 重新排列交易中心布局
2. **阶段2**: 问题12 - 全局筛选 + 标签标注
3. **阶段3**: 问题3 - 内联编辑表格
4. **阶段4**: V3引擎 - 合并推荐区域
V3 智能推荐引擎设计方案 🚀
当前数据资产
数据源	数量	可用于
策略仓库	12+ 策略卡片	策略匹配、入场/止损建议
Categories/Al brooks	362 条笔记	知识库、概念解释
属性值预设	195 行枚举	表单选项、验证
交易记录	你的历史交易	个性化推荐
SRS 卡片	学习进度	薄弱点补强
V3 引擎愿景：多源数据整合
┌─────────────────────────────────────────────┐
│              V3 智能推荐引擎                 │
├─────────────────────────────────────────────┤
│                                             │
│  数据输入层                                  │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐       │
│  │策略仓库  │ │历史交易  │ │Categories│       │
│  │(卡片)   │ │(表现)   │ │(知识库) │       │
│  └────┬────┘ └────┬────┘ └────┬────┘       │
│       │           │           │             │
│       ▼           ▼           ▼             │
│  ┌─────────────────────────────────────┐   │
│  │          统一知识图谱               │   │
│  │  策略 ←→ 形态 ←→ 市场周期 ←→ 概念  │   │
│  └─────────────────────────────────────┘   │
│                    │                        │
│                    ▼                        │
│  ┌─────────────────────────────────────┐   │
│  │          推荐计算层                 │   │
│  │  1. 策略匹配 (当前: V2)             │   │
│  │  2. 历史表现加权                   │   │
│  │  3. 知识关联 (NEW!)               │   │
│  │  4. 学习进度关联 (NEW!)           │   │
│  └─────────────────────────────────────┘   │
│                    │                        │
│                    ▼                        │
│  ┌─────────────────────────────────────┐   │
│  │          输出                       │   │
│  │  • 推荐策略 + 置信度               │   │
│  │  • 相关知识笔记链接                │   │
│  │  • 需要复习的 SRS 卡片             │   │
│  └─────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
关键升级点
升级	说明	价值
知识关联	推荐策略时，附带相关 Categories 笔记链接	不懂时一键查看原理
学习进度关联	如果某策略你 SRS 复习失败率高，降低推荐权重或提示复习	避免用你不熟悉的策略
历史表现个性化	你用某策略胜率高，提高其推荐权重	越用越准
数据越多越智能	只要按模板添加数据，自动纳入推荐系统	积累即资产
落地路径
阶段	任务	优先级
阶段1	合并推荐区域，统一使用 V2 引擎	🔴 高
阶段2	移除智能预测导航的硬编码，改用策略仓库	🔴 高
阶段3	添加历史表现加权（当前 V2 已有基础）	🟡 中
阶段4	添加 Categories 知识关联	🟡 中
阶段5	添加 SRS 学习进度关联	🟢 低

可能的小偏移 ⚠️
设计方案提到"需要复习的SRS卡片"作为输出，但当前只用 interval 影响排序，没有独立显示"建议复习"提示
统一知识图谱（策略↔形态↔市场周期↔概念）还没完全实现，目前只是简单的字符串匹配
---

*实施开始: 2026-01-20*

## 2026-01-20 优化总结与经验复盘

本次优化集中在 **UI 降噪**、**交互引导** 与 **V3 引擎的多源融合**。

### 1. UI 交互：从"展示"转向"引导"
- **聚合上下文**：旧版将"建议完善"与"执行填写"分离，导致视线上下跳动。新版将其合并为统一的"交易情境框"，上方提示"缺什么"，下方提示"做什么"，逻辑更连贯。
- **降噪分组**：多交易标签改用 **Ticker 分组** (如 `ES (2笔)`)，在多单并行时显著减少了视觉干扰，突出了"持仓结构"而非"单据列表"。
- **序列化引导**：恢复了属性填写的**顺序逻辑** (市场周期 → 方向 → ...)。在复杂表单中，"一次只问一个问题"比"展示所有空项"更能降低用户的心理负担。
- **扩展性设计**：推荐值从"平铺按钮"改为"下拉菜单"，不仅节省空间，更为未来引入更多精细化选项（如数十种K线形态）预留了扩展能力。

### 2. V3 引擎验证：知识图谱的雏形
本次实战证明了 **"交易控制台 = 知识库 + 执行层"** 的设计理念是可行的。我们成功打通了以下数据链路：

| 链路 | 实现方式 | 价值 |
|------|----------|------|
| **策略 ↔ 历史** | 计算相关策略的胜率 | 优先推荐"你擅长"的策略 |
| **策略 ↔ 知识** | 关联 Categories 笔记链接 | 遇到不懂的策略，一键查阅原理 |
| **策略 ↔ 学习** | 关联 SRS 记忆卡片掌握度 | 避免实盘使用"经常忘记/不熟悉"的策略 |
| **当前 ↔ 策略** | 匹配市场周期与方向 | 确保推荐符合当下的行情背景 |

### 3. 下一步建议
通过本次重构，基础框架（V3 引擎 + 统一 UI）已稳固。后续可专注于：
1.  **数据质量治理**：V3 引擎的威力取决于数据的准确性（如策略卡片的 metadata 填充）。
2.  **复盘闭环**：在交易结束后，自动生成包含"当时推荐了什么 vs 你做了什么"的对比报告。

