# 从 Telegram 到 Obsidian：交互迁移计划

## 🎯 目标
将 TradeCat 目前在 Telegram (小飞机) 上提供的核心交互功能（查信号、看趋势、AI 分析）移植到 **Obsidian 插件** 中。
让 Obsidian 成为真正的"交易员控制台"，不再依赖 Telegram。

## 现状分析
- **Telegram (现有)**:
    - 优点: 手机随时看，推送及时。
    - 缺点: 交互单一 (命令式)，图表展示弱，无法联动笔记。
- **Obsidian 插件 (现有)**:
    - 状态: 仅能通过 `api-gateway` 获取 K 线并画出简易图表。
    - 缺失: 还没有接入 MACD/RSI 指标数据，也没有展示 AI 信号和形态识别结果。

## 迁移方案

### 第一步：后端接口升级 (Backend: api-gateway)
我们需要让 `api-gateway` 把 Telegram 能看到的东西都吐出来。
1.  **暴露指标数据**: 读取 `indicators.db` 中的 MACD, RSI, 布林带数据。
    - *新增接口*: `GET /api/v1/indicators/{symbol}`
2.  **暴露信号/形态**: 读取 `signal-service` 生成的报警信号。
    - *新增接口*: `GET /api/v1/signals/{symbol}` (对应 Telegram 的信号推送)
3.  **暴露 AI 分析**: 对接 `ai-service`。
    - *新增接口*: `POST /api/v1/analysis` (让 Obsidian 也能触发 AI 解读)

### 第二步：Obsidian 前端开发 (Frontend)
在 Obsidian 侧边栏构建更丰富的 UI：
1.  **多周期仪表盘**: 不止显示 K 线，还要像 Telegram 卡片一样显示 "H4: ⬆️ Bullish", "M15: ⬇️ Pullback"。
2.  **信号列表**: 一个实时刷新的列表，显示 "H2 Setup on ES=F", "Wedge Top on BTC"。
3.  **交互式图表**: 使用 Lightweight Charts (现有)，但把后端算好的支撑阻力位、趋势线画在图上。

## 难点评估 (Feasibility)
- **难度**: 中等 (Medium)。
- **工作量**:
    - 后端: 主要是写 SQL 查询 `indicators.db`，逻辑简单。
    - 前端: 需要写 React 组件来解析这些 JSON 数据并美观展示。
- **结论**: **完全可行**。这是将 TradeCat "私有化/专业化" 的必经之路。

## 建议路线
我们可以先做一个**"市场扫描仪" (Market Scanner)** 面板：
左边是您关注的列表 (Crypto + 美股)，右边显示该标的的 ** Al Brooks 信号卡片**（抄袭 Telegram 的设计但做得更好看）。
