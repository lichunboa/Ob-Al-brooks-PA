# 📋 系统重构分析报告 (v5.0)

> [!abstract] 核心目标
> **简约化 (Minimalism)**: 减少视觉噪点，将 13 个分散视图整合为 3 大核心枢纽。
> **模块化 (Modularity)**: 建立清晰的 "学习 -> 交易 -> 管理" 闭环。

---

## 1. 现状诊断 (Current State)

当前 v4.0 版本虽然功能强大，但存在以下问题：

1.  **视图碎片化**: 首页包含 13 个独立的 `dv.view` 调用，导致页面过长，信息密度过低。
2.  **逻辑分散**:
    - "策略表现" (`pa-view-strategy`) 和 "市场周期表现" (`pa-view-cycle`) 分离，难以进行综合归因分析。
    - "今日监控" (`pa-view-today`) 和 "快速行动" (`pa-view-actions`) 分离，导致交易时的视线在屏幕上下跳动。
3.  **管理冗余**: 3 个管理视图 (`inspector`, `schema`, `manager`) 占据了宝贵的主屏空间，但使用频率较低。

---

## 2. 重构方案 (Consolidation Plan)

我们将系统重构为 **三大核心枢纽 (Hubs)**。

### 🏛️ 枢纽一：学习中心 (Learning Hub)

> **整合逻辑**: 将静态知识与动态策略库结合。

| 原模块             | 功能     | 处理方式                         |
| :----------------- | :------- | :------------------------------- |
| `pa-view-course`   | 课程进度 | **保留**，作为顶部概览           |
| `pa-view-memory`   | 记忆宫殿 | **合并**，放入 "知识库" 选项卡   |
| `pa-view-playbook` | 策略仓库 | **合并**，放入 "策略库" 选项卡   |
| `pa-view-gallery`  | 图表画廊 | **合并**，作为策略库的侧边栏展示 |

**新视图**: `pa-view-hub-learning.js` (包含 课程 + 策略 + 记忆)

### ⚔️ 枢纽二：交易中心 (Trading Hub)

> **整合逻辑**: 打造 "一屏流" 交易体验，左侧监控，右侧执行。

| 原模块            | 功能      | 处理方式                         |
| :---------------- | :-------- | :------------------------------- |
| `pa-view-today`   | 今日看板  | **核心**，占据左侧 2/3 区域      |
| `pa-view-actions` | 快速行动  | **合并**，嵌入到看板右侧顶部     |
| `pa-view-trend`   | 趋势/心态 | **合并**，作为看板底部的迷你指标 |

**新视图**: `pa-view-hub-trading.js` (包含 今日数据 + 快捷按钮 + 实时心态)

### 📊 枢纽三：数据中心 (Analytics Hub)

> **整合逻辑**: 将所有分析图表聚合，提供深度的复盘视角。

| 原模块              | 功能     | 处理方式                               |
| :------------------ | :------- | :------------------------------------- |
| `pa-view-account`   | 账户资金 | **核心**，作为顶部总览                 |
| `pa-view-strategy`  | 资金曲线 | **合并**，Tab 1: 增长曲线              |
| `pa-view-cycle`     | 周期表现 | **合并**，Tab 2: 环境分析              |
| `pa-view-tuition`   | 错误统计 | **合并**，Tab 3: 归因分析              |
| `pa-view-inspector` | 数据巡检 | **折叠**，放入底部的 "系统健康" 折叠块 |

**新视图**: `pa-view-hub-analytics.js` (包含 账户 + 所有分析图表)

---

## 3. 视觉升级预览 (Visual Preview)

新的控制台将只有 **3 个主要区块**，而不是原来的 13 个。

### [Block 1] ⚔️ 交易台 (Trader Desk)

_(盘中常驻)_

- **左**: 实时盈亏 / 胜率 / 连胜连败
- **右**: [开多] [开空] [平仓] [记录] (快捷按钮组)
- **底**: 实时 R 值柱状图 (原 `pa-view-trend`)

### [Block 2] 📊 分析室 (War Room)

_(盘后复盘)_

- **顶**: 账户总资金 / 月度热力图 (原 `pa-view-account`)
- **中**: [资金曲线] | [策略表现] | [周期分析] (Tab 切换)

### [Block 3] 📚 图书馆 (Library)

_(盘前/周末)_

- **左**: 课程进度条
- **右**: 待复习的闪卡 / 推荐的策略

---

## 4. 下一步行动 (Action Items)

1.  **创建 v5.0 仪表盘原型**: 使用 Obsidian 的 Callout 和 Columns 语法先行模拟布局。
2.  **开发 Hub 脚本**: 逐步将分散的 JS 逻辑合并到新的 Hub 脚本中。
3.  **清理旧脚本**: 待新脚本稳定后，归档旧的 `pa-view-*.js` 文件。
