# Implementation Log: Task 1

**Summary:** 为 TradeIndex 增加默认目录 denylist（Templates/、Exports/、.obsidian/），并在初始扫描与增量索引时统一应用，避免模板/导出文件污染交易统计与列表。

**Timestamp:** 2026-01-03T07:24:59.964Z
**Log ID:** 8976d9df-c19b-4941-8f71-20f4613dc55f

---

## Statistics

- **Lines Added:** +22
- **Lines Removed:** -0
- **Files Changed:** 2
- **Net Change:** 22

## Files Modified
- .obsidian/plugins/al-brooks-console/src/platforms/obsidian/obsidian-trade-index.ts
- .spec-workflow/specs/al-brooks-console-stabilization/tasks.md

## Files Created
_No files created_

---

## Artifacts

### Functions

#### ObsidianTradeIndex.shouldIndexFile
- **Purpose:** 默认排除 Templates/、Exports/、.obsidian/ 等路径前缀，防止非交易数据进入 TradeIndex。
- **Location:** .obsidian/plugins/al-brooks-console/src/platforms/obsidian/obsidian-trade-index.ts:74
- **Signature:** (path: string) => boolean
- **Exported:** No

### Integrations

#### Integration
- **Description:** TradeIndex 初始扫描与单文件 reindex 统一应用路径 denylist，确保 UI/统计读取的 trades 不包含模板/导出/插件内部文件。
- **Frontend Component:** (n/a)
- **Backend Endpoint:** (n/a)
- **Data Flow:** Vault 扫描/事件触发 → ObsidianTradeIndex.getCandidateFilesForInitialBuild()/indexFile() → shouldIndexFile() 过滤 → db 更新 → emitChanged → Dashboard 刷新

