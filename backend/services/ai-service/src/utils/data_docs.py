#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
市场数据指标文档（自动生成）

本文件包含 market_data.db 中所有指标表的详细说明。
每个条目包含：what（是什么）、why（为什么重要）、how（如何使用）、fields（字段说明）。

生成时间：2025-11-30
"""

DATA_DOCS = {
    "MACD柱状扫描器.py": {
        "what": "基于EMA双均线系统的动量指标，计算DIF（快线）、DEA（慢线）和MACD柱状图。采用标准参数：EMA12、EMA26、信号线EMA9。MACD柱状图 = 2 × (DIF - DEA)，用于衡量价格动能的强度和方向变化。",
        "why": "MACD是最经典的趋势跟踪和动量指标，能够捕捉趋势的启动、延续和衰竭。柱状图的收缩和扩张反映动能变化，金叉/死叉提供明确的买卖信号。在加密货币等高波动市场，MACD对趋势反转有较好的预警作用。",
        "how": "观察顺序：1) 先判断柱状图在零轴上方（多头）还是下方（空头）；2) 观察柱状图高度变化（扩张表示动能增强）；3) 关注DIF与DEA的金叉/死叉信号；4) 结合价格位置判断背离。阈值：柱状图>0为多头市场，<0为空头市场；数值越大动能越强。共振：多周期（1h+4h+1d）同向时信号可靠性大幅提升。",
        "fields": {
            "DEA": "DEA慢线值，DIF的EMA(9)",
            "DIF": "DIF快线值，EMA12-EMA26",
            "MACD": "DIF值（与MACD信号线区分）",
            "MACD信号线": "DEA慢线值",
            "MACD柱状图": "2×(DIF-DEA)，衡量动能强度，>0多头动能，<0空头动能",
            "信号概述": "当前信号描述（金叉/死叉/零轴上穿/下破/延续）",
            "交易对": "交易对符号（如BTCUSDT）",
            "周期": "K线周期（1m/5m/15m/1h/4h/1d/1w）",
            "当前价格": "最新收盘价",
            "成交额": "成交额（USDT）",
            "数据时间": "数据时间戳（ISO格式）"
        }
    },
    "布林带扫描器.py": {
        "what": "基于移动平均线和标准差的价格通道指标。中轨=MA20，上轨=中轨+2×std，下轨=中轨-2×std。计算带宽（(上轨-下轨)/中轨×100）和百分比b（(价格-下轨)/(上轨-下轨)），衡量价格在通道中的相对位置和波动率。",
        "why": "布林带能直观显示价格波动范围和趋势方向。价格触及上轨可能超买，触及下轨可能超卖。带宽收缩预示即将突破，带宽扩张表示波动加剧。百分比b>0.8靠近上轨，<0.2靠近下轨。适用于震荡市做区间交易，趋势市判断强度。",
        "how": "观察顺序：1) 先看带宽趋势（收窄/扩张）；2) 看价格相对于中轨位置；3) 看百分比b值判断超买超卖；4) 观察中轨斜率判断趋势方向。阈值：百分比b>0.8超买区域，<0.2超卖区域；带宽收缩到历史低位预示大行情将至。过滤：在带宽收缩后的首次突破可靠性最高。",
        "fields": {
            "上轨价格": "布林带上轨价格",
            "下轨价格": "布林带下轨价格",
            "中轨价格": "布林带中轨（MA20）",
            "中轨斜率": "中轨的斜率，>0上升趋势，<0下降趋势",
            "交易对": "交易对符号",
            "价格": "当前价格",
            "周期": "K线周期",
            "带宽": "(上轨-下轨)/中轨×100，波动率指标",
            "成交额": "成交额（USDT）",
            "百分比b": "(价格-下轨)/(上轨-下轨)，位置指标，0-1之间",
            "数据时间": "数据时间戳"
        }
    },
    "成交量比率扫描器.py": {
        "what": "成交量相对强度指标，计算量比=当前成交量/MA20(成交量)。与历史20周期平均成交量对比，识别放量和缩量。信号概述分为：极值放量(>5倍)、异常放量(>2倍)、放量(>1倍)、缩量(<0.7倍)、正常。",
        "why": "成交量是价格运动的确认指标。放量上涨表示买盘强劲，放量下跌表示卖压沉重。识别异常成交量能提前发现主力动向、突破确认或顶部派发。在加密货币市场，成交量突变往往预示大行情启动。",
        "how": "观察顺序：1) 先看量比绝对值（>2为异常）；2) 结合价格方向判断（放量上涨=强势，放量下跌=弱势）；3) 连续放量更具参考价值；4) 极端放量（>5）可能是见顶信号。阈值：量比>2值得关注，>5极端情况。共振：价格突破+量比>2为可靠突破信号。过滤：排除开盘瞬间的异常值。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "量比": "当前成交量/20周期平均成交量",
            "信号概述": "成交量状态描述（极值放量/异常放量/放量/缩量/正常）",
            "成交额": "成交额（USDT）",
            "当前价格": "最新价格",
            "数据时间": "数据时间戳"
        }
    },
    "ATR波幅扫描器.py": {
        "what": "平均真实波幅（ATR）指标，计算TR=max(high-low, |high-previous_close|, |low-previous_close|)，然后对TR进行EMA平滑（14周期通道）。ATR百分比=ATR/价格×100。同时构建ATR通道：中轨=MA20，上轨=中轨+2×ATR，下轨=中轨-2×ATR。",
        "why": "ATR是衡量波动率的核心指标，反映市场真实的波动幅度。ATR上升表示波动加剧，适合趋势跟踪策略；ATR下降表示波动收窄，可能进入盘整。通道上下轨可用于动态止损和突破判断。适用于仓位管理和风险控制。",
        "how": "观察顺序：1) 先看ATR百分比绝对值；2) 观察波动分类（升温/降温/稳定）；3) 看价格在ATR通道中的位置；4) 结合趋势判断波动变化意义。阈值：ATR百分比>5%为高波动，<1%为低波动。过滤：ATR连续3周期上升才确认波动加剧。应用：通道外2倍ATR为止损参考。",
        "fields": {
            "ATR百分比": "ATR/当前价格×100，波动率指标",
            "上轨": "ATR通道上轨=中轨+2×ATR",
            "下轨": "ATR通道下轨=中轨-2×ATR",
            "中轨": "20周期简单移动平均线",
            "交易对": "交易对符号",
            "周期": "K线周期",
            "当前价格": "最新价格",
            "成交额": "成交额（USDT）",
            "波动分类": "近期波动状态（升温/降温/稳定）"
        }
    },
    "KDJ随机指标扫描器.py": {
        "what": "随机震荡指标，计算K值=(C-L9)/(H9-L9)×100，D值=K的EMA(3)，J值=3×K-2×D。其中L9和H9是9周期最低价和最高价。反映价格在近期区间中的相对位置，K为快线，D为慢线，J为动量放大线。",
        "why": "KDJ对超买超卖敏感，适合震荡市判断反转。K线和D线金叉/死叉提供买卖信号。J线>100为超买极值，<0为超卖极值。在加密货币市场，KDJ能快速反应短期情绪波动，适合短周期（15m/1h）交易。",
        "how": "观察顺序：1) 先看J值是否进入极值区；2) 观察K与D的金叉/死叉；3) 看三线数值相对位置；4) 结合价格判断背离。阈值：J>100超买极值，J<0超卖极值；K>80超买区，K<20超卖区。过滤：J进入极值区后需等待回归确认信号。共振：KDJ+MACD同时金叉信号更可靠。",
        "fields": {
            "D值": "KDJ慢线D值，EMA(K,3)",
            "J值": "KDJ动量线，J=3×K-2×D",
            "K值": "KDJ快线K值，当前在9周期区间中的相对位置",
            "交易对": "交易对符号",
            "周期": "K线周期",
            "信号概述": "信号描述（金叉/死叉/J极值/延续）",
            "成交额": "成交额（USDT）",
            "当前价格": "最新价格",
            "数据时间": "数据时间戳"
        }
    },
    "主动买卖比扫描器.py": {
        "what": "基于taker主动成交数据的买卖力量对比指标。主动买量=taker_buy_volume，主动卖量=volume - taker_buy_volume，主动买卖比=主动买量/总量。反映市场参与者的主动买卖意愿强度。",
        "why": "区分主动成交和被动成交，真实反映市场买卖力量对比。主动买>主动卖=资金流入，反之资金流岀。在关键价位（支撑/阻力）观察主动买卖比变化，可判断主力资金意图。适合短线交易和资金流向分析。",
        "how": "观察顺序：1) 看主动买卖比绝对值（>0.5买盘强，<0.5卖盘强）；2) 观察变化趋势；3) 结合价格判断背离；4) 在支撑阻力位的变化更有意义。阈值：>0.6强烈买入，<0.4强烈卖出。过滤：单笔异常大单影响。应用：连续3根K线主动买>主动卖确认为资金流入。",
        "fields": {
            "主动买量": "主动买入成交量",
            "主动卖量": "主动卖出成交量",
            "主动买卖比": "主动买量/总成交量，>0.5买盘占优",
            "交易对": "交易对符号",
            "周期": "K线周期",
            "价格": "当前价格",
            "数据时间": "数据时间戳"
        }
    },
    "VWAP离线信号扫描.py": {
        "what": "成交量加权平均价格（VWAP）指标，计算VWAP=Σ(价格×成交量)/Σ成交量。使用典型价格（(high+low+close)/3）加权，并计算当前价格相对于VWAP的偏离度（百分比）和偏离绝对值。同时估算VWAP通道带宽。",
        "why": "VWAP是机构交易的基准参考价，反映大资金成本位置。价格高于VWAP表示当前处于盈利区域（多头占优），低于则处于亏损区域（空头占优）。偏离度过大可能回归VWAP。适用于判断大资金成本和支撑阻力区域。",
        "how": "观察顺序：1) 看价格在VWAP上方还是下方；2) 看偏离度大小；3) 观察是否偏离通道上下轨；4) 结合成交量判断有效性。阈值：偏离度>5%为显著偏离，>10%为极端偏离。过滤：需有足够成交量确认VWAP有效性。应用：价格回抽VWAP时观察反弹强度。",
        "fields": {
            "VWAP价格": "成交量加权平均价格",
            "偏离度": "(当前价格-VWAP)/VWAP，相对偏离比例",
            "偏离百分比": "偏离度×100，百分比形式",
            "成交量加权": "加权成交量",
            "当前价格": "最新价格",
            "成交额（USDT）": "成交额",
            "VWAP上轨": "VWAP+价格标准差",
            "VWAP下轨": "VWAP-价格标准差",
            "VWAP带宽百分比": "通道宽度/VWAP×100",
            "交易对": "交易对符号",
            "周期": "K线周期",
            "数据时间": "数据时间戳"
        }
    },
    "超级精准趋势扫描器.py": {
        "what": "零滞后趋势带指标（Zero Lag Trend Signals），基于零滞后EMA（ZLEMA）和波动带。ZLEMA(close+lag(close)-close[lag],70)+highest(ATR(70)×1.2,70×3)构建动态趋势带。趋势方向由价格突破上轨（多）或下轨（空）确定，否则延续前趋势。",
        "why": "零滞后特性解决传统均线滞后问题，趋势带动态调整适应波动率变化。能在趋势启动初期快速响应，避免滞后入场。适合中短线趋势跟踪，特别适合加密货币的快速趋势切换。",
        "how": "观察顺序：1) 看趋势方向（1=多，-1=空）；2) 看趋势持续根数；3) 看趋势强度（价距趋势带）；4) 看量能偏向。阈值：趋势强度>1.5表示偏离趋势带较远可能回调。信号：趋势翻转后前3根K线为最佳入场期。过滤：持续根数<5为初期趋势，信号较弱需确认。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "币种": "币种代码（去掉USDT）",
            "趋势方向": "1=多头，-1=空头",
            "趋势持续根数": "当前趋势持续了多少根K线",
            "趋势强度": "价格偏离趋势带的距离（标准化）",
            "趋势带": "趋势带价格（支撑或阻力）",
            "最近翻转时间": "趋势最近一次翻转的时间戳",
            "量能偏向": "(上涨成交量-下跌成交量)/平均值，>0买盘强"
        }
    },
    "CVD信号排行榜.py": {
        "what": "累积成交量差（Cumulative Volume Delta），计算主动买量与主动卖量的累积差值：CVD=Σ(主动买-主动卖)=Σ(2×taker_buy_volume-volume)。反映一段时间内的净资金流入流出总量。",
        "why": "CVD直接反映资金流动方向，持续上升表示资金持续流入，下降趋势表示资金流出。与价格结合可判断背离（价格涨但CVD跌=上涨乏力）。适合判断主力资金动向和趋势可持续性。",
        "how": "观察顺序：1) 看CVD整体趋势方向；2) 看变化率判断加速减速；3) 与价格走势对比看背离；4) 看绝对值大小。阈值：变化率>50%为资金加速流入/流出。信号：CVD与价格背离时警惕反转。过滤：需观察至少30根K线确认趋势。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "CVD值": "累积成交量差值，正数表示净买入",
            "变化率": "近期CVD变化率，反映资金流动加速度",
            "数据时间": "数据时间戳"
        }
    },
    "VPVR排行生成器.py": {
        "what": "成交量分布可视化范围（Volume Profile Visible Range），统计可见区间内成交量在各价格水平的分布。识别控制点（成交量最大）、价值区（VWAP方式计算70%成交量集中的价格区间）、高/低成交节点。",
        "why": "VPVR显示大资金的集中成交区域，价值区是核心支撑阻力带。控制点是市场认可的最高成交价格。高成交节点形成阻力带，低成交节点形成价格缺口/真空区。适用于判断机构成本区和强支撑阻力。",
        "how": "观察顺序：1) 看控制点价格；2) 看价值区间位置（上/中/下）；3) 看价值区覆盖率；4) 关注高低节点分布。阈值：价值区覆盖率>70%为核心成交区。信号：当前价格在价值区上沿上为强势，下沿下为弱势。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "VPVR价格": "控制点价格（成交量最大）",
            "成交量分布": "控制点成交量",
            "价值区下沿": "70%成交量集中区的下边界",
            "价值区上沿": "70%成交量集中区的上边界",
            "价值区宽度百分比": "价值区宽度/控制点×100",
            "价值区覆盖率": "价值区内成交量/总成交量",
            "高成交节点": "成交量显著高于平均的价格节点",
            "低成交节点": "成交量显著低于平均的价格节点（缺口）",
            "价值区位置": "当前价格相对价值区位置（上/中/下）",
            "数据时间": "数据时间戳"
        }
    },
    "流动性扫描器.py": {
        "what": "多维度流动性综合评分（Amihud比率、Kyle Lambda、波动率、成交量加权）。Amihud=收益率绝对值/成交额，Kyle=价格变化/订单流。分数0-100，分数越高流动性越好。等级：优秀(>80)/良好(>65)/一般(>50)/紧张(>30)/危险(<30)。",
        "why": "流动性决定交易执行成本和滑点风险。在高杠杆的加密货币市场，流动性枯竭会导致价格闪崩和无法平仓。综合评分帮助识别流动性风险较高的币种和交易时段，避免在流动性紧张时大额交易。",
        "how": "观察顺序：1) 看流动性得分；2) 看等级分类；3) 看各子项得分；4) 对比不同币种流动性差异。阈值：得分<50谨慎交易，<30避免交易。过滤：新上线小币种天然流动性低需单独评估。应用：流动性<65时减少仓位，<50避免开仓。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "流动性得分": "综合流动性得分（0-100）",
            "流动性等级": "优秀/良好/一般/紧张/危险",
            "Amihud得分": "价格冲击得分（0-100）",
            "Kyle得分": "订单流冲击得分（0-100）",
            "波动率得分": "波动率得分（0-100）",
            "成交量得分": "成交量得分（0-100）",
            "Amihud原值": "原始Amihud指标",
            "Kyle原值": "原始Kyle Lambda",
            "成交额（USDT）": "成交额",
            "当前价格": "最新价格",
            "排名": "流动性排名",
            "数据时间": "数据时间戳"
        }
    },
    "K线形态扫描器.py": {
        "what": "自动识别K线图表形态的工具，综合使用tradingpattern、patternpy、trendln、TA-Lib、pandas_ta等库的100+种价格形态和蜡烛组合形态检测。包括：头肩顶/底、双顶/底、三角形、楔形、旗形、通道形态以及所有TA-Lib CDL*蜡烛形态。",
        "why": "图表形态是技术分析的核心，反映市场心理和行为模式。自动识别形态可快速筛选出处于关键突破前夜的币种，节省人工复盘时间。形态突破往往伴随大行情，是趋势交易的理想入场点。",
        "how": "观察顺序：1) 看形态类型（多个形态用+连接）；2) 看检测数量（同时检测到的形态数）；3) 看强度（各形态得分绝对值之和）；4) 重点关注形态组合。阈值：强度>2为较强形态信号。信号：价格形态+蜡烛形态同时出现可靠性更高。过滤：小周期形态可靠性低于大周期。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "币种": "币种代码",
            "形态类型": "检测到的形态列表（中文）",
            "检测数量": "检测到的形态数量",
            "成交额（USDT）": "成交额",
            "当前价格": "最新价格",
            "数据时间": "数据时间戳"
        }
    },
    "全量支撑阻力扫描器.py": {
        "what": "基于近期价格极值（20周期高低点）计算动态支撑阻力位。支撑位=近期最低价，阻力位=近期最高价。计算价格距离支撑/阻力的百分比距离：距支撑% = |价格-支撑|/价格×100，距阻力% = |阻力-价格|/价格×100，距关键位%=取两者最小值。",
        "why": "支撑阻力是价格行为分析的基础，反映市场共识的关键价位。价格接近支撑位有买盘介入，接近阻力位有卖压。突破支撑/阻力往往意味趋势延续。距离百分比量化价格相对位置，帮助判断风险收益比。",
        "how": "观察顺序：1) 看价格距离支撑位和阻力位百分比；2) 看距关键位百分比（距离越近机会越好）；3) 结合趋势判断突破概率；4) 观察在关键价位的价格反应。阈值：距离<1%为接近关键位，突破概率增加。信号：价格测试支撑位反弹做多，测试阻力位回落做空。过滤：连续多次测试的价位支撑阻力更强。",
        "fields": {
            "支撑位": "近期20根K线最低价",
            "阻力位": "近期20根K线最高价",
            "当前价格": "最新价格",
            "距支撑百分比": "距离支撑位的百分比",
            "距阻力百分比": "距离阻力位的百分比",
            "距关键位百分比": "取支撑和阻力距离的最小值",
            "ATR": "14周期ATR值",
            "交易对": "交易对符号",
            "周期": "K线周期",
            "数据时间": "数据时间戳"
        }
    },
    "G，C点扫描器.py": {
        "what": "基于三条EMA（7/25/99）的趋势跟踪指标。EMA7为快线，EMA25为中速线，EMA99为慢线。带宽评分衡量EMA带的收敛/发散程度：0-100（0=三线重合，100=极度发散）。趋势方向基于价格和EMA相对位置判断（多头排列/空头排列/偏多/偏空/震荡）。",
        "why": "多EMA组合能同时反映短期、中期、长期趋势。EMA7上穿25上穿99形成多头排列为强势多头趋势。带宽评分量化趋势强度，带宽扩张表示趋势加速，带宽收缩表示趋势减速或盘整。适用于趋势跟踪和强弱判断。",
        "how": "观察顺序：1) 看三条EMA排列顺序（判断趋势方向）；2) 看带宽评分（评分>50趋势强）；3) 看价格相对EMA位置；4) 看带宽变化趋势。阈值：带宽评分>70为强趋势，<30为弱趋势。信号：带宽从收缩转扩张为趋势启动信号。过滤：价格需在三线同侧维持至少5根K线确认趋势。",
        "fields": {
            "EMA7": "7周期EMA快线",
            "EMA25": "25周期EMA中线",
            "EMA99": "99周期EMA慢线",
            "价格": "当前价格",
            "趋势方向": "趋势判断（多头排列/空头排列/偏多/偏空/震荡）",
            "带宽评分": "EMA带收敛发散程度（0-100）",
            "交易对": "交易对符号",
            "周期": "K线周期",
            "数据时间": "数据时间戳"
        }
    },
    "谐波信号扫描器.py": {
        "what": "基于多周期RSI（2-33周期）均值计算的谐波值。使用典型价格（HLC/3）作为输入，计算各周期RSI后取平均值。作为价格周期性波动的综合衡量指标。",
        "why": "谐波值反映价格在不同周期的震荡强度和位置。可用于识别价格波动的周期性特征，帮助判断当前处于震荡周期的哪个阶段。在谐波交易理论中，特定数值区间对应不同的交易机会。",
        "how": "观察顺序：1) 看谐波值绝对大小；2) 观察谐波值变化趋势；3) 结合价格判断共振点。阈值：谐波值>70可能超买，<30可能超卖（需根据实际情况校准）。信号：谐波值与价格背离时关注反转可能。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "谐波值": "多周期RSI均值",
            "数据时间": "数据时间戳"
        }
    },
    "MFI资金流量扫描器.py": {
        "what": "资金流量指标（Money Flow Index），结合价格和成交量的RSI变体。MFI=100-100/(1+资金比率)，其中资金比率=正资金流量/负资金流量。正资金流量=价格上涨时的典型价格×成交量。14周期计算。",
        "why": "MFI同时考虑价格和成交量，比RSI更能反映真实资金流动。MFI>80为超买，<20为超卖。成交量加权使指标更难被操纵，适合识别主力资金动向。在加密货币市场，MFI对识别假突破有一定作用。",
        "how": "观察顺序：1) 看MFI数值（>80超买，<20超卖）；2) 观察MFI变化趋势；3) 与价格对比看背离；4) 关注50中轴穿越。阈值：>80超买，<20超卖。信号：MFI与价格背离为重要警示。过滤：MFI在20-80之间为正常区域。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "MFI值": "资金流量指标值（0-100）",
            "数据时间": "数据时间戳"
        }
    },
    "OBV能量潮扫描器.py": {
        "what": "能量潮指标（On-Balance Volume），基于成交量和价格关系的累积指标。价格上涨时OBV=OBV+volume，下跌时OBV=OBV-volume。反映资金累积/派发情况，并计算近期变化率衡量流速。",
        "why": "OBV通过成交量变化预测价格走势，量价配合确认趋势。OBV上升表示资金累积，下降表示派发。与价格背离预示趋势可能反转。领先价格指标，适合早期发现趋势变化。",
        "how": "观察顺序：1) 看OBV趋势方向；2) 看OBV变化率；3) 与价格走势对比找背离；4) 观察OBV突破前高/前低。阈值：变化率>50%为流速加快。信号：价格新高但OBV未新高=顶背离。过滤：需至少20周期确认趋势。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "OBV值": "累积能量潮数值",
            "OBV变化率": "OBV近期变化率",
            "数据时间": "数据时间戳"
        }
    },
    "趋势线榜单": {
        "what": "基于峰谷点+RANSAC算法拟合的趋势线指标。识别近期摆动点（高低点），通过RANSAC线性回归拟合支撑线和阻力线，计算当前价格距离趋势线的百分比，判断趋势方向和偏离程度。",
        "why": "客观趋势线比手工绘制更精确，避免主观偏差。趋势线突破是重要交易信号。距离趋势线百分比量化价格相对位置，靠近趋势线为低风险入场机会，远离趋势线可能回调。适合趋势跟踪和均值回归策略。",
        "how": "观察顺序：1) 看趋势方向；2) 看距离趋势线百分比；3) 价格靠近趋势线时观察反弹/突破；4) 趋势线斜率判断趋势强度。阈值：距离<1%为接近趋势线，突破需确认。信号：趋势线附近出现反转K线为最佳入场点。过滤：趋势线角度>60°为过陡，可靠性降低。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "币种": "币种代码",
            "趋势方向": "趋势线方向",
            "距离趋势线%": "价格与趋势线距离百分比",
            "当前价格": "最新价格",
            "数据时间": "数据时间戳"
        }
    },
    "大资金操盘扫描器.py": {
        "what": "TradingView大资金操盘（Smart Money Concepts）概念移植，综合识别摆动点、订单块（Order Block）、公平价值缺口（FVG）、结构突破/反转（BOS/CHOCH）、区域评估（溢价/折价区等）。基于量价关系和价格结构识别聪明钱足迹。",
        "why": "SMC理论认为机构/聪明钱会在特定位置留下可识别的交易痕迹。订单块是机构建仓区域，FVG是快速突破留下的流动性缺口，BOS/CHOCH识别趋势延续或反转。这些概念在加密货币市场广泛应用，帮助散户理解机构行为。",
        "how": "观察顺序：1) 看信号（买入/卖出/观望）；2) 看方向（多头/空头/震荡）；3) 看结构事件（突破/反转）；4) 关注订单块和缺口位置。信号： bullish_bos=多头突破，bearish_choch=空头反转。过滤：订单块和缺口需回测确认有效性。应用：回测订单块做多，回测FVG顺势交易。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "信号": "交易信号（买入/卖出/观望）",
            "方向": "市场方向（多头/空头/震荡）",
            "强度": "信号强度评分",
            "结构事件": "结构突破或反转事件",
            "订单块": "订单块类型和位置（多头/空头）",
            "缺口": "公平价值缺口类型和位置",
            "区域": "价格区域（溢价/折价/极端溢价/极端折价/均衡）",
            "数据时间": "数据时间戳"
        }
    },
    "智能RSI扫描器.py": {
        "what": "TradingView多周期RSI智能版本，同时计算7/14/21周期RSI并取均值。基于ATR波动率动态调整超买超卖阈值（波动大时阈值放宽）。检测价格与RSI的背离（顶背离/底背离）。结合均线判断趋势状态（多头/空头）。",
        "why": "多周期RSI过滤单一周期的噪音，信号更可靠。动态阈值适应波动率变化，避免固定阈值在高波动市场频繁发错误信号。背离检测是重要的领先指标。适合中短线交易，在震荡市中期效果较好。",
        "how": "观察顺序：1) 看RSI均值位置（超买/超卖区）；2) 看趋势状态（多头/空头）；3) 看背离类型；4) 关注位置（高位/低位/中位）。阈值：自适应超买线（默认70）和超卖线（默认30）。信号：底背离+超卖区=买入，顶背离+超买区=卖出。过滤：需趋势确认，逆势背离信号过滤。",
        "fields": {
            "交易对": "交易对符号",
            "周期": "K线周期",
            "信号": "交易信号（买入/卖出/观望）",
            "方向": "市场方向（多头/空头/震荡）",
            "强度": "信号强度",
            "RSI均值": "多周期RSI均值",
            "趋势状态": "趋势方向（多头/空头/震荡）",
            "位置": "RSI位置（高位/中位/低位）",
            "背离类型": "背离类型（顶/底/隐藏）",
            "超买线": "动态超买阈值",
            "超卖线": "动态超卖阈值",
            "数据时间": "数据时间戳"
        }
    },
    "基础数据同步器.py": {
        "what": "K线基础数据同步表，直接存储从交易所获取的原始K线数据字段和衍生指标。包含开盘价、最高价、最低价、收盘价、成交量、成交额、振幅、变化率、主动买卖量、资金流向等基础数据，是其他所有技术指标计算的基础数据源。",
        "why": "基础数据是所有技术分析的起点，保证数据的完整性和准确性至关重要。通过集中存储基础数据，避免各指标重复计算基础字段，提高计算效率。同时保留主动买卖量和资金流向等交易所原生数据，为链上分析提供原始材料。",
        "how": "使用方式：1) 作为数据源供其他指标计算使用；2) 验证其他指标计算结果；3) 查询历史价格数据；4) 分析资金流向和成交分布。特点：该表数据直接来源于交易所API，未经计算和转换（衍生字段除外），是可信度最高的原始数据。查询时建议按交易对+周期+数据时间组合索引。",
        "fields": {
            "交易对": "交易对符号（如BTCUSDT）",
            "周期": "K线周期（1m/5m/15m/1h/4h/1d/1w）",
            "数据时间": "数据时间戳（ISO格式）",
            "开盘价": "K线开盘价",
            "最高价": "K线最高价",
            "最低价": "K线最低价",
            "收盘价": "K线收盘价",
            "当前价格": "最新价格（同收盘价）",
            "成交量": "交易成交量",
            "成交额": "交易成交额（USDT）",
            "振幅": "(最高价-最低价)/开盘价×100%",
            "变化率": "(收盘价-开盘价)/开盘价×100%",
            "交易次数": "成交笔数",
            "主动买入量": "主动买入成交量（taker_buy_volume）",
            "主动买量": "主动买入成交量（同主动买入量）",
            "主动买额": "主动买入成交额",
            "主动卖量": "主动卖出成交量（volume - taker_buy_volume）",
            "主动卖出额": "主动卖出成交额",
            "主动买卖比": "主动买量/总成交量",
            "资金流向": "主动买额-主动卖出额",
            "平均每笔成交额": "成交额/交易次数",
            "成交笔数": "同交易次数"
        }
    },
    "metrics_5m_latest_50": {
        "what": "Binance U 本位永续 5m 聚合指标快照。每行代表一个 5 分钟时间桶，浓缩了全市场合约资金结构：持仓规模、顶级账户与全体账户的多空力量，以及主动成交方向。字段解释：create_time=时间桶(UTC)，symbol=交易对，sum_open_interest=总持仓量(张)，sum_open_interest_value=总持仓价值(USDT)，count_toptrader_long_short_ratio=顶级账户多空样本数，sum_toptrader_long_short_ratio=顶级账户多空比总和（除以 count 得均值），count_long_short_ratio=全体账户多空样本数，sum_taker_long_short_vol_ratio=taker 主导成交多空量比总和（除以样本数得均值），exchange=来源交易所，source=采集渠道，is_closed=桶是否闭合，ingested_at=写入时间，updated_at=最后更新时间。",
        "why": "该表直接反映资金侧情绪与仓位结构：持仓量与价值揭示杠杆堆积程度，多空比例揭示方向倾斜，taker 多空量比展示主动交易倾向。它们可提前暴露潜在的挤仓风险或趋势加速点，对短线择时和风险控制价值极高。",
        "how": "先看 sum_open_interest/ sum_open_interest_value 的趋势与拐点，判断杠杆堆积或出清；结合顶级账户与全体账户多空均值对比，识别“聪明钱”与大众的分歧；关注 sum_taker_long_short_vol_ratio 由正转负或由负转正的转折点，配合价格与量能确认；仅使用 is_closed=True 的桶以避免缺口，异常值需与采集时间戳(ingested_at/updated_at)核对。",
        "fields": {
            "create_time": "指标时间（5m 桶起始时刻，UTC）。",
            "symbol": "交易对，如 ETHUSDT。",
            "sum_open_interest": "全市场合约张数总持仓量。",
            "sum_open_interest_value": "按USDT计价的总持仓名义价值。",
            "count_toptrader_long_short_ratio": "统计 Top Trader 多空比样本数量。",
            "sum_toptrader_long_short_ratio": "Top Trader 多空比总和（待除以 count 得均值）。",
            "count_long_short_ratio": "全体账户多空比样本数量。",
            "sum_taker_long_short_vol_ratio": "taker 主导成交多空量比总和（待除以 样本数得均值）。",
            "exchange": "来源交易所，固定 binance_futures_um。",
            "source": "采集来源渠道标记。",
            "is_closed": "该时间桶是否闭合（True 表示完整数据）。",
            "ingested_at": "写入时间（采集时间戳）。",
            "updated_at": "最后更新（重刷）时间。"
        }
    },
    "candles_latest_50": {
        "what": "多周期（1m/5m/15m/1h/4h/1d/1w）各 50 根的原始 K 线序列，包含价格、量能、taker 方向信息以及采集元数据。用于一切二次计算（指标、形态、统计特征）。",
        "why": "K 线是最底层真相源：所有指标与形态最终都回溯到开高低收与量。保留多周期并行序列能验证共振、发现不同尺度的趋势/震荡切换，也能交叉核验上层指标是否可信。",
        "how": "优先对目标周期和其上下级周期做压缩摘要（如最近 N 根的 OHLCV 概览、关键高低点、收益/波动率、taker 买卖占比），再注入提示词；避免整包 50×7 条原始行直接送入模型。必要时只暴露关键统计（均值、方差、极值、成交量/额累积、买卖差分），同时保留 bucket_ts 用于时间对齐。",
        "fields": {
            "exchange": "数据来源交易所，现固定 binance_futures_um。",
            "symbol": "交易对标识，例如 ETHUSDT。",
            "bucket_ts": "K 线起始时间（对齐周期边界，UTC）。",
            "open": "开盘价。",
            "high": "最高价。",
            "low": "最低价。",
            "close": "收盘价。",
            "volume": "基础资产成交量（币数量）。",
            "quote_volume": "计价资产成交额（USDT）。",
            "trade_count": "成交笔数。",
            "is_closed": "该K线是否闭合（True 表示已完成）。",
            "source": "采集渠道标记，如 binance_ws/binance_zip。",
            "ingested_at": "写入时间（采集）。",
            "updated_at": "最后更新时间（重刷/修正）。",
            "taker_buy_volume": "吃单买入量（币）。",
            "taker_buy_quote_volume": "吃单买入额（USDT）。"
        }
    },
}

__all__ = ["DATA_DOCS"]
